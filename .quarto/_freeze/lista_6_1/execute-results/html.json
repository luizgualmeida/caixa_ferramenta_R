{
  "hash": "1521c2fc141264b7a56f7ec425e5604c",
  "result": {
    "markdown": "# Lista 6.1 - Cox tempo dependente\n\nO banco de dados Cox_tempo_dependente1.sav apresenta os dados de 628 pacientes de um serviço de nefrologia. Os pacientes foram acompanhados por pouco mais de 1000 dias e durante este período alguns pacientes fizeram transplante renal (treat=1). Gostariamos de saber se a realização de transplante aumenta significativamente a sobrevida destes pacientes em relação àqueles que não fizeram. Com base nestas informações, responda as questões abaixo\n\n## Carregando pacotes\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(flexplot)\nlibrary(foreign)\nlibrary(dplyr)\nlibrary(tm)\nlibrary(ggplot2)\nlibrary(forcats)\nlibrary(rempsyc)\nlibrary(easystats)\nlibrary(kableExtra)\nlibrary(gtsummary)\n\n#Específicos para survival\nlibrary(survival)\nlibrary(ggsurvfit)\nlibrary(survminer)\nlibrary(broom)\nlibrary(survMisc)\nlibrary(PHInfiniteEstimates)\nlibrary(coin)\nlibrary(condSURV)\n```\n:::\n\n\n\n\n## Carregando os dados e modificando o tipo de variável\n\nMantendo as boas práticas das análises, logo após carregar os dados em uma variável, vamos verificar os tipos de variávels que temos em nosso banco.\n\n\n::: {.cell}\n\n```{.r .cell-code}\noriginal = read.spss(\"Cox tempo dependente 2_1.sav\", to.data.frame=TRUE)\nglimpse(original)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 628\nColumns: 7\n$ ID            <dbl> 112, 91, 113, 150, 22, 139, 104, 590, 189, 171, 338, 492…\n$ age           <dbl> 35, 33, 35, 31, 33, 43, 25, 35, 29, 27, 35, 23, 24, 23, …\n$ race          <fct> branco, branco, branco, branco, branco, branco, branco, …\n$ treat         <dbl> 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1,…\n$ Tempo_dialise <dbl> 51, 67, 88, 156, 12, 139, 90, 25, 187, 34, 29, 78, 63, 8…\n$ time          <dbl> 1172, 762, 734, 720, 659, 658, 655, 654, 634, 630, 621, …\n$ morte         <fct> Não, Não, Não, Não, Não, Não, Não, Não, Não, Não, Não, N…\n```\n:::\n:::\n\n\nNovamente podemos observar que o evento de interesse (morte) está como um fator. Vamos modificar como já fizemos a lista 6 e também já vamos ajustar a variável \"treat\" para que ela seja um fator e não um número.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndb <- original %>%\n  mutate(\n    morte = as.integer(morte == \"Sim\"), # para transformar sim e não em 1 e 0, respectivamente\n    treat = as.factor(treat)\n  )\nglimpse(db)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 628\nColumns: 7\n$ ID            <dbl> 112, 91, 113, 150, 22, 139, 104, 590, 189, 171, 338, 492…\n$ age           <dbl> 35, 33, 35, 31, 33, 43, 25, 35, 29, 27, 35, 23, 24, 23, …\n$ race          <fct> branco, branco, branco, branco, branco, branco, branco, …\n$ treat         <fct> 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1,…\n$ Tempo_dialise <dbl> 51, 67, 88, 156, 12, 139, 90, 25, 187, 34, 29, 78, 63, 8…\n$ time          <dbl> 1172, 762, 734, 720, 659, 658, 655, 654, 634, 630, 621, …\n$ morte         <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n```\n:::\n:::\n\n\nFeito! Vamos também verificar se há presença de dados faltantes e em quais variáveis.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Verificando NAs\nresumo_nas <- db %>%\n  summarise(\n    nas_age = sum(is.na(age)),\n    nas_race = sum(is.na(race)),\n    nas_treat = sum(is.na(treat)),\n    nas_t_dialise = sum(is.na(Tempo_dialise)),\n    nas_time = sum(is.na(time)),\n    nas_morte = sum(is.na(morte)),\n  )\nkable(resumo_nas)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> nas_age </th>\n   <th style=\"text-align:right;\"> nas_race </th>\n   <th style=\"text-align:right;\"> nas_treat </th>\n   <th style=\"text-align:right;\"> nas_t_dialise </th>\n   <th style=\"text-align:right;\"> nas_time </th>\n   <th style=\"text-align:right;\"> nas_morte </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nAté chegar na Cox tempo dependente, vamos repetir basicamente o que já fizemos no [Capítulo @sec-lista-6]\n\n## Criando a estrutura de dados\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a survival object\nsurv_obj <- Surv(time = db$time, event = db$morte)\n```\n:::\n\n\n### Tábua de vida\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create survival curve\nfit1 <- survfit(surv_obj ~ treat, data = db)\nkable(head(tidy(fit1)))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> time </th>\n   <th style=\"text-align:right;\"> n.risk </th>\n   <th style=\"text-align:right;\"> n.event </th>\n   <th style=\"text-align:right;\"> n.censor </th>\n   <th style=\"text-align:right;\"> estimate </th>\n   <th style=\"text-align:right;\"> std.error </th>\n   <th style=\"text-align:right;\"> conf.high </th>\n   <th style=\"text-align:right;\"> conf.low </th>\n   <th style=\"text-align:left;\"> strata </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 320 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.993750 </td>\n   <td style=\"text-align:right;\"> 0.0044333 </td>\n   <td style=\"text-align:right;\"> 1.0000000 </td>\n   <td style=\"text-align:right;\"> 0.9851526 </td>\n   <td style=\"text-align:left;\"> treat=0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 318 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.987500 </td>\n   <td style=\"text-align:right;\"> 0.0062894 </td>\n   <td style=\"text-align:right;\"> 0.9997483 </td>\n   <td style=\"text-align:right;\"> 0.9754017 </td>\n   <td style=\"text-align:left;\"> treat=0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 316 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.984375 </td>\n   <td style=\"text-align:right;\"> 0.0070430 </td>\n   <td style=\"text-align:right;\"> 0.9980575 </td>\n   <td style=\"text-align:right;\"> 0.9708801 </td>\n   <td style=\"text-align:left;\"> treat=0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:right;\"> 315 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.978125 </td>\n   <td style=\"text-align:right;\"> 0.0083599 </td>\n   <td style=\"text-align:right;\"> 0.9942837 </td>\n   <td style=\"text-align:right;\"> 0.9622289 </td>\n   <td style=\"text-align:left;\"> treat=0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 313 </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.971875 </td>\n   <td style=\"text-align:right;\"> 0.0095097 </td>\n   <td style=\"text-align:right;\"> 0.9901593 </td>\n   <td style=\"text-align:right;\"> 0.9539283 </td>\n   <td style=\"text-align:left;\"> treat=0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:right;\"> 311 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.968750 </td>\n   <td style=\"text-align:right;\"> 0.0100402 </td>\n   <td style=\"text-align:right;\"> 0.9880024 </td>\n   <td style=\"text-align:right;\"> 0.9498728 </td>\n   <td style=\"text-align:left;\"> treat=0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n### Gráfico Kaplan-Meir\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkm_plot = survfit2(surv_obj ~ treat, data = db) %>%\n  tidy_survfit() %>%\n  ggplot(aes(x = time, y = estimate,\n             min = conf.low, ymax = conf.low,\n             color = strata, fill = strata)) +\n  geom_step()\nkm_plot\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\nPodemos ajustar as configurações do eixo X para exibir uma escala temporal com intervalos de 50 unidades.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# km_plot2 = fit1 %>%\n#   tidy_survfit() %>%\n#   ggplot(aes(x = time, y = estimate,\n#              min = conf.low, ymax = conf.low,\n#              color = strata, fill = strata)) +\n#   geom_step()\n\nkm_plot2 = fit1 %>%\n  tidy_survfit() %>%\n  ggplot(aes(x = time, y = estimate,\n             min = conf.low, ymax = conf.low,\n             color = strata, fill = strata)) +\n  geom_step() +\n  scale_x_continuous(breaks = seq(0, max(fit1$time), by = 50))\n\n\nkm_plot2\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n### Tabela com Sobrevida em tempos espcíficos.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntbl_survfit_ex3 <-\n  list(\n    survfit(surv_obj ~ 1, db),\n    survfit(surv_obj ~ treat, db)\n  ) %>%\n  tbl_survfit(times = c(100, 600))\ntbl_survfit_ex3\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"qeayjdrzqo\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#qeayjdrzqo table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#qeayjdrzqo thead, #qeayjdrzqo tbody, #qeayjdrzqo tfoot, #qeayjdrzqo tr, #qeayjdrzqo td, #qeayjdrzqo th {\n  border-style: none;\n}\n\n#qeayjdrzqo p {\n  margin: 0;\n  padding: 0;\n}\n\n#qeayjdrzqo .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#qeayjdrzqo .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#qeayjdrzqo .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#qeayjdrzqo .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#qeayjdrzqo .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#qeayjdrzqo .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#qeayjdrzqo .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#qeayjdrzqo .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#qeayjdrzqo .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#qeayjdrzqo .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#qeayjdrzqo .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#qeayjdrzqo .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#qeayjdrzqo .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#qeayjdrzqo .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#qeayjdrzqo .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qeayjdrzqo .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#qeayjdrzqo .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#qeayjdrzqo .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#qeayjdrzqo .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qeayjdrzqo .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#qeayjdrzqo .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qeayjdrzqo .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#qeayjdrzqo .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qeayjdrzqo .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#qeayjdrzqo .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#qeayjdrzqo .gt_left {\n  text-align: left;\n}\n\n#qeayjdrzqo .gt_center {\n  text-align: center;\n}\n\n#qeayjdrzqo .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#qeayjdrzqo .gt_font_normal {\n  font-weight: normal;\n}\n\n#qeayjdrzqo .gt_font_bold {\n  font-weight: bold;\n}\n\n#qeayjdrzqo .gt_font_italic {\n  font-style: italic;\n}\n\n#qeayjdrzqo .gt_super {\n  font-size: 65%;\n}\n\n#qeayjdrzqo .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#qeayjdrzqo .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#qeayjdrzqo .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#qeayjdrzqo .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#qeayjdrzqo .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#qeayjdrzqo .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#qeayjdrzqo .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Characteristic&lt;/strong&gt;\"><strong>Characteristic</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Time 100&lt;/strong&gt;\"><strong>Time 100</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Time 600&lt;/strong&gt;\"><strong>Time 600</strong></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Overall</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">66% (63%, 70%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">19% (16%, 22%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">treat</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    0</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">61% (56%, 66%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">16% (13%, 21%)</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    1</td>\n<td headers=\"stat_1\" class=\"gt_row gt_center\">72% (67%, 77%)</td>\n<td headers=\"stat_2\" class=\"gt_row gt_center\">21% (17%, 26%)</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\n### Log-rank\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoin::logrank_test(surv_obj ~ treat, data = db, type = \"logrank\" ) # padrão é o log-rank\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tAsymptotic Two-Sample Logrank Test\n\ndata:  surv_obj by treat (0, 1)\nZ = -2.5984, p-value = 0.009365\nalternative hypothesis: true theta is not equal to 1\n```\n:::\n:::\n\n\n### Gehan-Breslow\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoin::logrank_test(surv_obj ~ treat ,data = db, type = \"Gehan-Breslow\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tAsymptotic Two-Sample Gehan-Breslow Test\n\ndata:  surv_obj by treat (0, 1)\nZ = -3.0713, p-value = 0.002132\nalternative hypothesis: true theta is not equal to 1\n```\n:::\n:::\n\n\n### Tarone-Ware\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoin::logrank_test(surv_obj ~ treat ,data = db, type = \"Tarone-Ware\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tAsymptotic Two-Sample Tarone-Ware Test\n\ndata:  surv_obj by treat (0, 1)\nZ = -2.9622, p-value = 0.003055\nalternative hypothesis: true theta is not equal to 1\n```\n:::\n:::\n\n\n### Peto-Peto\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoin::logrank_test(surv_obj ~ treat ,data = db, type = \"Peto-Peto\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n\tAsymptotic Two-Sample Peto-Peto Test\n\ndata:  surv_obj by treat (0, 1)\nZ = -3.0608, p-value = 0.002207\nalternative hypothesis: true theta is not equal to 1\n```\n:::\n:::\n\n\n## Cox regression\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Cox regression ======================================================\n# Fit the model\n\ncox_res <- coxph(Surv(time = db$time, event = db$morte) ~ treat, data = db)\n### Para testar todas as variáveis\n#cox_res <- coxph(Surv(time = db$time, event = db$morte2) ~ treat + age + Tempo_dialise, data = db)\n\ntbl_regression(cox_res, exponentiate = TRUE)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"kovzhddvrm\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#kovzhddvrm table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#kovzhddvrm thead, #kovzhddvrm tbody, #kovzhddvrm tfoot, #kovzhddvrm tr, #kovzhddvrm td, #kovzhddvrm th {\n  border-style: none;\n}\n\n#kovzhddvrm p {\n  margin: 0;\n  padding: 0;\n}\n\n#kovzhddvrm .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#kovzhddvrm .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#kovzhddvrm .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#kovzhddvrm .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#kovzhddvrm .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#kovzhddvrm .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#kovzhddvrm .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#kovzhddvrm .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#kovzhddvrm .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#kovzhddvrm .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#kovzhddvrm .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#kovzhddvrm .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#kovzhddvrm .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#kovzhddvrm .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#kovzhddvrm .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kovzhddvrm .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#kovzhddvrm .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#kovzhddvrm .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#kovzhddvrm .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kovzhddvrm .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#kovzhddvrm .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kovzhddvrm .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#kovzhddvrm .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kovzhddvrm .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kovzhddvrm .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kovzhddvrm .gt_left {\n  text-align: left;\n}\n\n#kovzhddvrm .gt_center {\n  text-align: center;\n}\n\n#kovzhddvrm .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#kovzhddvrm .gt_font_normal {\n  font-weight: normal;\n}\n\n#kovzhddvrm .gt_font_bold {\n  font-weight: bold;\n}\n\n#kovzhddvrm .gt_font_italic {\n  font-style: italic;\n}\n\n#kovzhddvrm .gt_super {\n  font-size: 65%;\n}\n\n#kovzhddvrm .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#kovzhddvrm .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#kovzhddvrm .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#kovzhddvrm .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#kovzhddvrm .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#kovzhddvrm .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#kovzhddvrm .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Characteristic&lt;/strong&gt;\"><strong>Characteristic</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;HR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>HR</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>95% CI</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;p-value&lt;/strong&gt;\"><strong>p-value</strong></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">treat</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"ci\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    0</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">—</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">—</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    1</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.79</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.67, 0.94</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.009</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span> HR = Hazard Ratio, CI = Confidence Interval</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Verificando os pressupostos da Cox regression\n\nRelembrando a análise dos riscos proporcionais com base nos resíduos de Schoenfeld:\n\n-   p-val \\< 0,05: há evidências **contra** a pressuposto de riscos proporcionais, os HRs **não** são constantes ao longo do tempo\n\n-   chisq: quanto maior o valor, mais forte a violação dos pressupostos\n\n## Plot dos resíduos de Schoenfeld\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot the Schoenfeld residuals over time for each covariate\nsurvminer::ggcoxzph(cox.zph(cox_res), point.size = 0.1)\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\nSe os resíduos mostrarem um padrão claro ao longo do tempo, isso pode indicar uma violação da suposição de riscos proporcionais.\n\nAlgumas dicas para ajudar na interpretação:\n\n-   Sem Padrão (Resíduos Constantes): Se os resíduos aparecerem aleatoriamente espalhados em torno de zero, sem nenhuma tendência ou padrão claro, isso sugere que a suposição de riscos proporcionais é razoável.\n\n-   Tendência Linear: Uma tendência linear (aumentando ou diminuindo) nos resíduos ao longo do tempo pode sugerir uma violação da suposição de riscos proporcionais. Por exemplo, se os resíduos forem consistentemente positivos ou negativos ao longo do tempo, isso indica um efeito dependente do tempo.\n\n-   Padrão Não Linear: Se os resíduos exibirem um padrão não linear ou formatos específicos (por exemplo, formato de U, formato de V), isso pode indicar desvios dos riscos proporcionais.\n\n-   Paralelismo: Paralelismo significa que a propagação e distribuição dos resíduos são relativamente constantes ao longo do tempo. Se os resíduos aumentarem ou diminuirem ao longo do tempo, isso pode sugerir uma violação da suposição.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggcoxdiagnostics(cox_res, type = \"dfbeta\", linear.predictions = FALSE)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: `gather_()` was deprecated in tidyr 1.2.0.\nℹ Please use `gather()` instead.\nℹ The deprecated feature was likely used in the survminer package.\n  Please report the issue at <https://github.com/kassambara/survminer/issues>.\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Não é importante para variáveis categóricas, mas fica o código para eventual consulta.\nggcoxdiagnostics(cox_res, type = \"deviance\", linear.predictions = FALSE)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n:::\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n## Plots do modelo\n\n### Forest plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Forest plots ================================================================\n# Visualise your Cox model results\nggforest(cox_res, data = db)\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n### Gráfico de sobrevida\n\nAssim como fizemos no exercício anterior, precisamos criar um novo banco de dados para visualizar o gráfico da Regressão de Cox:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Precisa ser feito apenas com uma variável\ncox_res2 <- coxph(Surv(time = db$time, event = db$morte) ~ treat, data = db)\n\n# Criando o novo banco de dados\nnew_df <- with(db,\n               data.frame(treat = c(\"0\", \"1\"))\n)\n```\n:::\n\n\nE precisamos transformar a variável `treat` em um fator.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnew_df$treat = as.factor(new_df$treat)\nkable(new_df)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> treat </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nCriando os dados com base no modelo e plotando o gráfico.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit_cox <- survfit(cox_res2, newdata = new_df)\n\nJ = ggsurvplot(fit_cox, conf.int = TRUE, legend.labs=c(\"tx=sim\", \"tx=não\"),\n           ggtheme = theme_minimal(),\n           data = db)\n\nJ$plot = J$plot +\n  scale_x_continuous(breaks = seq(0, 900, 20))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nScale for x is already present.\nAdding another scale for x, which will replace the existing scale.\n```\n:::\n\n```{.r .cell-code}\nJ\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\nReparem na distorção do gráfico em relação à Kaplan-Meir\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkm_plot\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n## Cox tempo-dependente\n\nJá vimos que os riscos não são proporcionais neste caso. Porém, nem tudo está perdido. Podemos finalmente agora falar da Cox Tempo-dependente.\n\nO primeiro passo é identificar um possível fator que esteja afetando a proporcionalidade dos riscos no estudo. Pela literatura tempos que o tempo em diálise afeta os riscos entre pessoas que fizeram ou não o transplante de rim. Daí a importância de entender bem o fenômeno que estamos estudando. Como bons pesquisadores, também coletamos o tempo em diálise e esses dados estão no banco de dados\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(db$Tempo_dialise)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n num [1:628] 51 67 88 156 12 139 90 25 187 34 ...\n```\n:::\n:::\n\n\nA variável é numérica e contínua, logo ela já está formatada para continuarmos com a análise.\n\nNão existe regras escritas na pedra para contornar o problema de não proporcionalidade. Vamos mostrar uma abordagem aqui. Não deixe de ver as referências para outros casos.\n\n### Covariáveis tempo dependente\n\nNo R, há diversas formas de indicar uma variável como tempo-dependente. A escolha do método dependerá da natureza da variável independente e da sua relação teórica com o evento em estudo. A função `coxph()` oferece a opção de utilizar o argumento `tt()`, o qual especifica qual variável independente será considerada uma covariável tempo-dependente e como o coeficiente associado a ela deve ser modificado ao longo do tempo.\n\nO modelo deve seguir a seguinte estrutura\n\n`coxph(Surv(time, event) ~ covariavel1 + covariavel2 + tt(covariavel2), data, tt=function(x,t,…) x*t)`\n\nPodemos substituir o `Surv(time, event)` pela variável que salvamos com o objeto survival, `surv_obj`.\n\nA função tt (`function(x,t,…)___)` pode assumir alguns modelos. A seguir trazemos três exemplos mais utilizados em diversas análises:\n\n-   x\\*t permitirá que o coeficiente mude linearmente com o tempo\n\n-   x\\*log(t) permite que o coeficiente mude com o log do tempo\n\n-   x\\*(t\\>tempo) permite que o coeficiente assuma 2 valores diferentes, um valor quando t\\<=tempo e outro valor t\\>tempo\n\nVamos gerar vários modelos e avaliá-los comparando os índices de ajuste e os resultados obtidos.\n\n### Sem variável tempo dependente\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndialise <- coxph(surv_obj ~ treat + Tempo_dialise, \n                          data=db) # corte no 660\n\nsummary(dialise)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = surv_obj ~ treat + Tempo_dialise, data = db)\n\n  n= 628, number of events= 508 \n\n                    coef  exp(coef)   se(coef)       z            Pr(>|z|)    \ntreat1         0.0618983  1.0638541  0.0899990   0.688               0.492    \nTempo_dialise -0.0084493  0.9915863  0.0007709 -10.960 <0.0000000000000002 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n              exp(coef) exp(-coef) lower .95 upper .95\ntreat1           1.0639      0.940    0.8918    1.2691\nTempo_dialise    0.9916      1.008    0.9901    0.9931\n\nConcordance= 0.75  (se = 0.012 )\nLikelihood ratio test= 151.4  on 2 df,   p=<0.0000000000000002\nWald test            = 121.2  on 2 df,   p=<0.0000000000000002\nScore (logrank) test = 120.6  on 2 df,   p=<0.0000000000000002\n```\n:::\n:::\n\n\n### Mudança linear\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndialise_linear <- coxph(surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise),\n                        data=db,\n                          tt=function(x,t,...) x*t) \nsummary(dialise_linear)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), \n    data = db, tt = function(x, t, ...) x * t)\n\n  n= 628, number of events= 508 \n\n                          coef    exp(coef)     se(coef)       z\ntreat1            -0.016001236  0.984126103  0.091676088  -0.175\nTempo_dialise     -0.023777102  0.976503346  0.001506128 -15.787\ntt(Tempo_dialise)  0.000070699  1.000070701  0.000005184  13.637\n                             Pr(>|z|)    \ntreat1                          0.861    \nTempo_dialise     <0.0000000000000002 ***\ntt(Tempo_dialise) <0.0000000000000002 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\ntreat1               0.9841     1.0161    0.8223    1.1778\nTempo_dialise        0.9765     1.0241    0.9736    0.9794\ntt(Tempo_dialise)    1.0001     0.9999    1.0001    1.0001\n\nConcordance= 0.761  (se = 0.009 )\nLikelihood ratio test= 337.6  on 3 df,   p=<0.0000000000000002\nWald test            = 249.3  on 3 df,   p=<0.0000000000000002\nScore (logrank) test = 229.1  on 3 df,   p=<0.0000000000000002\n```\n:::\n:::\n\n\n### Modelo log\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndialise_log <- coxph(surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise),\n                          data=db,\n                          tt=function(x,t,...) x*log(t)) \n\nsummary(dialise_log)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), \n    data = db, tt = function(x, t, ...) x * log(t))\n\n  n= 628, number of events= 508 \n\n                       coef exp(coef)  se(coef)      z            Pr(>|z|)    \ntreat1            -0.071106  0.931363  0.092369  -0.77               0.441    \nTempo_dialise     -0.097417  0.907178  0.005942 -16.40 <0.0000000000000002 ***\ntt(Tempo_dialise)  0.017178  1.017326  0.001087  15.80 <0.0000000000000002 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\ntreat1               0.9314      1.074    0.7771    1.1162\nTempo_dialise        0.9072      1.102    0.8967    0.9178\ntt(Tempo_dialise)    1.0173      0.983    1.0152    1.0195\n\nConcordance= 0.759  (se = 0.01 )\nLikelihood ratio test= 461.5  on 3 df,   p=<0.0000000000000002\nWald test            = 284.6  on 3 df,   p=<0.0000000000000002\nScore (logrank) test = 223.9  on 3 df,   p=<0.0000000000000002\n```\n:::\n:::\n\n\n### Modelo temporal\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndialise_tempo_650 <- coxph(surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise),\n                          data=db,\n                          tt=function(x,t,...) x*(t>650))\n\nsummary(dialise_tempo_650)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), \n    data = db, tt = function(x, t, ...) x * (t > 650))\n\n  n= 628, number of events= 508 \n\n                        coef  exp(coef)   se(coef)       z            Pr(>|z|)\ntreat1             0.0617615  1.0637086  0.0900051   0.686               0.493\nTempo_dialise     -0.0084524  0.9915832  0.0007713 -10.958 <0.0000000000000002\ntt(Tempo_dialise)  0.0028519  1.0028560  0.0221016   0.129               0.897\n                     \ntreat1               \nTempo_dialise     ***\ntt(Tempo_dialise)    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\ntreat1               1.0637     0.9401    0.8917    1.2689\nTempo_dialise        0.9916     1.0085    0.9901    0.9931\ntt(Tempo_dialise)    1.0029     0.9972    0.9603    1.0473\n\nConcordance= 0.75  (se = 0.01 )\nLikelihood ratio test= 151.5  on 3 df,   p=<0.0000000000000002\nWald test            = 121.2  on 3 df,   p=<0.0000000000000002\nScore (logrank) test = 120.6  on 3 df,   p=<0.0000000000000002\n```\n:::\n:::\n\n\n### Índices de aderência (AIC e BIC)\n\nPodemos comparar os modelos computando os valores de AIC e BIC\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombined_df <- data.frame(\n  Model = c(\"dialise\", \"dialise_linear\", \"dialise_log\", \"dialise_tempo_650\"),\n  AIC = c(AIC(dialise), AIC(dialise_linear), AIC(dialise_log), AIC(dialise_tempo_650)),\n  BIC = c(BIC(dialise), BIC(dialise_linear), BIC(dialise_log), BIC(dialise_tempo_650))\n)\n\nkable(combined_df)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Model </th>\n   <th style=\"text-align:right;\"> AIC </th>\n   <th style=\"text-align:right;\"> BIC </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> dialise </td>\n   <td style=\"text-align:right;\"> 5771.688 </td>\n   <td style=\"text-align:right;\"> 5780.149 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dialise_linear </td>\n   <td style=\"text-align:right;\"> 5587.564 </td>\n   <td style=\"text-align:right;\"> 5600.256 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dialise_log </td>\n   <td style=\"text-align:right;\"> 5463.651 </td>\n   <td style=\"text-align:right;\"> 5476.343 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> dialise_tempo_650 </td>\n   <td style=\"text-align:right;\"> 5773.672 </td>\n   <td style=\"text-align:right;\"> 5786.363 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nPor esse critério, temos que o melhor modelo é o log em seguida o linear.\n\n### Resíduos de Schoenfeld\n\nAgora vamos analisar mais uma vez os resíduos de Schoenfeld, mas agora variando pelo \"Tempo em Diálise\".\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncox_res_T_Cov <- coxph(Surv(time = db$time, event = db$morte) ~ treat + Tempo_dialise, data = db)  \nggcoxzph(cox.zph(cox_res_T_Cov), var =\"Tempo_dialise\") \n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n\nPodemos observar que o Beta do tempo em diálise tem um aumento linear conforme maior o tempo. O resultado pode indicar que o efeito do tempo sobre a o tempo em diálise pode ser linear.\n\n### Interpretando os resultados.\n\nA interpretação dos coeficientes da Cox Tempo-dependente é diferente das outras regressõs.\n\nVamos interpretar o valor do modelo com mudança linear.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(dialise_linear)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), \n    data = db, tt = function(x, t, ...) x * t)\n\n  n= 628, number of events= 508 \n\n                          coef    exp(coef)     se(coef)       z\ntreat1            -0.016001236  0.984126103  0.091676088  -0.175\nTempo_dialise     -0.023777102  0.976503346  0.001506128 -15.787\ntt(Tempo_dialise)  0.000070699  1.000070701  0.000005184  13.637\n                             Pr(>|z|)    \ntreat1                          0.861    \nTempo_dialise     <0.0000000000000002 ***\ntt(Tempo_dialise) <0.0000000000000002 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\ntreat1               0.9841     1.0161    0.8223    1.1778\nTempo_dialise        0.9765     1.0241    0.9736    0.9794\ntt(Tempo_dialise)    1.0001     0.9999    1.0001    1.0001\n\nConcordance= 0.761  (se = 0.009 )\nLikelihood ratio test= 337.6  on 3 df,   p=<0.0000000000000002\nWald test            = 249.3  on 3 df,   p=<0.0000000000000002\nScore (logrank) test = 229.1  on 3 df,   p=<0.0000000000000002\n```\n:::\n:::\n\n\nO coeficiente Tempo_dialise = -0.023, deve ser interpretado como o efeito do tempo de diálise no tempo zero. Já o coeficiente tt(Tempo_dialise) = deve ser interpretado como o a mudança do efeito do tempo em diálise a cada unidade de tempo a mais.\n\n### Observações SPSS e R\n\nNa aula prática o modelo não é feito com o Tempo em Diálise fora da variável tempo dependente. Já na aula teórica do curso II de 2023, o modelo é escrito como foi feito aqui no R, levando em conta o Tempo em Diálise como uma variável tempo dependente e também como covariável no modelo.\n\n## Covariando para idade e raça\n\nO conjunto de dados ainda possui duas variáveis que não foram incluídas no modelo: idade e raça. Conforme o procedimento padrão, vamos examinar a natureza dessas variáveis. Começando com a idade.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(db)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 628\nColumns: 7\n$ ID            <dbl> 112, 91, 113, 150, 22, 139, 104, 590, 189, 171, 338, 492…\n$ age           <dbl> 35, 33, 35, 31, 33, 43, 25, 35, 29, 27, 35, 23, 24, 23, …\n$ race          <fct> branco, branco, branco, branco, branco, branco, branco, …\n$ treat         <fct> 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1,…\n$ Tempo_dialise <dbl> 51, 67, 88, 156, 12, 139, 90, 25, 187, 34, 29, 78, 63, 8…\n$ time          <dbl> 1172, 762, 734, 720, 659, 658, 655, 654, 634, 630, 621, …\n$ morte         <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n```\n:::\n:::\n\n\nÓtimo, idade já está como uma variável numérica e contínua e raça está como um fator. Por fim, vamos verificar qual o nível de referência da variável \"race\".\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlevels(db$race)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"branco\"      \"negro/pardo\"\n```\n:::\n:::\n\n\nO nível \"branco\" está como referência, logo, os resultados do modelo mostrarão os valores dos coeficientes do nível \"negro/pardo\" em relação ao nível \"branco\".\n\nVamos ao modelo completo.\n\n### Modelo completo Cox tempo dependente\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncox_full_model <- coxph(surv_obj ~ age + race + treat + Tempo_dialise + tt(Tempo_dialise),\n                        data=db,\n                          tt=function(x,t,...) x*t) \nsummary(cox_full_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = surv_obj ~ age + race + treat + Tempo_dialise + \n    tt(Tempo_dialise), data = db, tt = function(x, t, ...) x * \n    t)\n\n  n= 617, number of events= 500 \n   (11 observations deleted due to missingness)\n\n                          coef    exp(coef)     se(coef)       z\nage               -0.005531327  0.994483942  0.007272881  -0.761\nracenegro/pardo   -0.342009991  0.710341107  0.108147939  -3.162\ntreat1             0.042207387  1.043110784  0.093368582   0.452\nTempo_dialise     -0.023671737  0.976606241  0.001511519 -15.661\ntt(Tempo_dialise)  0.000068807  1.000068809  0.000005196  13.242\n                              Pr(>|z|)    \nage                            0.44693    \nracenegro/pardo                0.00156 ** \ntreat1                         0.65123    \nTempo_dialise     < 0.0000000000000002 ***\ntt(Tempo_dialise) < 0.0000000000000002 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\nage                  0.9945     1.0055    0.9804    1.0088\nracenegro/pardo      0.7103     1.4078    0.5747    0.8781\ntreat1               1.0431     0.9587    0.8687    1.2526\nTempo_dialise        0.9766     1.0240    0.9737    0.9795\ntt(Tempo_dialise)    1.0001     0.9999    1.0001    1.0001\n\nConcordance= 0.765  (se = 0.009 )\nLikelihood ratio test= 343.2  on 5 df,   p=<0.0000000000000002\nWald test            = 259.4  on 5 df,   p=<0.0000000000000002\nScore (logrank) test = 243.3  on 5 df,   p=<0.0000000000000002\n```\n:::\n:::\n\n\nAgora temos que a raça tem um efeito significativo no modelo. Seguindo o vídeo da aula prática, podemos segmentar o banco de dados para as duas raças que temos no banco de dados.\n\n### Segmentando o banco de dados por raça\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndb_branco = db %>%\n  filter(race == \"branco\")\n\ndb_pardo_negro = db %>% \n  filter(race == \"negro/pardo\")\n```\n:::\n\n\n### KM por raça = Branco\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Criando um novo objeto Surv\nsurv_obj_branco <- Surv(time = db_branco$time, event = db_branco$morte)\n\nfit_br = survfit(surv_obj_branco ~ treat, data = db_branco)\nggsurvfit(fit_br)\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-36-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsurvfit(fit_br, linewidth = 1) +\n  labs(x = 'Dias', y = 'Overall survival') +\n  add_confidence_interval() +\n # add_risktable() +\n  scale_ggsurvfit() + \n  biostatsquid_theme #+  coord_cartesian(xlim = c(0, 8))\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-36-2.png){width=672}\n:::\n:::\n\n\n### Modelo completo para brancos\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Escrevendo o modelo\n\ncox_full_model_branco <- coxph(surv_obj_branco ~ age + treat + Tempo_dialise + tt(Tempo_dialise),\n                        data=db_branco,\n                          tt=function(x,t,...) x*t) \n\nsummary(cox_full_model_branco)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = surv_obj_branco ~ age + treat + Tempo_dialise + \n    tt(Tempo_dialise), data = db_branco, tt = function(x, t, \n    ...) x * t)\n\n  n= 464, number of events= 385 \n   (3 observations deleted due to missingness)\n\n                          coef    exp(coef)     se(coef)      z\nage               -0.000811624  0.999188705  0.008137628  -0.10\ntreat1             0.028995294  1.029419750  0.107276897   0.27\nTempo_dialise     -0.024166842  0.976122838  0.001707544 -14.15\ntt(Tempo_dialise)  0.000070240  1.000070242  0.000005841  12.03\n                             Pr(>|z|)    \nage                             0.921    \ntreat1                          0.787    \nTempo_dialise     <0.0000000000000002 ***\ntt(Tempo_dialise) <0.0000000000000002 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\nage                  0.9992     1.0008    0.9834    1.0153\ntreat1               1.0294     0.9714    0.8342    1.2703\nTempo_dialise        0.9761     1.0245    0.9729    0.9794\ntt(Tempo_dialise)    1.0001     0.9999    1.0001    1.0001\n\nConcordance= 0.78  (se = 0.01 )\nLikelihood ratio test= 286.5  on 4 df,   p=<0.0000000000000002\nWald test            = 201.8  on 4 df,   p=<0.0000000000000002\nScore (logrank) test = 185.6  on 4 df,   p=<0.0000000000000002\n```\n:::\n:::\n\n\n### KM por raça = negro/pardo\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Criando um novo objeto Surv\n\nsurv_obj_pardo_negro<- Surv(time = db_pardo_negro$time, event = db_pardo_negro$morte)\n\nfit_pn = survfit(surv_obj_pardo_negro ~ treat, data = db_pardo_negro)\n\nggsurvfit(fit_pn, linewidth = 1) +\n  labs(x = 'Dias', y = 'Overall survival') +\n  add_confidence_interval() +\n # add_risktable() +\n  scale_ggsurvfit() + \n  biostatsquid_theme #+  coord_cartesian(xlim = c(0, 8))\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-38-1.png){width=672}\n:::\n:::\n\n\n### Modelo completo para pardo/negro\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Escrevendo o modelo\n\ncox_full_model_pardo_negro <- coxph(surv_obj_pardo_negro ~ age + treat + Tempo_dialise + tt(Tempo_dialise),\n                        data=db_pardo_negro,\n                          tt=function(x,t,...) x*t) \n\nsummary(cox_full_model_pardo_negro)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = surv_obj_pardo_negro ~ age + treat + Tempo_dialise + \n    tt(Tempo_dialise), data = db_pardo_negro, tt = function(x, \n    t, ...) x * t)\n\n  n= 153, number of events= 115 \n   (2 observations deleted due to missingness)\n\n                         coef   exp(coef)    se(coef)      z      Pr(>|z|)    \nage               -0.02336224  0.97690855  0.01673857 -1.396         0.163    \ntreat1             0.07806397  1.08119182  0.19431411  0.402         0.688    \nTempo_dialise     -0.02367178  0.97660620  0.00397339 -5.958 0.00000000256 ***\ntt(Tempo_dialise)  0.00007639  1.00007639  0.00001784  4.282 0.00001853157 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\nage                  0.9769     1.0236    0.9454    1.0095\ntreat1               1.0812     0.9249    0.7388    1.5824\nTempo_dialise        0.9766     1.0240    0.9690    0.9842\ntt(Tempo_dialise)    1.0001     0.9999    1.0000    1.0001\n\nConcordance= 0.696  (se = 0.025 )\nLikelihood ratio test= 48.53  on 4 df,   p=0.0000000007\nWald test            = 39.77  on 4 df,   p=0.00000005\nScore (logrank) test = 42.56  on 4 df,   p=0.00000001\n```\n:::\n:::\n\n\n## Lista 6.1 resolvida no SPSS\n\n\n{{< video https://www.youtube.com/watch?v=6FvdrOpz0XU title='Análise Sobrevida II - Cox tempo dependente - Aula Prática #6.1' >}}\n\n\n\n## Extras\n\n### Mais gráficos\n\nE utilizar nosso tema para personalizar e padronizar.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit2_km <- ggsurvfit(fit1, linewidth = 1) +\n  labs(x = 'Dias', y = 'Porcentagem de sobrevida') +\n  add_confidence_interval() +\n # add_risktable() +\n  scale_ggsurvfit() + \n  biostatsquid_theme #+  coord_cartesian(xlim = c(0, 8))\n\nfit2_km\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-40-1.png){width=672}\n:::\n:::\n\n\n**Cuidado** com o p-value do gráfico a seguir, ele se refere apenas ao Log-rank\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsurvplot(fit1, data = db,\n           size = 1,\n           palette = c('#E7B800', '#2e9fdf'),\n           censor.shape = '|', censor.size = 4,\n           conf.int = TRUE,\n           pval = TRUE, # CUIDADO, apenas log-rank\n          # risk.table = TRUE,\n         #  risk.table.col = 'strata',\n           legend.labs = list('0' = 'Transplante = sim', '1' = 'Transplante = não'),\n           risk.table.height = 0.25,\n           ggtheme = theme_bw())\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-41-1.png){width=672}\n:::\n:::\n\n\n### Cox tempo dependente log\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncox_full_model_2 <- coxph(surv_obj ~ age + race + treat + Tempo_dialise + tt(Tempo_dialise),\n                        data=db,\n                          tt=function(x,t,...) x*log(t)) \nsummary(cox_full_model_2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = surv_obj ~ age + race + treat + Tempo_dialise + \n    tt(Tempo_dialise), data = db, tt = function(x, t, ...) x * \n    log(t))\n\n  n= 617, number of events= 500 \n   (11 observations deleted due to missingness)\n\n                       coef exp(coef)  se(coef)       z             Pr(>|z|)\nage               -0.005656  0.994360  0.007318  -0.773              0.43960\nracenegro/pardo   -0.296846  0.743159  0.108704  -2.731              0.00632\ntreat1            -0.007682  0.992348  0.094183  -0.082              0.93499\nTempo_dialise     -0.096272  0.908217  0.005996 -16.056 < 0.0000000000000002\ntt(Tempo_dialise)  0.016885  1.017028  0.001098  15.383 < 0.0000000000000002\n                     \nage                  \nracenegro/pardo   ** \ntreat1               \nTempo_dialise     ***\ntt(Tempo_dialise) ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\nage                  0.9944     1.0057    0.9802    1.0087\nracenegro/pardo      0.7432     1.3456    0.6006    0.9196\ntreat1               0.9923     1.0077    0.8251    1.1935\nTempo_dialise        0.9082     1.1011    0.8976    0.9190\ntt(Tempo_dialise)    1.0170     0.9833    1.0148    1.0192\n\nConcordance= 0.764  (se = 0.009 )\nLikelihood ratio test= 459.7  on 5 df,   p=<0.0000000000000002\nWald test            = 290.9  on 5 df,   p=<0.0000000000000002\nScore (logrank) test = 237.8  on 5 df,   p=<0.0000000000000002\n```\n:::\n\n```{.r .cell-code}\nAIC(cox_full_model_2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 5356.724\n```\n:::\n:::\n\n\n## Referencias\n\n<https://stats.oarc.ucla.edu/wp-content/uploads/2022/05/survival_r.html#(48)>\n\n<https://www.youtube.com/watch?v=Y_83HXuHMdc>\n\n<https://youtu.be/Y_83HXuHMdc?t=9151>\n\n## Códigos não utilizados\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Ajustando o banco de dados\n\ndb3 = db\n\n\n# db3$time = pmax(0.5, db3$time - 0) caso eu tenha zeros no tempo de morte\n# db3$time660 = as.integer(db3$time660)\n# head(db3)\n\n# db3$time660 = as.integer(db3$time660)\n\ndb3 <- tmerge(\n  data1 = db3,\n  data2 = db3,\n  id = ID,\n # death = event(T1, delta1), caso tenha dois eventos de morte independentes. Duas doenças diferentes, por exemplo\n  death = event(time, morte),\n  T_Cov = tdc(Tempo_dialise) # indicando a covariavel tempo-dependente\n)\n\nhead(db3)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   ID age   race treat Tempo_dialise time morte tstart tstop death T_Cov\n1 112  35 branco     1            51 1172     0      0    51     0     0\n2 112  35 branco     1            51 1172     0     51  1172     0     1\n3  91  33 branco     0            67  762     0      0    67     0     0\n4  91  33 branco     0            67  762     0     67   762     0     1\n5 113  35 branco     0            88  734     0      0    88     0     0\n6 113  35 branco     0            88  734     0     88   734     0     1\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Duvida para Altay - colocar o evento como morte2 ou death\ncox_model_T_Cov <- coxph(Surv(time = tstart, time2 = tstop, event = morte) ~ treat + T_Cov, data = db3)\n\nsummary(cox_model_T_Cov)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = Surv(time = tstart, time2 = tstop, event = morte) ~ \n    treat + T_Cov, data = db3)\n\n  n= 1174, number of events= 934 \n\n           coef exp(coef) se(coef)      z Pr(>|z|)   \ntreat1 -0.17205   0.84194  0.06668 -2.580  0.00987 **\nT_Cov   0.03829   1.03903  0.08493  0.451  0.65210   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n       exp(coef) exp(-coef) lower .95 upper .95\ntreat1    0.8419     1.1877    0.7388    0.9595\nT_Cov     1.0390     0.9624    0.8797    1.2272\n\nConcordance= 0.539  (se = 0.01 )\nLikelihood ratio test= 7.53  on 2 df,   p=0.02\nWald test            = 7.53  on 2 df,   p=0.02\nScore (logrank) test = 7.54  on 2 df,   p=0.02\n```\n:::\n\n```{.r .cell-code}\ndb3 %>% \n  coxph(Surv(time = tstart, time2 = tstop, event = death) ~ treat + age + race + T_Cov, data = .) %>% \n  gtsummary::tbl_regression(exp = TRUE)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"epqvqrbfvf\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#epqvqrbfvf table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#epqvqrbfvf thead, #epqvqrbfvf tbody, #epqvqrbfvf tfoot, #epqvqrbfvf tr, #epqvqrbfvf td, #epqvqrbfvf th {\n  border-style: none;\n}\n\n#epqvqrbfvf p {\n  margin: 0;\n  padding: 0;\n}\n\n#epqvqrbfvf .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#epqvqrbfvf .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#epqvqrbfvf .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#epqvqrbfvf .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#epqvqrbfvf .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#epqvqrbfvf .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#epqvqrbfvf .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#epqvqrbfvf .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#epqvqrbfvf .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#epqvqrbfvf .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#epqvqrbfvf .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#epqvqrbfvf .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#epqvqrbfvf .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#epqvqrbfvf .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#epqvqrbfvf .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#epqvqrbfvf .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#epqvqrbfvf .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#epqvqrbfvf .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#epqvqrbfvf .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#epqvqrbfvf .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#epqvqrbfvf .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#epqvqrbfvf .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#epqvqrbfvf .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#epqvqrbfvf .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#epqvqrbfvf .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#epqvqrbfvf .gt_left {\n  text-align: left;\n}\n\n#epqvqrbfvf .gt_center {\n  text-align: center;\n}\n\n#epqvqrbfvf .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#epqvqrbfvf .gt_font_normal {\n  font-weight: normal;\n}\n\n#epqvqrbfvf .gt_font_bold {\n  font-weight: bold;\n}\n\n#epqvqrbfvf .gt_font_italic {\n  font-style: italic;\n}\n\n#epqvqrbfvf .gt_super {\n  font-size: 65%;\n}\n\n#epqvqrbfvf .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#epqvqrbfvf .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#epqvqrbfvf .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#epqvqrbfvf .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#epqvqrbfvf .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#epqvqrbfvf .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#epqvqrbfvf .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Characteristic&lt;/strong&gt;\"><strong>Characteristic</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;HR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>HR</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>95% CI</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;p-value&lt;/strong&gt;\"><strong>p-value</strong></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">treat</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"ci\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    0</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">—</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">—</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    1</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.05</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.88, 1.25</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.6</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">age</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.98, 1.01</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.5</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">race</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"ci\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    branco</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">—</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">—</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    negro/pardo</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.68</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.55, 0.84</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">T_Cov</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">13.6</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">10.1, 18.4</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><0.001</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span> HR = Hazard Ratio, CI = Confidence Interval</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Tempo em diálise como covariante tempo-dependente\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Ajustando o banco de dados\n\ndb2 = db\n\n\n#db2$time = pmax(0.5, db2$time - 0)\n\n\ndb2 <- tmerge(\n  data1 = db,\n  data2 = db,\n  id = ID,\n # death = event(T1, delta1), caso tenha dois eventos de morte independentes. Duas doenças diferentes, por exemplo\n  death = event(time, morte),\n  T_Tempo_dialise = tdc(Tempo_dialise) # indicando a covariavel tempo-dependente\n)\nhead(db2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   ID age   race treat Tempo_dialise time morte tstart tstop death\n1 112  35 branco     1            51 1172     0      0    51     0\n2 112  35 branco     1            51 1172     0     51  1172     0\n3  91  33 branco     0            67  762     0      0    67     0\n4  91  33 branco     0            67  762     0     67   762     0\n5 113  35 branco     0            88  734     0      0    88     0\n6 113  35 branco     0            88  734     0     88   734     0\n  T_Tempo_dialise\n1               0\n2               1\n3               0\n4               1\n5               0\n6               1\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncox_model_time_dependent <- coxph(Surv(time = tstart, time2 = tstop, event = death) ~ T_Tempo_dialise + treat, data = db2)\n\nsummary(cox_model_time_dependent)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCall:\ncoxph(formula = Surv(time = tstart, time2 = tstop, event = death) ~ \n    T_Tempo_dialise + treat, data = db2)\n\n  n= 1174, number of events= 508 \n\n                     coef exp(coef)  se(coef)      z            Pr(>|z|)    \nT_Tempo_dialise  2.585761 13.273384  0.150925 17.133 <0.0000000000000002 ***\ntreat1          -0.003201  0.996804  0.089471 -0.036               0.971    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                exp(coef) exp(-coef) lower .95 upper .95\nT_Tempo_dialise   13.2734    0.07534    9.8745    17.842\ntreat1             0.9968    1.00321    0.8365     1.188\n\nConcordance= 0.699  (se = 0.014 )\nLikelihood ratio test= 382.7  on 2 df,   p=<0.0000000000000002\nWald test            = 294.6  on 2 df,   p=<0.0000000000000002\nScore (logrank) test = 354.7  on 2 df,   p=<0.0000000000000002\n```\n:::\n\n```{.r .cell-code}\ndb2 %>% \n  coxph(Surv(time = tstart, time2 = tstop, event = death) ~ T_Tempo_dialise * treat, data = .) %>% \n  gtsummary::tbl_regression(exp = TRUE)\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"oxfwpjgiiy\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#oxfwpjgiiy table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#oxfwpjgiiy thead, #oxfwpjgiiy tbody, #oxfwpjgiiy tfoot, #oxfwpjgiiy tr, #oxfwpjgiiy td, #oxfwpjgiiy th {\n  border-style: none;\n}\n\n#oxfwpjgiiy p {\n  margin: 0;\n  padding: 0;\n}\n\n#oxfwpjgiiy .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#oxfwpjgiiy .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#oxfwpjgiiy .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#oxfwpjgiiy .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#oxfwpjgiiy .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#oxfwpjgiiy .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#oxfwpjgiiy .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#oxfwpjgiiy .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#oxfwpjgiiy .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#oxfwpjgiiy .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#oxfwpjgiiy .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#oxfwpjgiiy .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#oxfwpjgiiy .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#oxfwpjgiiy .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#oxfwpjgiiy .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxfwpjgiiy .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#oxfwpjgiiy .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#oxfwpjgiiy .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#oxfwpjgiiy .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxfwpjgiiy .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#oxfwpjgiiy .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxfwpjgiiy .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#oxfwpjgiiy .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxfwpjgiiy .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#oxfwpjgiiy .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#oxfwpjgiiy .gt_left {\n  text-align: left;\n}\n\n#oxfwpjgiiy .gt_center {\n  text-align: center;\n}\n\n#oxfwpjgiiy .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#oxfwpjgiiy .gt_font_normal {\n  font-weight: normal;\n}\n\n#oxfwpjgiiy .gt_font_bold {\n  font-weight: bold;\n}\n\n#oxfwpjgiiy .gt_font_italic {\n  font-style: italic;\n}\n\n#oxfwpjgiiy .gt_super {\n  font-size: 65%;\n}\n\n#oxfwpjgiiy .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#oxfwpjgiiy .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#oxfwpjgiiy .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#oxfwpjgiiy .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#oxfwpjgiiy .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#oxfwpjgiiy .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#oxfwpjgiiy .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;Characteristic&lt;/strong&gt;\"><strong>Characteristic</strong></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;HR&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>HR</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;95% CI&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;\"><strong>95% CI</strong><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"&lt;strong&gt;p-value&lt;/strong&gt;\"><strong>p-value</strong></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">T_Tempo_dialise</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">9.78</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">6.78, 14.1</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">treat</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"ci\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    0</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">—</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">—</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    1</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.59</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">0.38, 0.92</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.020</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">T_Tempo_dialise * treat</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"ci\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">    T_Tempo_dialise * 1</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.86</td>\n<td headers=\"ci\" class=\"gt_row gt_center\">1.15, 3.02</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.012</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"4\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;\"><sup>1</sup></span> HR = Hazard Ratio, CI = Confidence Interval</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Versões dos pacotes\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreport(sessionInfo())\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nAnalyses were conducted using the R Statistical language (version 4.3.1; R Core\nTeam, 2023) on Windows 11 x64 (build 22621), using the packages effectsize\n(version 0.8.6; Ben-Shachar MS et al., 2020), lpSolve (version 5.6.19;\nBerkelaar M, others, 2023), survMisc (version 0.5.6; Dardis C, 2022), tm\n(version 0.7.11; Feinerer I, Hornik K, 2023), flexplot (version 0.20.5; Fife D,\n2024), lubridate (version 1.9.3; Grolemund G, Wickham H, 2011), coxphf (version\n1.13.4; Heinze G et al., 2023), NLP (version 0.2.1; Hornik K, 2020), coin\n(version 1.4.3; Hothorn T et al., 2006), ggpubr (version 0.6.0; Kassambara A,\n2023), survminer (version 0.4.9; Kassambara A et al., 2021),\nPHInfiniteEstimates (version 2.9.5; Kolassa JE, Zhang J, 2023), parameters\n(version 0.21.3; Lüdecke D et al., 2020), performance (version 0.10.8; Lüdecke\nD et al., 2021), easystats (version 0.6.0; Lüdecke D et al., 2022), see\n(version 0.8.1; Lüdecke D et al., 2021), insight (version 0.19.6; Lüdecke D et\nal., 2019), bayestestR (version 0.13.1; Makowski D et al., 2019), modelbased\n(version 0.8.6; Makowski D et al., 2020), report (version 0.5.7; Makowski D et\nal., 2023), correlation (version 0.8.4; Makowski D et al., 2022), condSURV\n(version 2.0.4; Meira-Machado L, Sestelo M, 2023), tibble (version 3.2.1;\nMüller K, Wickham H, 2023), datawizard (version 0.9.0; Patil I et al., 2022),\nforeign (version 0.8.85; R Core Team, 2023), nph (version 2.1; Ristl R et al.,\n2021), broom (version 1.0.5; Robinson D et al., 2023), ggsurvfit (version\n1.0.0; Sjoberg D et al., 2023), gtsummary (version 1.7.2; Sjoberg D et al.,\n2021), rempsyc (version 0.1.6; Thériault R, 2023), survival (version 3.5.7;\nTherneau T, 2023), ggplot2 (version 3.4.4; Wickham H, 2016), forcats (version\n1.0.0; Wickham H, 2023), stringr (version 1.5.1; Wickham H, 2023), tidyverse\n(version 2.0.0; Wickham H et al., 2019), dplyr (version 1.1.3; Wickham H et\nal., 2023), purrr (version 1.0.2; Wickham H, Henry L, 2023), readr (version\n2.1.4; Wickham H et al., 2023), tidyr (version 1.3.0; Wickham H et al., 2023)\nand kableExtra (version 1.3.4; Zhu H, 2021).\n\nReferences\n----------\n  - Ben-Shachar MS, Lüdecke D, Makowski D (2020). \"effectsize: Estimation of\nEffect Size Indices and Standardized Parameters.\" _Journal of Open Source\nSoftware_, *5*(56), 2815. doi:10.21105/joss.02815\n<https://doi.org/10.21105/joss.02815>, <https://doi.org/10.21105/joss.02815>.\n  - Berkelaar M, others (2023). _lpSolve: Interface to 'Lp_solve' v. 5.5 to Solve\nLinear/Integer Programs_. R package version 5.6.19,\n<https://CRAN.R-project.org/package=lpSolve>.\n  - Dardis C (2022). _survMisc: Miscellaneous Functions for Survival Data_. R\npackage version 0.5.6, <https://CRAN.R-project.org/package=survMisc>.\n  - Feinerer I, Hornik K (2023). _tm: Text Mining Package_. R package version\n0.7-11, <https://CRAN.R-project.org/package=tm>. Feinerer I, Hornik K, Meyer D\n(2008). \"Text Mining Infrastructure in R.\" _Journal of Statistical Software_,\n*25*(5), 1-54. doi:10.18637/jss.v025.i05\n<https://doi.org/10.18637/jss.v025.i05>.\n  - Fife D (2024). _flexplot: Graphically Based Data Analysis Using 'flexplot'_.\nR package version 0.20.5.\n  - Grolemund G, Wickham H (2011). \"Dates and Times Made Easy with lubridate.\"\n_Journal of Statistical Software_, *40*(3), 1-25.\n<https://www.jstatsoft.org/v40/i03/>.\n  - Heinze G, Ploner M, Jiricka L, Steiner G (2023). _coxphf: Cox Regression with\nFirth's Penalized Likelihood_. R package version 1.13.4,\n<https://CRAN.R-project.org/package=coxphf>.\n  - Hornik K (2020). _NLP: Natural Language Processing Infrastructure_. R package\nversion 0.2-1, <https://CRAN.R-project.org/package=NLP>.\n  - Hothorn T, Hornik K, van de Wiel MA, Zeileis A (2006). \"A Lego system for\nconditional inference.\" _The American Statistician_, *60*(3), 257-263.\ndoi:10.1198/000313006X118430 <https://doi.org/10.1198/000313006X118430>.\nHothorn T, Hornik K, van de Wiel MA, Zeileis A (2008). \"Implementing a class of\npermutation tests: The coin package.\" _Journal of Statistical Software_,\n*28*(8), 1-23. doi:10.18637/jss.v028.i08\n<https://doi.org/10.18637/jss.v028.i08>.\n  - Kassambara A (2023). _ggpubr: 'ggplot2' Based Publication Ready Plots_. R\npackage version 0.6.0, <https://CRAN.R-project.org/package=ggpubr>.\n  - Kassambara A, Kosinski M, Biecek P (2021). _survminer: Drawing Survival\nCurves using 'ggplot2'_. R package version 0.4.9,\n<https://CRAN.R-project.org/package=survminer>.\n  - Kolassa JE, Zhang J (2023). _PHInfiniteEstimates: Tools for Inference in the\nPresence of a Monotone Likelihood_. R package version 2.9.5,\n<https://CRAN.R-project.org/package=PHInfiniteEstimates>.\n  - Lüdecke D, Ben-Shachar M, Patil I, Makowski D (2020). \"Extracting, Computing\nand Exploring the Parameters of Statistical Models using R.\" _Journal of Open\nSource Software_, *5*(53), 2445. doi:10.21105/joss.02445\n<https://doi.org/10.21105/joss.02445>.\n  - Lüdecke D, Ben-Shachar M, Patil I, Waggoner P, Makowski D (2021).\n\"performance: An R Package for Assessment, Comparison and Testing of\nStatistical Models.\" _Journal of Open Source Software_, *6*(60), 3139.\ndoi:10.21105/joss.03139 <https://doi.org/10.21105/joss.03139>.\n  - Lüdecke D, Ben-Shachar M, Patil I, Wiernik B, Makowski D (2022). \"easystats:\nFramework for Easy Statistical Modeling, Visualization, and Reporting.\" _CRAN_.\nR package, <https://easystats.github.io/easystats/>.\n  - Lüdecke D, Patil I, Ben-Shachar M, Wiernik B, Waggoner P, Makowski D (2021).\n\"see: An R Package for Visualizing Statistical Models.\" _Journal of Open Source\nSoftware_, *6*(64), 3393. doi:10.21105/joss.03393\n<https://doi.org/10.21105/joss.03393>.\n  - Lüdecke D, Waggoner P, Makowski D (2019). \"insight: A Unified Interface to\nAccess Information from Model Objects in R.\" _Journal of Open Source Software_,\n*4*(38), 1412. doi:10.21105/joss.01412 <https://doi.org/10.21105/joss.01412>.\n  - Makowski D, Ben-Shachar M, Lüdecke D (2019). \"bayestestR: Describing Effects\nand their Uncertainty, Existence and Significance within the Bayesian\nFramework.\" _Journal of Open Source Software_, *4*(40), 1541.\ndoi:10.21105/joss.01541 <https://doi.org/10.21105/joss.01541>,\n<https://joss.theoj.org/papers/10.21105/joss.01541>.\n  - Makowski D, Ben-Shachar M, Patil I, Lüdecke D (2020). \"Estimation of\nModel-Based Predictions, Contrasts and Means.\" _CRAN_.\n<https://github.com/easystats/modelbased>.\n  - Makowski D, Lüdecke D, Patil I, Thériault R, Ben-Shachar M, Wiernik B (2023).\n\"Automated Results Reporting as a Practical Tool to Improve Reproducibility and\nMethodological Best Practices Adoption.\" _CRAN_.\n<https://easystats.github.io/report/>.\n  - Makowski D, Wiernik B, Patil I, Lüdecke D, Ben-Shachar M (2022).\n\"correlation: Methods for Correlation Analysis.\" Version 0.8.3,\n<https://CRAN.R-project.org/package=correlation>. Makowski D, Ben-Shachar M,\nPatil I, Lüdecke D (2020). \"Methods and Algorithms for Correlation Analysis in\nR.\" _Journal of Open Source Software_, *5*(51), 2306. doi:10.21105/joss.02306\n<https://doi.org/10.21105/joss.02306>,\n<https://joss.theoj.org/papers/10.21105/joss.02306>.\n  - Meira-Machado L, Sestelo M (2023). _condSURV: Estimation of the Conditional\nSurvival Function for Ordered Multivariate Failure Time Data_. R package\nversion 2.0.4, <https://CRAN.R-project.org/package=condSURV>.\n  - Müller K, Wickham H (2023). _tibble: Simple Data Frames_. R package version\n3.2.1, <https://CRAN.R-project.org/package=tibble>.\n  - Patil I, Makowski D, Ben-Shachar M, Wiernik B, Bacher E, Lüdecke D (2022).\n\"datawizard: An R Package for Easy Data Preparation and Statistical\nTransformations.\" _Journal of Open Source Software_, *7*(78), 4684.\ndoi:10.21105/joss.04684 <https://doi.org/10.21105/joss.04684>.\n  - R Core Team (2023). _foreign: Read Data Stored by 'Minitab', 'S', 'SAS',\n'SPSS', 'Stata', 'Systat', 'Weka', 'dBase', ..._. R package version 0.8-85,\n<https://CRAN.R-project.org/package=foreign>.\n  - R Core Team (2023). _R: A Language and Environment for Statistical\nComputing_. R Foundation for Statistical Computing, Vienna, Austria.\n<https://www.R-project.org/>.\n  - Ristl R, Ballarini N, Götte H, Schüler A, Posch M, König F (2021). \"Delayed\ntreatment effects, treatment switching and heterogeneous patient populations:\nHow to design and analyze RCTs in oncology.\" _Pharmaceutical statistics_,\n*20*(1), 129-145.\n  - Robinson D, Hayes A, Couch S (2023). _broom: Convert Statistical Objects into\nTidy Tibbles_. R package version 1.0.5,\n<https://CRAN.R-project.org/package=broom>.\n  - Sjoberg D, Baillie M, Fruechtenicht C, Haesendonckx S, Treis T (2023).\n_ggsurvfit: Flexible Time-to-Event Figures_. R package version 1.0.0,\n<https://CRAN.R-project.org/package=ggsurvfit>.\n  - Sjoberg D, Whiting K, Curry M, Lavery J, Larmarange J (2021). \"Reproducible\nSummary Tables with the gtsummary Package.\" _The R Journal_, *13*, 570-580.\ndoi:10.32614/RJ-2021-053 <https://doi.org/10.32614/RJ-2021-053>,\n<https://doi.org/10.32614/RJ-2021-053>.\n  - Thériault R (2023). \"rempsyc: Convenience functions for psychology.\" _Journal\nof Open Source Software_, *8*(87), 5466. doi:10.21105/joss.05466\n<https://doi.org/10.21105/joss.05466>, <https://doi.org/10.21105/joss.05466>.\n  - Therneau T (2023). _A Package for Survival Analysis in R_. R package version\n3.5-7, <https://CRAN.R-project.org/package=survival>. Terry M. Therneau,\nPatricia M. Grambsch (2000). _Modeling Survival Data: Extending the Cox Model_.\nSpringer, New York. ISBN 0-387-98784-3.\n  - Wickham H (2016). _ggplot2: Elegant Graphics for Data Analysis_.\nSpringer-Verlag New York. ISBN 978-3-319-24277-4,\n<https://ggplot2.tidyverse.org>.\n  - Wickham H (2023). _forcats: Tools for Working with Categorical Variables\n(Factors)_. R package version 1.0.0,\n<https://CRAN.R-project.org/package=forcats>.\n  - Wickham H (2023). _stringr: Simple, Consistent Wrappers for Common String\nOperations_. R package version 1.5.1,\n<https://CRAN.R-project.org/package=stringr>.\n  - Wickham H, Averick M, Bryan J, Chang W, McGowan LD, François R, Grolemund G,\nHayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E, Bache SM, Müller K,\nOoms J, Robinson D, Seidel DP, Spinu V, Takahashi K, Vaughan D, Wilke C, Woo K,\nYutani H (2019). \"Welcome to the tidyverse.\" _Journal of Open Source Software_,\n*4*(43), 1686. doi:10.21105/joss.01686 <https://doi.org/10.21105/joss.01686>.\n  - Wickham H, François R, Henry L, Müller K, Vaughan D (2023). _dplyr: A Grammar\nof Data Manipulation_. R package version 1.1.3,\n<https://CRAN.R-project.org/package=dplyr>.\n  - Wickham H, Henry L (2023). _purrr: Functional Programming Tools_. R package\nversion 1.0.2, <https://CRAN.R-project.org/package=purrr>.\n  - Wickham H, Hester J, Bryan J (2023). _readr: Read Rectangular Text Data_. R\npackage version 2.1.4, <https://CRAN.R-project.org/package=readr>.\n  - Wickham H, Vaughan D, Girlich M (2023). _tidyr: Tidy Messy Data_. R package\nversion 1.3.0, <https://CRAN.R-project.org/package=tidyr>.\n  - Zhu H (2021). _kableExtra: Construct Complex Table with 'kable' and Pipe\nSyntax_. R package version 1.3.4,\n<https://CRAN.R-project.org/package=kableExtra>.\n```\n:::\n:::\n",
    "supporting": [
      "lista_6_1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}