{
  "hash": "b7453f8d27ea8466b9ee1efb8bca6736",
  "result": {
    "engine": "knitr",
    "markdown": "# Lista 6.1: Cox com Covari√°veis Tempo-Dependentes {.unnumbered}\n\n::: {.callout-note appearance=\"simple\" icon=false}\n## Objetivo da Lista\n\nAprenda a lidar com **viola√ß√µes de proporcionalidade** em modelos Cox usando **covari√°veis tempo-dependentes**. Trabalharemos com dados de 628 pacientes de nefrologia acompanhados por ~1000 dias.\n:::\n\n---\n\n## üìñ Contexto do Estudo\n\n::: {.callout-tip}\n## Estudo de Transplante Renal\n\n**Amostra:** 628 pacientes de servi√ßo de nefrologia\n\n**Seguimento:** ~1000 dias\n\n**Vari√°veis:**\n- `time`: Tempo de seguimento\n- `morte`: √ìbito (evento de interesse)\n- `treat`: Realizou transplante? (0 = n√£o, 1 = sim)\n- `Tempo_dialise`: Tempo em di√°lise (meses)\n- `age`: Idade\n- `race`: Ra√ßa (branco vs negro/pardo)\n\n**Pergunta:** Transplante aumenta sobrevida? Mas... **e se o efeito muda ao longo do tempo?**\n:::\n\n---\n\n## üì¶ Pacotes\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacotes <- c(\n  \"tidyverse\", \"foreign\", \"ggplot2\", \"kableExtra\",\n  \"survival\", \"ggsurvfit\", \"survminer\", \"broom\",\n  \"gtsummary\", \"coin\", \"report\"\n)\n\npacotes_faltantes <- pacotes[!pacotes %in% installed.packages()[, \"Package\"]]\nif (length(pacotes_faltantes) > 0) {\n  install.packages(pacotes_faltantes, dependencies = TRUE)\n}\n\ninvisible(lapply(pacotes, library, character.only = TRUE))\ncat(\"‚úì Pacotes carregados!\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n‚úì Pacotes carregados!\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n## üì• Prepara√ß√£o dos Dados\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Carregar e preparar\noriginal <- read.spss(\"Cox tempo dependente 2_1.sav\", \n                      to.data.frame = TRUE)\n\n# Converter tipos\ndb <- original %>%\n  mutate(\n    morte = as.integer(morte == \"Sim\"),\n    treat = as.factor(treat)\n  )\n\nglimpse(db)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 628\nColumns: 7\n$ ID            <dbl> 112, 91, 113, 150, 22, 139, 104, 590, 189, 171, 338, 492‚Ä¶\n$ age           <dbl> 35, 33, 35, 31, 33, 43, 25, 35, 29, 27, 35, 23, 24, 23, ‚Ä¶\n$ race          <fct> branco, branco, branco, branco, branco, branco, branco, ‚Ä¶\n$ treat         <fct> 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1,‚Ä¶\n$ Tempo_dialise <dbl> 51, 67, 88, 156, 12, 139, 90, 25, 187, 34, 29, 78, 63, 8‚Ä¶\n$ time          <dbl> 1172, 762, 734, 720, 659, 658, 655, 654, 634, 630, 621, ‚Ä¶\n$ morte         <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n### Verificar Dados Faltantes\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndb %>%\n  summarise(across(everything(), ~sum(is.na(.)))) %>%\n  pivot_longer(everything(), names_to = \"Vari√°vel\", values_to = \"NAs\") %>%\n  kable(caption = \"Dados Faltantes por Vari√°vel\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Dados Faltantes por Vari√°vel\n\n|Vari√°vel      | NAs|\n|:-------------|---:|\n|ID            |   0|\n|age           |   5|\n|race          |   6|\n|treat         |   0|\n|Tempo_dialise |   0|\n|time          |   0|\n|morte         |   0|\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n## üîÑ Revis√£o: An√°lise Cox Padr√£o\n\n### Objeto de Sobrevida\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsurv_obj <- Surv(time = db$time, event = db$morte)\n```\n:::\n\n\n\n\n\n\n\n\n---\n\n### Curva de Kaplan-Meier\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit_km <- survfit(surv_obj ~ treat, data = db)\n\nggsurvfit(fit_km, linewidth = 1.2) +\n  labs(\n    title = \"Sobrevida: Transplante vs N√£o-Transplante\",\n    x = \"Tempo (dias)\",\n    y = \"Probabilidade de Sobrevida\"\n  ) +\n  add_confidence_interval(alpha = 0.2) +\n  add_risktable() +\n  scale_ggsurvfit() +\n  scale_x_continuous(breaks = seq(0, 1000, by = 100)) +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nScale for x is already present.\nAdding another scale for x, which will replace the existing scale.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-5-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n### Testes de Compara√ß√£o\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Log-rank\nlogrank_test(surv_obj ~ treat, data = db, type = \"logrank\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tAsymptotic Two-Sample Logrank Test\n\ndata:  surv_obj by treat (0, 1)\nZ = -2.5984, p-value = 0.009365\nalternative hypothesis: true theta is not equal to 1\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n### Modelo Cox Padr√£o\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncox_padrao <- coxph(surv_obj ~ treat, data = db)\n\ntbl_regression(cox_padrao, \n               exponentiate = TRUE,\n               label = list(treat ~ \"Transplante\"))\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"iaekdkdvmm\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#iaekdkdvmm table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#iaekdkdvmm thead, #iaekdkdvmm tbody, #iaekdkdvmm tfoot, #iaekdkdvmm tr, #iaekdkdvmm td, #iaekdkdvmm th {\n  border-style: none;\n}\n\n#iaekdkdvmm p {\n  margin: 0;\n  padding: 0;\n}\n\n#iaekdkdvmm .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#iaekdkdvmm .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#iaekdkdvmm .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#iaekdkdvmm .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#iaekdkdvmm .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#iaekdkdvmm .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#iaekdkdvmm .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#iaekdkdvmm .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#iaekdkdvmm .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#iaekdkdvmm .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#iaekdkdvmm .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#iaekdkdvmm .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#iaekdkdvmm .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#iaekdkdvmm .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#iaekdkdvmm .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#iaekdkdvmm .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#iaekdkdvmm .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#iaekdkdvmm .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#iaekdkdvmm .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#iaekdkdvmm .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#iaekdkdvmm .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#iaekdkdvmm .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#iaekdkdvmm .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#iaekdkdvmm .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#iaekdkdvmm .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#iaekdkdvmm .gt_left {\n  text-align: left;\n}\n\n#iaekdkdvmm .gt_center {\n  text-align: center;\n}\n\n#iaekdkdvmm .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#iaekdkdvmm .gt_font_normal {\n  font-weight: normal;\n}\n\n#iaekdkdvmm .gt_font_bold {\n  font-weight: bold;\n}\n\n#iaekdkdvmm .gt_font_italic {\n  font-style: italic;\n}\n\n#iaekdkdvmm .gt_super {\n  font-size: 65%;\n}\n\n#iaekdkdvmm .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#iaekdkdvmm .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#iaekdkdvmm .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#iaekdkdvmm .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#iaekdkdvmm .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#iaekdkdvmm .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#iaekdkdvmm .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#iaekdkdvmm .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#iaekdkdvmm div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"PHN0cm9uZz5DaGFyYWN0ZXJpc3RpYzwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"estimate\"><span data-qmd-base64=\"PHN0cm9uZz5IUjwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>HR</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"conf.low\"><span data-qmd-base64=\"PHN0cm9uZz45NSUgQ0k8L3N0cm9uZz4=\"><span class='gt_from_md'><strong>95% CI</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\"><span data-qmd-base64=\"PHN0cm9uZz5wLXZhbHVlPC9zdHJvbmc+\"><span class='gt_from_md'><strong>p-value</strong></span></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Transplante</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†0</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">‚Äî</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">‚Äî</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†1</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.79</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.67, 0.94</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.009</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"4\"><span data-qmd-base64=\"QWJicmV2aWF0aW9uczogQ0kgPSBDb25maWRlbmNlIEludGVydmFsLCBIUiA9IEhhemFyZCBSYXRpbw==\"><span class='gt_from_md'>Abbreviations: CI = Confidence Interval, HR = Hazard Ratio</span></span></td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n## ‚ö†Ô∏è Problema: Viola√ß√£o de Proporcionalidade\n\n### Teste de Schoenfeld\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntest_prop <- cox.zph(cox_padrao)\nprint(test_prop)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n       chisq df     p\ntreat   3.11  1 0.078\nGLOBAL  3.11  1 0.078\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n::: {.callout-warning}\n## üö® Viola√ß√£o Detectada!\n\n**p < 0.05** ‚Üí Riscos **N√ÉO** s√£o proporcionais!\n\nO efeito do transplante **muda ao longo do tempo**. Modelo Cox padr√£o n√£o √© apropriado!\n:::\n\n---\n\n### Visualiza√ß√£o dos Res√≠duos\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggcoxzph(test_prop, point.size = 0.5)\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n\n\n::: {.callout-note collapse=\"true\"}\n## üîç Interpretando o Gr√°fico\n\n**O que procurar:**\n- **Linha horizontal:** Proporcionalidade OK\n- **Tend√™ncia clara:** Viola√ß√£o! Efeito muda com tempo\n\n**Neste caso:** Linha de suaviza√ß√£o tem **inclina√ß√£o** ‚Üí Œ≤(t) n√£o √© constante\n:::\n\n---\n\n## üîß Solu√ß√£o: Covari√°veis Tempo-Dependentes\n\n::: {.callout-tip}\n## O que s√£o Covari√°veis Tempo-Dependentes?\n\nPermitem que o **efeito de uma vari√°vel mude ao longo do tempo**.\n\n**Modelo padr√£o:** Œ≤ √© constante  \n**Modelo tempo-dependente:** Œ≤(t) varia com tempo\n\n**Tr√™s abordagens comuns:**\n\n1. **Linear:** `x √ó t` ‚Üí Efeito muda linearmente\n2. **Logar√≠tmica:** `x √ó log(t)` ‚Üí Mudan√ßa desacelera\n3. **Threshold:** `x √ó (t > corte)` ‚Üí Dois per√≠odos distintos\n:::\n\n---\n\n### Identificando a Covari√°vel\n\n::: {.callout-important}\n## Fundamenta√ß√£o Te√≥rica!\n\nPela **literatura m√©dica**: **Tempo em di√°lise** afeta diferentemente pacientes em diferentes est√°gios.\n\n**Hip√≥tese:** Efeito do tempo em di√°lise **n√£o √© constante** ao longo do acompanhamento.\n:::\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Verificar vari√°vel\nglimpse(db$Tempo_dialise)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n num [1:628] 51 67 88 156 12 139 90 25 187 34 ...\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n## üìä Modelagem Tempo-Dependente\n\n### Modelo 1: Sem Tempo-Depend√™ncia (Baseline)\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelo_base <- coxph(\n  surv_obj ~ treat + Tempo_dialise,\n  data = db\n)\n\nsummary(modelo_base)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\ncoxph(formula = surv_obj ~ treat + Tempo_dialise, data = db)\n\n  n= 628, number of events= 508 \n\n                    coef  exp(coef)   se(coef)       z Pr(>|z|)    \ntreat1         0.0618983  1.0638541  0.0899990   0.688    0.492    \nTempo_dialise -0.0084493  0.9915863  0.0007709 -10.960   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n              exp(coef) exp(-coef) lower .95 upper .95\ntreat1           1.0639      0.940    0.8918    1.2691\nTempo_dialise    0.9916      1.008    0.9901    0.9931\n\nConcordance= 0.75  (se = 0.012 )\nLikelihood ratio test= 151.4  on 2 df,   p=<2e-16\nWald test            = 121.2  on 2 df,   p=<2e-16\nScore (logrank) test = 120.6  on 2 df,   p=<2e-16\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n### Modelo 2: Mudan√ßa Linear\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelo_linear <- coxph(\n  surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise),\n  data = db,\n  tt = function(x, t, ...) x * t\n)\n\nsummary(modelo_linear)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\ncoxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), \n    data = db, tt = function(x, t, ...) x * t)\n\n  n= 628, number of events= 508 \n\n                        coef  exp(coef)   se(coef)       z Pr(>|z|)    \ntreat1            -1.600e-02  9.841e-01  9.168e-02  -0.175    0.861    \nTempo_dialise     -2.378e-02  9.765e-01  1.506e-03 -15.787   <2e-16 ***\ntt(Tempo_dialise)  7.070e-05  1.000e+00  5.184e-06  13.637   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\ntreat1               0.9841     1.0161    0.8223    1.1778\nTempo_dialise        0.9765     1.0241    0.9736    0.9794\ntt(Tempo_dialise)    1.0001     0.9999    1.0001    1.0001\n\nConcordance= 0.761  (se = 0.009 )\nLikelihood ratio test= 337.6  on 3 df,   p=<2e-16\nWald test            = 249.3  on 3 df,   p=<2e-16\nScore (logrank) test = 229.1  on 3 df,   p=<2e-16\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n::: {.callout-note}\n## üìä Interpreta√ß√£o\n\n**`Tempo_dialise`:** Efeito no tempo **t = 0**  \n**`tt(Tempo_dialise)`:** **Mudan√ßa** do efeito por unidade de tempo\n\n**Efeito total em tempo t:**  \nŒ≤(t) = Œ≤‚ÇÄ + Œ≤‚ÇÅ √ó t\n:::\n\n---\n\n### Modelo 3: Mudan√ßa Logar√≠tmica\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelo_log <- coxph(\n  surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise),\n  data = db,\n  tt = function(x, t, ...) x * log(t)\n)\n\nsummary(modelo_log)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\ncoxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), \n    data = db, tt = function(x, t, ...) x * log(t))\n\n  n= 628, number of events= 508 \n\n                       coef exp(coef)  se(coef)      z Pr(>|z|)    \ntreat1            -0.071106  0.931363  0.092369  -0.77    0.441    \nTempo_dialise     -0.097417  0.907178  0.005942 -16.40   <2e-16 ***\ntt(Tempo_dialise)  0.017178  1.017326  0.001087  15.80   <2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\ntreat1               0.9314      1.074    0.7771    1.1162\nTempo_dialise        0.9072      1.102    0.8967    0.9178\ntt(Tempo_dialise)    1.0173      0.983    1.0152    1.0195\n\nConcordance= 0.759  (se = 0.01 )\nLikelihood ratio test= 461.5  on 3 df,   p=<2e-16\nWald test            = 284.6  on 3 df,   p=<2e-16\nScore (logrank) test = 223.9  on 3 df,   p=<2e-16\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n### Modelo 4: Threshold (Corte em 650 dias)\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelo_threshold <- coxph(\n  surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise),\n  data = db,\n  tt = function(x, t, ...) x * (t > 650)\n)\n\nsummary(modelo_threshold)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\ncoxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), \n    data = db, tt = function(x, t, ...) x * (t > 650))\n\n  n= 628, number of events= 508 \n\n                        coef  exp(coef)   se(coef)       z Pr(>|z|)    \ntreat1             0.0617615  1.0637086  0.0900051   0.686    0.493    \nTempo_dialise     -0.0084524  0.9915832  0.0007713 -10.958   <2e-16 ***\ntt(Tempo_dialise)  0.0028519  1.0028560  0.0221016   0.129    0.897    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\ntreat1               1.0637     0.9401    0.8917    1.2689\nTempo_dialise        0.9916     1.0085    0.9901    0.9931\ntt(Tempo_dialise)    1.0029     0.9972    0.9603    1.0473\n\nConcordance= 0.75  (se = 0.01 )\nLikelihood ratio test= 151.5  on 3 df,   p=<2e-16\nWald test            = 121.2  on 3 df,   p=<2e-16\nScore (logrank) test = 120.6  on 3 df,   p=<2e-16\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n## üéØ Compara√ß√£o de Modelos\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncomparacao <- data.frame(\n  Modelo = c(\"Base\", \"Linear\", \"Log\", \"Threshold (650)\"),\n  AIC = c(\n    AIC(modelo_base),\n    AIC(modelo_linear),\n    AIC(modelo_log),\n    AIC(modelo_threshold)\n  ),\n  BIC = c(\n    BIC(modelo_base),\n    BIC(modelo_linear),\n    BIC(modelo_log),\n    BIC(modelo_threshold)\n  )\n) %>%\n  mutate(\n    AIC = round(AIC, 2),\n    BIC = round(BIC, 2),\n    Melhor_AIC = ifelse(AIC == min(AIC), \"‚òÖ\", \"\"),\n    Melhor_BIC = ifelse(BIC == min(BIC), \"‚òÖ\", \"\")\n  )\n\nkable(comparacao, caption = \"Compara√ß√£o de Modelos (‚òÖ = melhor)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Compara√ß√£o de Modelos (‚òÖ = melhor)\n\n|Modelo          |     AIC|     BIC|Melhor_AIC |Melhor_BIC |\n|:---------------|-------:|-------:|:----------|:----------|\n|Base            | 5771.69| 5780.15|           |           |\n|Linear          | 5587.56| 5600.26|           |           |\n|Log             | 5463.65| 5476.34|‚òÖ          |‚òÖ          |\n|Threshold (650) | 5773.67| 5786.36|           |           |\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n::: {.callout-note}\n## üìä Resultado\n\nModelo **logar√≠tmico** apresenta melhor ajuste (menor AIC/BIC)!\n:::\n\n---\n\n### Visualizando Œ≤(t) para Tempo_dialise\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Res√≠duos de Schoenfeld para Tempo_dialise\ncox_base_dialise <- coxph(surv_obj ~ treat + Tempo_dialise, data = db)\n\nggcoxzph(\n  cox.zph(cox_base_dialise),\n  var = \"Tempo_dialise\",\n  point.size = 0.5\n)\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-16-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n\n\n::: {.callout-note}\nObserve tend√™ncia **aproximadamente linear** ‚Üí Justifica modelo linear/log\n:::\n\n---\n\n## üîç Modelo Completo com Covari√°veis\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelo_completo <- coxph(\n  surv_obj ~ age + race + treat + Tempo_dialise + tt(Tempo_dialise),\n  data = db,\n  tt = function(x, t, ...) x * t\n)\n\nsummary(modelo_completo)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCall:\ncoxph(formula = surv_obj ~ age + race + treat + Tempo_dialise + \n    tt(Tempo_dialise), data = db, tt = function(x, t, ...) x * \n    t)\n\n  n= 617, number of events= 500 \n   (11 observations deleted due to missingness)\n\n                        coef  exp(coef)   se(coef)       z Pr(>|z|)    \nage               -5.531e-03  9.945e-01  7.273e-03  -0.761  0.44693    \nracenegro/pardo   -3.420e-01  7.103e-01  1.081e-01  -3.162  0.00156 ** \ntreat1             4.221e-02  1.043e+00  9.337e-02   0.452  0.65123    \nTempo_dialise     -2.367e-02  9.766e-01  1.512e-03 -15.661  < 2e-16 ***\ntt(Tempo_dialise)  6.881e-05  1.000e+00  5.196e-06  13.242  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n                  exp(coef) exp(-coef) lower .95 upper .95\nage                  0.9945     1.0055    0.9804    1.0088\nracenegro/pardo      0.7103     1.4078    0.5747    0.8781\ntreat1               1.0431     0.9587    0.8687    1.2526\nTempo_dialise        0.9766     1.0240    0.9737    0.9795\ntt(Tempo_dialise)    1.0001     0.9999    1.0001    1.0001\n\nConcordance= 0.765  (se = 0.009 )\nLikelihood ratio test= 343.2  on 5 df,   p=<2e-16\nWald test            = 259.4  on 5 df,   p=<2e-16\nScore (logrank) test = 243.3  on 5 df,   p=<2e-16\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n### Tabela Formatada\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntbl_regression(\n  modelo_completo,\n  exponentiate = TRUE,\n  label = list(\n    age ~ \"Idade\",\n    race ~ \"Ra√ßa\",\n    treat ~ \"Transplante\",\n    Tempo_dialise ~ \"Tempo Di√°lise (t=0)\",\n    `tt(Tempo_dialise)` ~ \"Œî Tempo Di√°lise (por dia)\"\n  )\n) %>%\n  bold_p()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"hmirzkpxoa\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hmirzkpxoa table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hmirzkpxoa thead, #hmirzkpxoa tbody, #hmirzkpxoa tfoot, #hmirzkpxoa tr, #hmirzkpxoa td, #hmirzkpxoa th {\n  border-style: none;\n}\n\n#hmirzkpxoa p {\n  margin: 0;\n  padding: 0;\n}\n\n#hmirzkpxoa .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hmirzkpxoa .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hmirzkpxoa .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hmirzkpxoa .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hmirzkpxoa .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hmirzkpxoa .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hmirzkpxoa .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hmirzkpxoa .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hmirzkpxoa .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hmirzkpxoa .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hmirzkpxoa .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hmirzkpxoa .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hmirzkpxoa .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hmirzkpxoa .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hmirzkpxoa .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hmirzkpxoa .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hmirzkpxoa .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hmirzkpxoa .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hmirzkpxoa .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hmirzkpxoa .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hmirzkpxoa .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hmirzkpxoa .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hmirzkpxoa .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hmirzkpxoa .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hmirzkpxoa .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hmirzkpxoa .gt_left {\n  text-align: left;\n}\n\n#hmirzkpxoa .gt_center {\n  text-align: center;\n}\n\n#hmirzkpxoa .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hmirzkpxoa .gt_font_normal {\n  font-weight: normal;\n}\n\n#hmirzkpxoa .gt_font_bold {\n  font-weight: bold;\n}\n\n#hmirzkpxoa .gt_font_italic {\n  font-style: italic;\n}\n\n#hmirzkpxoa .gt_super {\n  font-size: 65%;\n}\n\n#hmirzkpxoa .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hmirzkpxoa .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hmirzkpxoa .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hmirzkpxoa .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hmirzkpxoa .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hmirzkpxoa .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hmirzkpxoa .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#hmirzkpxoa .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#hmirzkpxoa div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"PHN0cm9uZz5DaGFyYWN0ZXJpc3RpYzwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"estimate\"><span data-qmd-base64=\"PHN0cm9uZz5IUjwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>HR</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"conf.low\"><span data-qmd-base64=\"PHN0cm9uZz45NSUgQ0k8L3N0cm9uZz4=\"><span class='gt_from_md'><strong>95% CI</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\"><span data-qmd-base64=\"PHN0cm9uZz5wLXZhbHVlPC9zdHJvbmc+\"><span class='gt_from_md'><strong>p-value</strong></span></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Idade</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.99</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.98, 1.01</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.4</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Ra√ßa</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†branco</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">‚Äî</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">‚Äî</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†negro/pardo</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.71</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.57, 0.88</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\">0.002</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Transplante</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†0</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">‚Äî</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">‚Äî</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†1</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.04</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.87, 1.25</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.7</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Tempo Di√°lise (t=0)</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.98</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.97, 0.98</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Œî Tempo Di√°lise (por dia)</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">1.00, 1.00</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\" style=\"font-weight: bold;\"><0.001</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"4\"><span data-qmd-base64=\"QWJicmV2aWF0aW9uczogQ0kgPSBDb25maWRlbmNlIEludGVydmFsLCBIUiA9IEhhemFyZCBSYXRpbw==\"><span class='gt_from_md'>Abbreviations: CI = Confidence Interval, HR = Hazard Ratio</span></span></td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n## üìä An√°lise Estratificada por Ra√ßa\n\n::: {.callout-note}\n**Ra√ßa** mostrou-se significativa! Vamos explorar separadamente.\n:::\n\n### Dados: Brancos\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndb_branco <- db %>% filter(race == \"branco\")\nsurv_branco <- Surv(time = db_branco$time, event = db_branco$morte)\n\nfit_branco <- survfit(surv_branco ~ treat, data = db_branco)\n```\n:::\n\n\n\n\n\n\n\n\n---\n\n#### Curva K-M: Brancos\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsurvfit(fit_branco, linewidth = 1.2) +\n  labs(\n    title = \"Sobrevida: Pacientes Brancos\",\n    x = \"Tempo (dias)\",\n    y = \"Probabilidade de Sobrevida\"\n  ) +\n  add_confidence_interval(alpha = 0.2) +\n  scale_ggsurvfit() +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-20-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n#### Modelo Cox: Brancos\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelo_branco <- coxph(\n  surv_branco ~ age + treat + Tempo_dialise + tt(Tempo_dialise),\n  data = db_branco,\n  tt = function(x, t, ...) x * t\n)\n\ntbl_regression(modelo_branco, exponentiate = TRUE)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"easlicwfak\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#easlicwfak table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#easlicwfak thead, #easlicwfak tbody, #easlicwfak tfoot, #easlicwfak tr, #easlicwfak td, #easlicwfak th {\n  border-style: none;\n}\n\n#easlicwfak p {\n  margin: 0;\n  padding: 0;\n}\n\n#easlicwfak .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#easlicwfak .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#easlicwfak .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#easlicwfak .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#easlicwfak .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#easlicwfak .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#easlicwfak .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#easlicwfak .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#easlicwfak .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#easlicwfak .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#easlicwfak .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#easlicwfak .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#easlicwfak .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#easlicwfak .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#easlicwfak .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#easlicwfak .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#easlicwfak .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#easlicwfak .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#easlicwfak .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#easlicwfak .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#easlicwfak .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#easlicwfak .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#easlicwfak .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#easlicwfak .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#easlicwfak .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#easlicwfak .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#easlicwfak .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#easlicwfak .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#easlicwfak .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#easlicwfak .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#easlicwfak .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#easlicwfak .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#easlicwfak .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#easlicwfak .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#easlicwfak .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#easlicwfak .gt_left {\n  text-align: left;\n}\n\n#easlicwfak .gt_center {\n  text-align: center;\n}\n\n#easlicwfak .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#easlicwfak .gt_font_normal {\n  font-weight: normal;\n}\n\n#easlicwfak .gt_font_bold {\n  font-weight: bold;\n}\n\n#easlicwfak .gt_font_italic {\n  font-style: italic;\n}\n\n#easlicwfak .gt_super {\n  font-size: 65%;\n}\n\n#easlicwfak .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#easlicwfak .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#easlicwfak .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#easlicwfak .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#easlicwfak .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#easlicwfak .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#easlicwfak .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#easlicwfak .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#easlicwfak div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"PHN0cm9uZz5DaGFyYWN0ZXJpc3RpYzwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"estimate\"><span data-qmd-base64=\"PHN0cm9uZz5IUjwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>HR</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"conf.low\"><span data-qmd-base64=\"PHN0cm9uZz45NSUgQ0k8L3N0cm9uZz4=\"><span class='gt_from_md'><strong>95% CI</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\"><span data-qmd-base64=\"PHN0cm9uZz5wLXZhbHVlPC9zdHJvbmc+\"><span class='gt_from_md'><strong>p-value</strong></span></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">age</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.98, 1.02</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">>0.9</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">treat</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†0</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">‚Äî</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">‚Äî</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†1</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.03</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.83, 1.27</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.8</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Tempo_dialise</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.98</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.97, 0.98</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">tt(Tempo_dialise)</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">1.00, 1.00</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><0.001</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"4\"><span data-qmd-base64=\"QWJicmV2aWF0aW9uczogQ0kgPSBDb25maWRlbmNlIEludGVydmFsLCBIUiA9IEhhemFyZCBSYXRpbw==\"><span class='gt_from_md'>Abbreviations: CI = Confidence Interval, HR = Hazard Ratio</span></span></td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n### Dados: Negros/Pardos\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndb_pardo_negro <- db %>% filter(race == \"negro/pardo\")\nsurv_pardo_negro <- Surv(time = db_pardo_negro$time, \n                         event = db_pardo_negro$morte)\n\nfit_pardo_negro <- survfit(surv_pardo_negro ~ treat, \n                           data = db_pardo_negro)\n```\n:::\n\n\n\n\n\n\n\n\n---\n\n#### Curva K-M: Negros/Pardos\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggsurvfit(fit_pardo_negro, linewidth = 1.2) +\n  labs(\n    title = \"Sobrevida: Pacientes Negros/Pardos\",\n    x = \"Tempo (dias)\",\n    y = \"Probabilidade de Sobrevida\"\n  ) +\n  add_confidence_interval(alpha = 0.2) +\n  scale_ggsurvfit() +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](lista_6_1_files/figure-html/unnamed-chunk-23-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n#### Modelo Cox: Negros/Pardos\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelo_pardo_negro <- coxph(\n  surv_pardo_negro ~ age + treat + Tempo_dialise + tt(Tempo_dialise),\n  data = db_pardo_negro,\n  tt = function(x, t, ...) x * t\n)\n\ntbl_regression(modelo_pardo_negro, exponentiate = TRUE)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"hvnadummsa\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hvnadummsa table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hvnadummsa thead, #hvnadummsa tbody, #hvnadummsa tfoot, #hvnadummsa tr, #hvnadummsa td, #hvnadummsa th {\n  border-style: none;\n}\n\n#hvnadummsa p {\n  margin: 0;\n  padding: 0;\n}\n\n#hvnadummsa .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hvnadummsa .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hvnadummsa .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hvnadummsa .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hvnadummsa .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hvnadummsa .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hvnadummsa .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hvnadummsa .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hvnadummsa .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hvnadummsa .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hvnadummsa .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hvnadummsa .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hvnadummsa .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hvnadummsa .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hvnadummsa .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hvnadummsa .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hvnadummsa .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hvnadummsa .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hvnadummsa .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hvnadummsa .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hvnadummsa .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hvnadummsa .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hvnadummsa .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hvnadummsa .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hvnadummsa .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hvnadummsa .gt_left {\n  text-align: left;\n}\n\n#hvnadummsa .gt_center {\n  text-align: center;\n}\n\n#hvnadummsa .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hvnadummsa .gt_font_normal {\n  font-weight: normal;\n}\n\n#hvnadummsa .gt_font_bold {\n  font-weight: bold;\n}\n\n#hvnadummsa .gt_font_italic {\n  font-style: italic;\n}\n\n#hvnadummsa .gt_super {\n  font-size: 65%;\n}\n\n#hvnadummsa .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hvnadummsa .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hvnadummsa .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hvnadummsa .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hvnadummsa .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hvnadummsa .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hvnadummsa .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#hvnadummsa .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#hvnadummsa div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"label\"><span data-qmd-base64=\"PHN0cm9uZz5DaGFyYWN0ZXJpc3RpYzwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>Characteristic</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"estimate\"><span data-qmd-base64=\"PHN0cm9uZz5IUjwvc3Ryb25nPg==\"><span class='gt_from_md'><strong>HR</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"conf.low\"><span data-qmd-base64=\"PHN0cm9uZz45NSUgQ0k8L3N0cm9uZz4=\"><span class='gt_from_md'><strong>95% CI</strong></span></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\"><span data-qmd-base64=\"PHN0cm9uZz5wLXZhbHVlPC9zdHJvbmc+\"><span class='gt_from_md'><strong>p-value</strong></span></span></th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">age</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.98</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.95, 1.01</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.2</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">treat</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\"><br /></td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†0</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">‚Äî</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">‚Äî</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><br /></td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">¬†¬†¬†¬†1</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.08</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.74, 1.58</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\">0.7</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">Tempo_dialise</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">0.98</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">0.97, 0.98</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><0.001</td></tr>\n    <tr><td headers=\"label\" class=\"gt_row gt_left\">tt(Tempo_dialise)</td>\n<td headers=\"estimate\" class=\"gt_row gt_center\">1.00</td>\n<td headers=\"conf.low\" class=\"gt_row gt_center\">1.00, 1.00</td>\n<td headers=\"p.value\" class=\"gt_row gt_center\"><0.001</td></tr>\n  </tbody>\n  <tfoot class=\"gt_sourcenotes\">\n    <tr>\n      <td class=\"gt_sourcenote\" colspan=\"4\"><span data-qmd-base64=\"QWJicmV2aWF0aW9uczogQ0kgPSBDb25maWRlbmNlIEludGVydmFsLCBIUiA9IEhhemFyZCBSYXRpbw==\"><span class='gt_from_md'>Abbreviations: CI = Confidence Interval, HR = Hazard Ratio</span></span></td>\n    </tr>\n  </tfoot>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n## üìä Compara√ß√£o Entre Grupos Raciais\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Extrair HRs de transplante\nhr_branco <- exp(coef(modelo_branco)[\"treat1\"])\nhr_pardo_negro <- exp(coef(modelo_pardo_negro)[\"treat1\"])\n\ncomparacao_raca <- data.frame(\n  Grupo = c(\"Brancos\", \"Negros/Pardos\"),\n  HR_Transplante = c(hr_branco, hr_pardo_negro),\n  IC_Lower = c(\n    exp(confint(modelo_branco)[\"treat1\", 1]),\n    exp(confint(modelo_pardo_negro)[\"treat1\", 1])\n  ),\n  IC_Upper = c(\n    exp(confint(modelo_branco)[\"treat1\", 2]),\n    exp(confint(modelo_pardo_negro)[\"treat1\", 2])\n  )\n) %>%\n  mutate(across(where(is.numeric), ~round(., 3)))\n\nkable(comparacao_raca, \n      caption = \"HR do Transplante por Grupo Racial\")\n```\n\n::: {.cell-output-display}\n\n\nTable: HR do Transplante por Grupo Racial\n\n|Grupo         | HR_Transplante| IC_Lower| IC_Upper|\n|:-------------|--------------:|--------:|--------:|\n|Brancos       |          1.029|    0.834|    1.270|\n|Negros/Pardos |          1.081|    0.739|    1.582|\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n## üéì Conceitos-Chave\n\n::: {.callout-tip collapse=\"true\"}\n## üìö Resumo Conceitual\n\n**Proporcionalidade de Riscos:**\n- Pressuposto: HR constante ao longo do tempo\n- Teste: Res√≠duos de Schoenfeld\n- p < 0.05 ‚Üí Viola√ß√£o!\n\n**Covari√°veis Tempo-Dependentes:**\n- Permitem Œ≤(t) variar com tempo\n- Tr√™s formas: linear, log, threshold\n- Escolha baseada em AIC/BIC + teoria\n\n**Interpreta√ß√£o:**\n- **Œ≤‚ÇÄ:** Efeito no tempo inicial\n- **Œ≤‚ÇÅ:** Taxa de mudan√ßa do efeito\n- **Œ≤(t) = Œ≤‚ÇÄ + Œ≤‚ÇÅ √ó f(t)** onde f(t) = t, log(t), ou (t>corte)\n\n**Quando usar:**\n- Teste de proporcionalidade significativo\n- Teoria sugere efeito muda com tempo\n- Gr√°fico de res√≠duos mostra tend√™ncia\n:::\n\n---\n\n## üìö Material Complementar\n\n\n\n\n\n\n\n\n{{< video https://www.youtube.com/watch?v=6FvdrOpz0XU title='Cox Tempo Dependente - Aula Pr√°tica #6.1' >}}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n---\n\n### Recursos Adicionais\n\n::: {.callout-note collapse=\"true\"}\n## üìñ Leituras Avan√ßadas\n\n**Tutoriais:**\n- [UCLA: Survival Analysis in R](https://stats.oarc.ucla.edu/wp-content/uploads/2022/05/survival_r.html)\n- [YouTube: Time-Dependent Cox](https://www.youtube.com/watch?v=Y_83HXuHMdc)\n\n**Conceitos:**\n- Fun√ß√£o `tt()`: transforma covari√°vel ao longo do tempo\n- `tmerge()`: alternativa para criar dados tempo-dependentes\n- Stratifica√ß√£o vs tempo-depend√™ncia\n:::\n\n---\n\n## üîß Informa√ß√µes de Sess√£o\n\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreport(sessionInfo())\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAnalyses were conducted using the R Statistical language (version 4.4.2; R Core\nTeam, 2024) on Windows 11 x64 (build 26100), using the packages lubridate\n(version 1.9.4; Grolemund G, Wickham H, 2011), coin (version 1.4.3; Hothorn T\net al., 2006), ggpubr (version 0.6.0; Kassambara A, 2023), survminer (version\n0.5.1; Kassambara A et al., 2025), report (version 0.6.3; Makowski D et al.,\n2023), tibble (version 3.3.1; M√ºller K, Wickham H, 2026), foreign (version\n0.8.87; R Core Team, 2024), broom (version 1.0.7; Robinson D et al., 2024),\nggsurvfit (version 1.2.0; Sjoberg D et al., 2025), gtsummary (version 2.1.0;\nSjoberg D et al., 2021), survival (version 3.7.0; Therneau T, 2024), ggplot2\n(version 4.0.1; Wickham H, 2016), forcats (version 1.0.0; Wickham H, 2023),\nstringr (version 1.5.1; Wickham H, 2023), tidyverse (version 2.0.0; Wickham H\net al., 2019), dplyr (version 1.1.4; Wickham H et al., 2023), purrr (version\n1.0.4; Wickham H, Henry L, 2025), readr (version 2.1.5; Wickham H et al.,\n2024), tidyr (version 1.3.1; Wickham H et al., 2024) and kableExtra (version\n1.4.0; Zhu H, 2024).\n\nReferences\n----------\n  - Grolemund G, Wickham H (2011). \"Dates and Times Made Easy with lubridate.\"\n_Journal of Statistical Software_, *40*(3), 1-25.\n<https://www.jstatsoft.org/v40/i03/>.\n  - Hothorn T, Hornik K, van de Wiel MA, Zeileis A (2006). \"A Lego system for\nconditional inference.\" _The American Statistician_, *60*(3), 257-263.\ndoi:10.1198/000313006X118430 <https://doi.org/10.1198/000313006X118430>.\nHothorn T, Hornik K, van de Wiel MA, Zeileis A (2008). \"Implementing a class of\npermutation tests: The coin package.\" _Journal of Statistical Software_,\n*28*(8), 1-23. doi:10.18637/jss.v028.i08\n<https://doi.org/10.18637/jss.v028.i08>.\n  - Kassambara A (2023). _ggpubr: 'ggplot2' Based Publication Ready Plots_. R\npackage version 0.6.0, <https://CRAN.R-project.org/package=ggpubr>.\n  - Kassambara A, Kosinski M, Biecek P (2025). _survminer: Drawing Survival\nCurves using 'ggplot2'_. R package version 0.5.1,\n<https://CRAN.R-project.org/package=survminer>.\n  - Makowski D, L√ºdecke D, Patil I, Th√©riault R, Ben-Shachar M, Wiernik B (2023).\n\"Automated Results Reporting as a Practical Tool to Improve Reproducibility and\nMethodological Best Practices Adoption.\" _CRAN_.\ndoi:10.32614/CRAN.package.report\n<https://doi.org/10.32614/CRAN.package.report>,\n<https://easystats.github.io/report/>.\n  - M√ºller K, Wickham H (2026). _tibble: Simple Data Frames_. R package version\n3.3.1, <https://CRAN.R-project.org/package=tibble>.\n  - R Core Team (2024). _foreign: Read Data Stored by 'Minitab', 'S', 'SAS',\n'SPSS', 'Stata', 'Systat', 'Weka', 'dBase', ..._. R package version 0.8-87,\n<https://CRAN.R-project.org/package=foreign>.\n  - R Core Team (2024). _R: A Language and Environment for Statistical\nComputing_. R Foundation for Statistical Computing, Vienna, Austria.\n<https://www.R-project.org/>.\n  - Robinson D, Hayes A, Couch S (2024). _broom: Convert Statistical Objects into\nTidy Tibbles_. R package version 1.0.7,\n<https://CRAN.R-project.org/package=broom>.\n  - Sjoberg D, Baillie M, Fruechtenicht C, Haesendonckx S, Treis T (2025).\n_ggsurvfit: Flexible Time-to-Event Figures_. R package version 1.2.0,\n<https://CRAN.R-project.org/package=ggsurvfit>.\n  - Sjoberg D, Whiting K, Curry M, Lavery J, Larmarange J (2021). \"Reproducible\nSummary Tables with the gtsummary Package.\" _The R Journal_, *13*, 570-580.\ndoi:10.32614/RJ-2021-053 <https://doi.org/10.32614/RJ-2021-053>,\n<https://doi.org/10.32614/RJ-2021-053>.\n  - Therneau T (2024). _A Package for Survival Analysis in R_. R package version\n3.7-0, <https://CRAN.R-project.org/package=survival>. Terry M. Therneau,\nPatricia M. Grambsch (2000). _Modeling Survival Data: Extending the Cox Model_.\nSpringer, New York. ISBN 0-387-98784-3.\n  - Wickham H (2016). _ggplot2: Elegant Graphics for Data Analysis_.\nSpringer-Verlag New York. ISBN 978-3-319-24277-4,\n<https://ggplot2.tidyverse.org>.\n  - Wickham H (2023). _forcats: Tools for Working with Categorical Variables\n(Factors)_. R package version 1.0.0,\n<https://CRAN.R-project.org/package=forcats>.\n  - Wickham H (2023). _stringr: Simple, Consistent Wrappers for Common String\nOperations_. R package version 1.5.1,\n<https://CRAN.R-project.org/package=stringr>.\n  - Wickham H, Averick M, Bryan J, Chang W, McGowan LD, Fran√ßois R, Grolemund G,\nHayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E, Bache SM, M√ºller K,\nOoms J, Robinson D, Seidel DP, Spinu V, Takahashi K, Vaughan D, Wilke C, Woo K,\nYutani H (2019). \"Welcome to the tidyverse.\" _Journal of Open Source Software_,\n*4*(43), 1686. doi:10.21105/joss.01686 <https://doi.org/10.21105/joss.01686>.\n  - Wickham H, Fran√ßois R, Henry L, M√ºller K, Vaughan D (2023). _dplyr: A Grammar\nof Data Manipulation_. R package version 1.1.4,\n<https://CRAN.R-project.org/package=dplyr>.\n  - Wickham H, Henry L (2025). _purrr: Functional Programming Tools_. R package\nversion 1.0.4, <https://CRAN.R-project.org/package=purrr>.\n  - Wickham H, Hester J, Bryan J (2024). _readr: Read Rectangular Text Data_. R\npackage version 2.1.5, <https://CRAN.R-project.org/package=readr>.\n  - Wickham H, Vaughan D, Girlich M (2024). _tidyr: Tidy Messy Data_. R package\nversion 1.3.1, <https://CRAN.R-project.org/package=tidyr>.\n  - Zhu H (2024). _kableExtra: Construct Complex Table with 'kable' and Pipe\nSyntax_. R package version 1.4.0,\n<https://CRAN.R-project.org/package=kableExtra>.\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\n::: {.callout-note appearance=\"simple\"}\n## üéì Resumo da Lista 6.1\n\nNesta lista voc√™:\n\n‚úÖ Identificou **viola√ß√£o de proporcionalidade** com teste de Schoenfeld  \n‚úÖ Compreendeu **covari√°veis tempo-dependentes** (linear, log, threshold)  \n‚úÖ Ajustou modelos Cox com **efeitos variando no tempo**  \n‚úÖ Comparou modelos via **AIC/BIC**  \n‚úÖ Realizou **an√°lise estratificada** por ra√ßa  \n‚úÖ Interpretou **Œ≤(t)** e sua mudan√ßa temporal  \n\n**Conceitos-chave:**\n- Proporcionalidade: HR constante ao longo do tempo\n- Viola√ß√£o: Œ≤(t) n√£o √© constante\n- tt(x): transforma x para variar com tempo\n- Œ≤(t) = Œ≤‚ÇÄ + Œ≤‚ÇÅ √ó f(t)\n- Escolha de f(t) baseada em teoria + dados\n\n**Quando usar Cox tempo-dependente:**\n- Teste de Schoenfeld significativo (p < 0.05)\n- Gr√°fico de res√≠duos mostra tend√™ncia clara\n- Teoria sugere efeito muda com tempo\n- Eventos/exposi√ß√µes ocorrem durante seguimento\n\n**Pr√≥ximos passos:**\n- Explorar modelos com m√∫ltiplas covari√°veis tempo-dependentes\n- Valida√ß√£o cruzada temporal\n- Modelos de fragilidade para heterogeneidade n√£o-observada\n:::",
    "supporting": [
      "lista_6_1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}