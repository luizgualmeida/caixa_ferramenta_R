{
  "hash": "23e4524c269cb3c38313a500d1e3f179",
  "result": {
    "engine": "knitr",
    "markdown": "# Lista 7: S√©ries Temporais (ARIMA) {.unnumbered}\n\n::: {.callout-note appearance=\"simple\" icon=\"false\"}\n## Objetivo da Lista\n\nDomine **modelos ARIMA** para an√°lise de s√©ries temporais: avaliar estacionaridade, identificar padr√µes sazonais e fazer previs√µes futuras. Trabalharemos com dados de consumo de cigarros e sal√°rios ao longo do tempo.\n:::\n\n------------------------------------------------------------------------\n\n## üì¶ Pacotes\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n‚úì Pacotes de s√©ries temporais carregados!\n```\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n## üîç O que √© ARIMA?\n\n::: callout-tip\n## ARIMA = AutoRegressive Integrated Moving Average\n\nModelo para s√©ries temporais que combina tr√™s componentes:\n\n**AR (p)** - AutoRegressivo - Usa valores **passados** da s√©rie - \"O hoje depende do ontem\" - p = n√∫mero de defasagens (lags)\n\n**I (d)** - Integrado - N√∫mero de **diferen√ßas** para tornar s√©rie estacion√°ria - d = 0 (estacion√°ria), d = 1 (1¬™ diferen√ßa), etc.\n\n**MA (q)** - M√©dia M√≥vel - Usa **erros passados** da s√©rie - \"Corre√ß√µes baseadas em erros anteriores\" - q = n√∫mero de termos de erro\n\n**Nota√ß√£o:** ARIMA(p, d, q)\n:::\n\n------------------------------------------------------------------------\n\n## üßπ Prepara√ß√£o do Ambiente\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Limpar ambiente\nrm(list = ls(all.names = TRUE))\ngc()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n          used (Mb) gc trigger  (Mb) max used  (Mb)\nNcells 1682340 89.9    3138441 167.7  2478994 132.4\nVcells 2892755 22.1    8388608  64.0  4629138  35.4\n```\n\n\n:::\n\n```{.r .cell-code}\n# Configura√ß√µes\noptions(scipen = 999, stringsAsFactors = FALSE)\nset.seed(42)\n```\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n## üì• Parte 1: Estacionaridade (Dados de Cigarros)\n\n::: callout-important\n## Conceito Fundamental: Estacionaridade\n\nUma s√©rie √© **estacion√°ria** quando: - **M√©dia constante** ao longo do tempo - **Vari√¢ncia constante** - **Autocorrela√ß√£o** depende apenas da defasagem, n√£o do tempo\n\n**Por que importa?** Modelos ARIMA requerem estacionaridade!\n:::\n\n------------------------------------------------------------------------\n\n### Carregar Dados\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndb_cigarro <- read.spss(\"CigarrosROD_1.sav\", to.data.frame = TRUE)\nglimpse(db_cigarro)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 20\nColumns: 2\n$ Dia         <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,‚Ä¶\n$ cigarrosROD <dbl> 6, 10, 4, 13, 4, 11, 4, 6, 4, 15, 5, 14, 5, 21, 10, 31, 13‚Ä¶\n```\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Inspe√ß√£o Visual\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# M√©dia da s√©rie\nmedia_cigarros <- mean(db_cigarro$cigarrosROD)\n\n# Plot simples\nplot.ts(db_cigarro$cigarrosROD, \n        main = \"Consumo de Cigarros ao Longo do Tempo\",\n        ylab = \"Cigarros por Dia\", xlab = \"Tempo\")\nabline(h = media_cigarros, col = \"blue\", lty = 2, lwd = 2)\nlegend(\"topright\", legend = \"M√©dia\", col = \"blue\", lty = 2, lwd = 2)\n```\n\n::: {.cell-output-display}\n![](lista_7_files/figure-html/unnamed-chunk-4-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n::: callout-warning\n## üìä Diagn√≥stico Visual\n\nValores **desviam bastante da m√©dia** ‚Üí S√©rie **N√ÉO √© estacion√°ria**\n\nObserve tend√™ncia de queda ao longo do tempo.\n:::\n\n------------------------------------------------------------------------\n\n### Teste Augmented Dickey-Fuller (ADF)\n\n::: callout-tip\n## Teste ADF\n\n**H‚ÇÄ:** S√©rie √© **n√£o-estacion√°ria** (possui raiz unit√°ria)\\\n**H‚ÇÅ:** S√©rie √© **estacion√°ria**\n\n**Decis√£o:** - p \\< 0.05 ‚Üí Rejeita H‚ÇÄ ‚Üí Estacion√°ria ‚úì - p \\> 0.05 ‚Üí N√£o rejeita H‚ÇÄ ‚Üí N√£o-estacion√°ria ‚úó\n:::\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nadf.test(db_cigarro$cigarrosROD)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tAugmented Dickey-Fuller Test\n\ndata:  db_cigarro$cigarrosROD\nDickey-Fuller = -0.38979, Lag order = 2, p-value = 0.9797\nalternative hypothesis: stationary\n```\n\n\n:::\n:::\n\n\n\n\n\n\n::: callout-note\n## Resultado\n\n**p \\> 0.05** ‚Üí S√©rie **n√£o √© estacion√°ria**\n\nPrecisamos transform√°-la!\n:::\n\n------------------------------------------------------------------------\n\n### Fun√ß√£o de Autocorrela√ß√£o (ACF)\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# An√°lise completa\nggtsdisplay(db_cigarro$cigarrosROD, \n            main = \"Diagn√≥stico da S√©rie Original\")\n```\n\n::: {.cell-output-display}\n![](lista_7_files/figure-html/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n::: {.callout-tip collapse=\"true\"}\n## üîç Interpretando ACF\n\n**Barras acima da linha tracejada** = Autocorrela√ß√£o significativa\n\n**Padr√£o decrescente lento** = Tend√™ncia (n√£o-estacion√°ria)\n\n**Lags candidatos:** Onde ACF cruza o limiar pela primeira vez\n:::\n\n------------------------------------------------------------------------\n\n### Teste de Ljung-Box\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calcular ACF\nacf_valores <- acf(db_cigarro$cigarrosROD, plot = FALSE)\n\n# Testar m√∫ltiplos lags\nmax_lags <- min(20, length(acf_valores$acf) - 1)\nresultados <- data.frame(\n  Lag = 1:max_lags,\n  P_Value = sapply(1:max_lags, function(lag) {\n    Box.test(acf_valores$acf, lag = lag, type = \"Ljung-Box\")$p.value\n  })\n)\n\n# Destacar significativos\nresultados$Sig <- ifelse(resultados$P_Value < 0.05, \"‚úì\", \"\")\n\nkable(head(resultados, 10), digits = 4,\n      caption = \"Teste de Ljung-Box por Lag\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Teste de Ljung-Box por Lag\n\n| Lag| P_Value|Sig |\n|---:|-------:|:---|\n|   1|  0.9410|    |\n|   2|  0.0166|‚úì   |\n|   3|  0.0364|‚úì   |\n|   4|  0.0200|‚úì   |\n|   5|  0.0237|‚úì   |\n|   6|  0.0359|‚úì   |\n|   7|  0.0198|‚úì   |\n|   8|  0.0337|‚úì   |\n|   9|  0.0101|‚úì   |\n|  10|  0.0151|‚úì   |\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Transforma√ß√£o: Diferencia√ß√£o\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Determinar n√∫mero √≥timo de diferen√ßas\nn_diffs <- ndiffs(db_cigarro$cigarrosROD)\ncat(\"Diferen√ßas necess√°rias:\", n_diffs, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nDiferen√ßas necess√°rias: 1 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Aplicar diferencia√ß√£o\nserie_diff <- diff(db_cigarro$cigarrosROD, differences = n_diffs)\n\n# Verificar estacionaridade\nadf.test(serie_diff)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tAugmented Dickey-Fuller Test\n\ndata:  serie_diff\nDickey-Fuller = -4.1249, Lag order = 2, p-value = 0.0189\nalternative hypothesis: stationary\n```\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Visualiza√ß√£o P√≥s-Transforma√ß√£o\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot da s√©rie diferenciada\nmedia_diff <- mean(serie_diff)\nplot.ts(serie_diff,\n        main = \"S√©rie Ap√≥s Diferencia√ß√£o\",\n        ylab = \"Diferen√ßa\", xlab = \"Tempo\")\nabline(h = media_diff, col = \"red\", lty = 2, lwd = 2)\nabline(h = 0, col = \"gray\", lty = 3)\n```\n\n::: {.cell-output-display}\n![](lista_7_files/figure-html/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n::: callout-tip\n## ‚úì S√©rie Agora Estacion√°ria!\n\n-   Oscila em torno da m√©dia (linha vermelha)\n-   Vari√¢ncia constante\n-   ADF test significativo (p \\< 0.05)\n:::\n\n------------------------------------------------------------------------\n\n## üìä Parte 2: Modelagem ARIMA (Dados de Sal√°rios)\n\n### Carregar Dados\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndb_salarios <- read.spss(\"dados series temporais.sav\", \n                         to.data.frame = TRUE)\nglimpse(db_salarios)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 120\nColumns: 11\n$ date         <dbl> 12818995200, 12821673600, 12824092800, 12826771200, 12829‚Ä¶\n$ men          <dbl> 11357.92, 10605.95, 16998.57, 6563.75, 6607.69, 9839.00, ‚Ä¶\n$ women        <dbl> 16578.93, 18236.13, 43393.55, 30908.49, 28701.58, 29647.5‚Ä¶\n$ horas        <dbl> 7978, 8290, 8029, 7752, 8685, 7847, 7881, 8121, 7811, 870‚Ä¶\n$ divida       <dbl> 73, 88, 65, 85, 74, 87, 79, 72, 83, 111, 74, 105, 66, 59,‚Ä¶\n$ idade        <dbl> 34, 29, 24, 20, 17, 30, 28, 27, 35, 25, 30, 45, 35, 20, 2‚Ä¶\n$ propaganda   <dbl> 22294.48, 27426.47, 27978.66, 28949.65, 22642.27, 27210.6‚Ä¶\n$ escolaridade <dbl> 20, 20, 26, 22, 21, 23, 22, 20, 15, 20, 16, 29, 22, 28, 2‚Ä¶\n$ YEAR_        <dbl> 1989, 1989, 1989, 1989, 1989, 1989, 1989, 1989, 1989, 198‚Ä¶\n$ MONTH_       <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3, 4, 5, 6, ‚Ä¶\n$ DATE_        <chr> \"JAN 1989\", \"FEB 1989\", \"MAR 1989\", \"APR 1989\", \"MAY 1989‚Ä¶\n```\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Criar Objeto de S√©rie Temporal\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Sal√°rios masculinos como s√©rie temporal\nts_men <- ts(db_salarios$men,\n             frequency = 12,      # Mensal\n             start = c(1989, 1))  # Janeiro de 1989\n\n# Visualiza√ß√£o\nplot(ts_men, main = \"Sal√°rios Masculinos (1989-)\",\n     ylab = \"Sal√°rio\", xlab = \"Tempo\")\n```\n\n::: {.cell-output-display}\n![](lista_7_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Plot Sazonal\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nseasonplot(ts_men,\n           col = rainbow(12),\n           year.labels = TRUE,\n           type = \"o\", pch = 16,\n           main = \"Padr√£o Sazonal de Sal√°rios\")\n```\n\n::: {.cell-output-display}\n![](lista_7_files/figure-html/unnamed-chunk-12-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Diagn√≥stico da S√©rie\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggtsdisplay(ts_men, main = \"Diagn√≥stico: Sal√°rios Masculinos\")\n```\n\n::: {.cell-output-display}\n![](lista_7_files/figure-html/unnamed-chunk-13-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n## üéØ Ajustando Modelos ARIMA\n\n### Modelo 1: ARIMA(1,0,0)\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelo_100 <- Arima(db_salarios$men, order = c(1, 0, 0))\nsummary(modelo_100)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSeries: db_salarios$men \nARIMA(1,0,0) with non-zero mean \n\nCoefficients:\n         ar1        mean\n      0.4461  16358.8539\ns.e.  0.0870    934.3313\n\nsigma^2 = 33065905:  log likelihood = -1208.22\nAIC=2422.43   AICc=2422.64   BIC=2430.79\n\nTraining set error measures:\n                   ME     RMSE      MAE       MPE    MAPE      MASE        ACF1\nTraining set 22.80781 5702.176 4155.971 -13.46047 30.1633 0.8885625 -0.09098277\n```\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Modelo 2: ARIMA(0,1,0)\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelo_010 <- Arima(db_salarios$men, order = c(0, 1, 0))\nsummary(modelo_010)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSeries: db_salarios$men \nARIMA(0,1,0) \n\nsigma^2 = 43555282:  log likelihood = -1215.43\nAIC=2432.86   AICc=2432.9   BIC=2435.64\n\nTraining set error measures:\n                   ME     RMSE      MAE       MPE     MAPE      MASE       ACF1\nTraining set 227.1925 6572.087 4638.303 -8.641961 31.89164 0.9916869 -0.4271109\n```\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Modelo 3: Auto ARIMA\n\n::: callout-tip\n## `auto.arima()`\n\nFun√ß√£o que **automaticamente** seleciona os melhores par√¢metros (p, d, q) minimizando AIC/BIC.\n:::\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Encontrar melhor modelo\nauto.arima(db_salarios$men, trace = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n ARIMA(2,1,2) with drift         : Inf\n ARIMA(0,1,0) with drift         : 2434.823\n ARIMA(1,1,0) with drift         : 2412.096\n ARIMA(0,1,1) with drift         : Inf\n ARIMA(0,1,0)                    : 2432.897\n ARIMA(2,1,0) with drift         : 2411.86\n ARIMA(3,1,0) with drift         : 2408.495\n ARIMA(4,1,0) with drift         : 2407.461\n ARIMA(5,1,0) with drift         : 2408.674\n ARIMA(4,1,1) with drift         : Inf\n ARIMA(3,1,1) with drift         : Inf\n ARIMA(5,1,1) with drift         : Inf\n ARIMA(4,1,0)                    : 2405.816\n ARIMA(3,1,0)                    : 2406.731\n ARIMA(5,1,0)                    : 2407.075\n ARIMA(4,1,1)                    : 2394.525\n ARIMA(3,1,1)                    : 2392.515\n ARIMA(2,1,1)                    : 2392.416\n ARIMA(1,1,1)                    : 2391.073\n ARIMA(0,1,1)                    : 2393.07\n ARIMA(1,1,0)                    : 2410.255\n ARIMA(1,1,2)                    : 2392.894\n ARIMA(0,1,2)                    : 2391.92\n ARIMA(2,1,0)                    : 2410.02\n ARIMA(2,1,2)                    : Inf\n ARIMA(1,1,1) with drift         : Inf\n\n Best model: ARIMA(1,1,1)                    \n```\n\n\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSeries: db_salarios$men \nARIMA(1,1,1) \n\nCoefficients:\n         ar1      ma1\n      0.2036  -0.9139\ns.e.  0.1002   0.0347\n\nsigma^2 = 29737029:  log likelihood = -1192.43\nAIC=2390.86   AICc=2391.07   BIC=2399.2\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Ajustar modelo sugerido\nmodelo_auto <- auto.arima(db_salarios$men)\nsummary(modelo_auto)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSeries: db_salarios$men \nARIMA(1,1,1) \n\nCoefficients:\n         ar1      ma1\n      0.2036  -0.9139\ns.e.  0.1002   0.0347\n\nsigma^2 = 29737029:  log likelihood = -1192.43\nAIC=2390.86   AICc=2391.07   BIC=2399.2\n\nTraining set error measures:\n                   ME     RMSE      MAE       MPE     MAPE      MASE\nTraining set 915.6723 5384.571 3662.003 -5.571742 25.15003 0.7829504\n                    ACF1\nTraining set -0.04692903\n```\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Compara√ß√£o de Modelos\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodelos_comp <- data.frame(\n  Modelo = c(\"ARIMA(1,0,0)\", \"ARIMA(0,1,0)\", \"Auto\"),\n  AIC = c(AIC(modelo_100), AIC(modelo_010), AIC(modelo_auto)),\n  BIC = c(BIC(modelo_100), BIC(modelo_010), BIC(modelo_auto))\n)\n\nmodelos_comp <- modelos_comp %>%\n  mutate(\n    AIC = round(AIC, 2),\n    BIC = round(BIC, 2),\n    Melhor_AIC = ifelse(AIC == min(AIC), \"‚òÖ\", \"\"),\n    Melhor_BIC = ifelse(BIC == min(BIC), \"‚òÖ\", \"\")\n  )\n\nkable(modelos_comp, caption = \"Compara√ß√£o de Modelos (‚òÖ = melhor)\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Compara√ß√£o de Modelos (‚òÖ = melhor)\n\n|Modelo       |     AIC|     BIC|Melhor_AIC |Melhor_BIC |\n|:------------|-------:|-------:|:----------|:----------|\n|ARIMA(1,0,0) | 2422.43| 2430.79|           |           |\n|ARIMA(0,1,0) | 2432.86| 2435.64|           |           |\n|Auto         | 2390.86| 2399.20|‚òÖ          |‚òÖ          |\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Visualiza√ß√£o: Ajustado vs Real\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Dataframe para plot\ndf_plot <- data.frame(\n  Tempo = seq_along(modelo_auto$fitted),\n  Ajustado = as.numeric(modelo_auto$fitted),\n  Real = as.numeric(modelo_auto$x)\n)\n\n# Gr√°fico\nggplot(df_plot, aes(x = Tempo)) +\n  geom_line(aes(y = Real, color = \"Real\"), linewidth = 1) +\n  geom_line(aes(y = Ajustado, color = \"Ajustado\"), linewidth = 1) +\n  labs(\n    title = \"Modelo ARIMA: Valores Ajustados vs Reais\",\n    x = \"Tempo\",\n    y = \"Sal√°rio\",\n    color = \"S√©rie\"\n  ) +\n  scale_color_manual(values = c(\"Real\" = \"blue\", \"Ajustado\" = \"red\")) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n::: {.cell-output-display}\n![](lista_7_files/figure-html/unnamed-chunk-19-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n## üîß Modelo com Covari√°veis\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Matriz de covari√°veis\ncovars <- as.matrix(db_salarios[, c(\"horas\", \"divida\", \"idade\", \n                                     \"propaganda\", \"escolaridade\")])\n\n# Auto ARIMA com covari√°veis\nmodelo_com_covars <- auto.arima(db_salarios$men, xreg = covars)\nsummary(modelo_com_covars)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nSeries: db_salarios$men \nRegression with ARIMA(1,0,0) errors \n\nCoefficients:\n         ar1   intercept   horas   divida     idade  propaganda  escolaridade\n      0.1968  -23753.966  2.0271  34.5286  342.9908      0.2046      -30.3841\ns.e.  0.1000    2752.766  0.2204  20.1900   43.9319      0.0733       41.3101\n\nsigma^2 = 8316739:  log likelihood = -1122.71\nAIC=2261.43   AICc=2262.72   BIC=2283.73\n\nTraining set error measures:\n                    ME     RMSE      MAE       MPE     MAPE      MASE\nTraining set -1.571885 2798.499 2100.857 -2.062733 13.69221 0.4491713\n                     ACF1\nTraining set -0.006183707\n```\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Coeficientes e Signific√¢ncia\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Teste de coeficientes\ntest_coef <- coeftest(modelo_com_covars)\n\n# Formatar resultados\nresultados <- data.frame(\n  Variavel = rownames(test_coef),\n  Coeficiente = round(test_coef[, \"Estimate\"], 3),\n  EP = round(test_coef[, \"Std. Error\"], 3),\n  z = round(test_coef[, \"z value\"], 2),\n  p = round(test_coef[, \"Pr(>|z|)\"], 4)\n) %>%\n  mutate(Sig = case_when(\n    p < 0.001 ~ \"***\",\n    p < 0.01 ~ \"**\",\n    p < 0.05 ~ \"*\",\n    TRUE ~ \"\"\n  ))\n\nkable(resultados, caption = \"Coeficientes do Modelo com Covari√°veis\")\n```\n\n::: {.cell-output-display}\n\n\nTable: Coeficientes do Modelo com Covari√°veis\n\n|             |Variavel     | Coeficiente|       EP|     z|      p|Sig |\n|:------------|:------------|-----------:|--------:|-----:|------:|:---|\n|ar1          |ar1          |       0.197|    0.100|  1.97| 0.0490|*   |\n|intercept    |intercept    |  -23753.966| 2752.766| -8.63| 0.0000|*** |\n|horas        |horas        |       2.027|    0.220|  9.20| 0.0000|*** |\n|divida       |divida       |      34.529|   20.190|  1.71| 0.0872|    |\n|idade        |idade        |     342.991|   43.932|  7.81| 0.0000|*** |\n|propaganda   |propaganda   |       0.205|    0.073|  2.79| 0.0053|**  |\n|escolaridade |escolaridade |     -30.384|   41.310| -0.74| 0.4620|    |\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n## üîÆ Previs√µes (Forecasting)\n\n### Sal√°rios Masculinos: 50 Meses √† Frente\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Ajustar modelo\nfit_men <- auto.arima(ts_men)\n\n# Prever 50 meses\nfcast_men <- forecast(fit_men, h = 50)\n\n# Visualizar\nautoplot(fcast_men) +\n  labs(\n    title = \"Previs√£o de Sal√°rios Masculinos (50 meses)\",\n    x = \"Tempo\",\n    y = \"Sal√°rio\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](lista_7_files/figure-html/unnamed-chunk-22-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Sal√°rios Femininos: Compara√ß√£o\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# S√©rie temporal feminina\nts_women <- ts(db_salarios$women,\n               frequency = 12,\n               start = c(1989, 1))\n\n# Modelo e previs√£o\nfit_women <- auto.arima(ts_women)\nfcast_women <- forecast(fit_women, h = 50)\n\n# Visualizar\nautoplot(fcast_women) +\n  labs(\n    title = \"Previs√£o de Sal√°rios Femininos (50 meses)\",\n    x = \"Tempo\",\n    y = \"Sal√°rio\"\n  ) +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](lista_7_files/figure-html/unnamed-chunk-23-1.png){width=960}\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n## ‚úÖ Diagn√≥stico de Res√≠duos\n\n::: callout-important\n## Por que Verificar Res√≠duos?\n\nRes√≠duos devem ser **ru√≠do branco**: - M√©dia zero - Vari√¢ncia constante - Sem autocorrela√ß√£o - Normalmente distribu√≠dos\n\nSe res√≠duos t√™m padr√£o ‚Üí Modelo n√£o capturou toda a informa√ß√£o!\n:::\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncheckresiduals(modelo_auto)\n```\n\n::: {.cell-output-display}\n![](lista_7_files/figure-html/unnamed-chunk-24-1.png){width=960}\n:::\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\tLjung-Box test\n\ndata:  Residuals from ARIMA(1,1,1)\nQ* = 10.891, df = 8, p-value = 0.208\n\nModel df: 2.   Total lags used: 10\n```\n\n\n:::\n:::\n\n\n\n\n\n\n::: {.callout-note collapse=\"true\"}\n## üîç Interpretando Diagn√≥sticos\n\n**Gr√°fico 1 (Res√≠duos ao longo do tempo):** - Deve oscilar aleatoriamente em torno de zero - Sem padr√µes ou tend√™ncias\n\n**Gr√°fico 2 (ACF dos res√≠duos):** - Nenhuma barra significativa (exceto lag 0) - Indica aus√™ncia de autocorrela√ß√£o restante\n\n**Gr√°fico 3 (Histograma):** - Aproximadamente normal - Centrado em zero\n\n**Teste de Ljung-Box:** - p \\> 0.05 ‚Üí Res√≠duos s√£o ru√≠do branco ‚úì\n:::\n\n------------------------------------------------------------------------\n\n## üìö Material Complementar\n\n\n\n\n\n\n{{< video https://www.youtube.com/watch?v=qTQ1YDgyByE title='S√©ries Temporais (ARIMA) - Aula Pr√°tica #7' >}}\n\n\n\n\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n### Recursos Adicionais\n\n::: {.callout-note collapse=\"true\"}\n## üìñ Leituras e V√≠deos Recomendados\n\n**Livros:** - Hyndman & Athanasopoulos. *Forecasting: Principles and Practice*\n\n**Tutoriais Online:** - [Prophet (Facebook)](https://facebook.github.io/prophet/docs/installation.html#r) - [RPubs - Time Series with Prophet](https://rpubs.com/mpleo/timeseries_prophet)\n\n**V√≠deos em Portugu√™s:** - [ARIMA em R - Tutorial Completo](https://www.youtube.com/watch?v=Txuo9JQjnKE) - [Playlist S√©ries Temporais](https://www.youtube.com/watch?v=RJzmHkGWCxs&list=PLEuzmtv9IuT_vg5oE0lQyZR-wgbVeGztt)\n:::\n\n------------------------------------------------------------------------\n\n## üéØ Fluxo de Trabalho ARIMA\n\n::: callout-tip\n## Checklist Passo-a-Passo\n\n1.  **Visualizar** a s√©rie\n2.  **Testar estacionaridade** (ADF, KPSS)\n3.  **Transformar** se necess√°rio (diferencia√ß√£o, Box-Cox)\n4.  **Identificar** p, d, q (ACF, PACF, ou auto.arima)\n5.  **Ajustar** modelo\n6.  **Diagnosticar** res√≠duos\n7.  **Comparar** modelos (AIC, BIC)\n8.  **Prever** valores futuros\n9.  **Validar** com dados holdout\n:::\n\n------------------------------------------------------------------------\n\n## üîß Informa√ß√µes de Sess√£o\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nreport(sessionInfo())\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nAnalyses were conducted using the R Statistical language (version 4.4.2; R Core\nTeam, 2024) on Windows 11 x64 (build 26100), using the packages Rcpp (version\n1.0.14; Eddelbuettel D et al., 2025), lubridate (version 1.9.4; Grolemund G,\nWickham H, 2011), rlang (version 1.1.6; Henry L, Wickham H, 2025), forecast\n(version 9.0.0; Hyndman R et al., 2026), report (version 0.6.3; Makowski D et\nal., 2023), tibble (version 3.3.1; M√ºller K, Wickham H, 2026), foreign (version\n0.8.87; R Core Team, 2024), prophet (version 1.0; Taylor S, Letham B, 2021),\ntseries (version 0.10.59; Trapletti A, Hornik K, 2026), ggplot2 (version 4.0.1;\nWickham H, 2016), forcats (version 1.0.0; Wickham H, 2023), stringr (version\n1.5.1; Wickham H, 2023), tidyverse (version 2.0.0; Wickham H et al., 2019),\ndplyr (version 1.1.4; Wickham H et al., 2023), purrr (version 1.0.4; Wickham H,\nHenry L, 2025), readr (version 2.1.5; Wickham H et al., 2024), tidyr (version\n1.3.1; Wickham H et al., 2024), zoo (version 1.8.14; Zeileis A, Grothendieck G,\n2005), lmtest (version 0.9.40; Zeileis A, Hothorn T, 2002) and kableExtra\n(version 1.4.0; Zhu H, 2024).\n\nReferences\n----------\n  - Eddelbuettel D, Francois R, Allaire J, Ushey K, Kou Q, Russell N, Ucar I,\nBates D, Chambers J (2025). _Rcpp: Seamless R and C++ Integration_. R package\nversion 1.0.14, <https://CRAN.R-project.org/package=Rcpp>. Eddelbuettel D,\nFran√ßois R (2011). \"Rcpp: Seamless R and C++ Integration.\" _Journal of\nStatistical Software_, *40*(8), 1-18. doi:10.18637/jss.v040.i08\n<https://doi.org/10.18637/jss.v040.i08>. Eddelbuettel D (2013). _Seamless R and\nC++ Integration with Rcpp_. Springer, New York. doi:10.1007/978-1-4614-6868-4\n<https://doi.org/10.1007/978-1-4614-6868-4>, ISBN 978-1-4614-6867-7.\nEddelbuettel D, Balamuta J (2018). \"Extending R with C++: A Brief Introduction\nto Rcpp.\" _The American Statistician_, *72*(1), 28-36.\ndoi:10.1080/00031305.2017.1375990\n<https://doi.org/10.1080/00031305.2017.1375990>.\n  - Grolemund G, Wickham H (2011). \"Dates and Times Made Easy with lubridate.\"\n_Journal of Statistical Software_, *40*(3), 1-25.\n<https://www.jstatsoft.org/v40/i03/>.\n  - Henry L, Wickham H (2025). _rlang: Functions for Base Types and Core R and\n'Tidyverse' Features_. R package version 1.1.6,\n<https://CRAN.R-project.org/package=rlang>.\n  - Hyndman R, Athanasopoulos G, Bergmeir C, Caceres G, Chhay L, O'Hara-Wild M,\nPetropoulos F, Razbash S, Wang E, Yasmeen F (2026). _forecast: Forecasting\nfunctions for time series and linear models_. R package version 9.0.0,\n<https://pkg.robjhyndman.com/forecast/>. Hyndman RJ, Khandakar Y (2008).\n\"Automatic time series forecasting: the forecast package for R.\" _Journal of\nStatistical Software_, *27*(3), 1-22. doi:10.18637/jss.v027.i03\n<https://doi.org/10.18637/jss.v027.i03>.\n  - Makowski D, L√ºdecke D, Patil I, Th√©riault R, Ben-Shachar M, Wiernik B (2023).\n\"Automated Results Reporting as a Practical Tool to Improve Reproducibility and\nMethodological Best Practices Adoption.\" _CRAN_.\ndoi:10.32614/CRAN.package.report\n<https://doi.org/10.32614/CRAN.package.report>,\n<https://easystats.github.io/report/>.\n  - M√ºller K, Wickham H (2026). _tibble: Simple Data Frames_. R package version\n3.3.1, <https://CRAN.R-project.org/package=tibble>.\n  - R Core Team (2024). _foreign: Read Data Stored by 'Minitab', 'S', 'SAS',\n'SPSS', 'Stata', 'Systat', 'Weka', 'dBase', ..._. R package version 0.8-87,\n<https://CRAN.R-project.org/package=foreign>.\n  - R Core Team (2024). _R: A Language and Environment for Statistical\nComputing_. R Foundation for Statistical Computing, Vienna, Austria.\n<https://www.R-project.org/>.\n  - Taylor S, Letham B (2021). _prophet: Automatic Forecasting Procedure_. R\npackage version 1.0, <https://CRAN.R-project.org/package=prophet>.\n  - Trapletti A, Hornik K (2026). _tseries: Time Series Analysis and\nComputational Finance_. R package version 0.10-59,\n<https://CRAN.R-project.org/package=tseries>.\n  - Wickham H (2016). _ggplot2: Elegant Graphics for Data Analysis_.\nSpringer-Verlag New York. ISBN 978-3-319-24277-4,\n<https://ggplot2.tidyverse.org>.\n  - Wickham H (2023). _forcats: Tools for Working with Categorical Variables\n(Factors)_. R package version 1.0.0,\n<https://CRAN.R-project.org/package=forcats>.\n  - Wickham H (2023). _stringr: Simple, Consistent Wrappers for Common String\nOperations_. R package version 1.5.1,\n<https://CRAN.R-project.org/package=stringr>.\n  - Wickham H, Averick M, Bryan J, Chang W, McGowan LD, Fran√ßois R, Grolemund G,\nHayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E, Bache SM, M√ºller K,\nOoms J, Robinson D, Seidel DP, Spinu V, Takahashi K, Vaughan D, Wilke C, Woo K,\nYutani H (2019). \"Welcome to the tidyverse.\" _Journal of Open Source Software_,\n*4*(43), 1686. doi:10.21105/joss.01686 <https://doi.org/10.21105/joss.01686>.\n  - Wickham H, Fran√ßois R, Henry L, M√ºller K, Vaughan D (2023). _dplyr: A Grammar\nof Data Manipulation_. R package version 1.1.4,\n<https://CRAN.R-project.org/package=dplyr>.\n  - Wickham H, Henry L (2025). _purrr: Functional Programming Tools_. R package\nversion 1.0.4, <https://CRAN.R-project.org/package=purrr>.\n  - Wickham H, Hester J, Bryan J (2024). _readr: Read Rectangular Text Data_. R\npackage version 2.1.5, <https://CRAN.R-project.org/package=readr>.\n  - Wickham H, Vaughan D, Girlich M (2024). _tidyr: Tidy Messy Data_. R package\nversion 1.3.1, <https://CRAN.R-project.org/package=tidyr>.\n  - Zeileis A, Grothendieck G (2005). \"zoo: S3 Infrastructure for Regular and\nIrregular Time Series.\" _Journal of Statistical Software_, *14*(6), 1-27.\ndoi:10.18637/jss.v014.i06 <https://doi.org/10.18637/jss.v014.i06>.\n  - Zeileis A, Hothorn T (2002). \"Diagnostic Checking in Regression\nRelationships.\" _R News_, *2*(3), 7-10.\n<https://CRAN.R-project.org/doc/Rnews/>.\n  - Zhu H (2024). _kableExtra: Construct Complex Table with 'kable' and Pipe\nSyntax_. R package version 1.4.0,\n<https://CRAN.R-project.org/package=kableExtra>.\n```\n\n\n:::\n:::\n\n\n\n\n\n\n------------------------------------------------------------------------\n\n::: {.callout-note appearance=\"simple\"}\n## üéì Resumo da Lista 7\n\nNesta lista voc√™:\n\n‚úÖ Compreendeu **conceitos fundamentais** de s√©ries temporais\\\n‚úÖ Avaliou **estacionaridade** visualmente e com testes\\\n‚úÖ Aplicou **diferencia√ß√£o** para tornar s√©ries estacion√°rias\\\n‚úÖ Ajustou modelos **ARIMA** manualmente e com auto.arima\\\n‚úÖ Incluiu **covari√°veis** em modelos ARIMA\\\n‚úÖ Fez **previs√µes** futuras com intervalos de confian√ßa\\\n‚úÖ Diagnosticou **res√≠duos** para validar modelos\n\n**Conceitos-chave:** - ARIMA(p,d,q): AR + Diferencia√ß√£o + MA - Estacionaridade: pr√©-requisito para ARIMA - ADF test: teste formal de estacionaridade - ACF/PACF: identificar ordem do modelo - auto.arima(): sele√ß√£o autom√°tica de modelo - Res√≠duos: devem ser ru√≠do branco\n\n**Pr√≥ximos passos:** - Explorar SARIMA (sazonal) - Modelos Prophet para padr√µes complexos - VAR para m√∫ltiplas s√©ries interdependentes - Machine Learning para s√©ries temporais\n:::\n",
    "supporting": [
      "lista_7_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}