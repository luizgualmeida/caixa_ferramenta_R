<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Técnicas e Métodos de Pesquisa no R - 7&nbsp; Lista 6.1 - Cox tempo dependente</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./ARIMA.html" rel="next">
<link href="./lista_6.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./survival.html">SURVIVAL</a></li><li class="breadcrumb-item"><a href="./lista_6_1.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Lista 6.1 - Cox tempo dependente</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Técnicas e Métodos de Pesquisa no R</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introdução</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./lms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GLM, GEE, GMM, GzLM</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lista_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Lista 1 - GLM, GEE e GMM</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lista_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Lista 2 - GEE</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lista_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lista 3 - Matriz de Covariância</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lista_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Lista 4 - GMM e ICC</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lista_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Lista 5 - Generalized Linear Model Aula Prática</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./survival.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SURVIVAL</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lista_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lista 6 - Kaplan-Meier e Cox Regression</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lista_6_1.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Lista 6.1 - Cox tempo dependente</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./ARIMA.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ARIMA</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lista_7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lista 7 - Séries Temporais (ARIMA)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./SEM.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SEM</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lista_8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Lista 8 - CFA e Path Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lista_8_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Lista 8.1 - Moderação e Mediação</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#carregando-pacotes" id="toc-carregando-pacotes" class="nav-link active" data-scroll-target="#carregando-pacotes"><span class="header-section-number">7.1</span> Carregando pacotes</a></li>
  <li><a href="#carregando-os-dados-e-modificando-o-tipo-de-variável" id="toc-carregando-os-dados-e-modificando-o-tipo-de-variável" class="nav-link" data-scroll-target="#carregando-os-dados-e-modificando-o-tipo-de-variável"><span class="header-section-number">7.2</span> Carregando os dados e modificando o tipo de variável</a></li>
  <li><a href="#criando-a-estrutura-de-dados" id="toc-criando-a-estrutura-de-dados" class="nav-link" data-scroll-target="#criando-a-estrutura-de-dados"><span class="header-section-number">7.3</span> Criando a estrutura de dados</a>
  <ul class="collapse">
  <li><a href="#tábua-de-vida" id="toc-tábua-de-vida" class="nav-link" data-scroll-target="#tábua-de-vida">Tábua de vida</a></li>
  <li><a href="#gráfico-kaplan-meir" id="toc-gráfico-kaplan-meir" class="nav-link" data-scroll-target="#gráfico-kaplan-meir">Gráfico Kaplan-Meir</a></li>
  <li><a href="#tabela-com-sobrevida-em-tempos-espcíficos." id="toc-tabela-com-sobrevida-em-tempos-espcíficos." class="nav-link" data-scroll-target="#tabela-com-sobrevida-em-tempos-espcíficos.">Tabela com Sobrevida em tempos espcíficos.</a></li>
  <li><a href="#log-rank" id="toc-log-rank" class="nav-link" data-scroll-target="#log-rank">Log-rank</a></li>
  <li><a href="#gehan-breslow" id="toc-gehan-breslow" class="nav-link" data-scroll-target="#gehan-breslow">Gehan-Breslow</a></li>
  <li><a href="#tarone-ware" id="toc-tarone-ware" class="nav-link" data-scroll-target="#tarone-ware">Tarone-Ware</a></li>
  <li><a href="#peto-peto" id="toc-peto-peto" class="nav-link" data-scroll-target="#peto-peto">Peto-Peto</a></li>
  </ul></li>
  <li><a href="#cox-regression" id="toc-cox-regression" class="nav-link" data-scroll-target="#cox-regression"><span class="header-section-number">7.4</span> Cox regression</a>
  <ul class="collapse">
  <li><a href="#verificando-os-pressupostos-da-cox-regression" id="toc-verificando-os-pressupostos-da-cox-regression" class="nav-link" data-scroll-target="#verificando-os-pressupostos-da-cox-regression">Verificando os pressupostos da Cox regression</a></li>
  </ul></li>
  <li><a href="#plot-dos-resíduos-de-schoenfeld" id="toc-plot-dos-resíduos-de-schoenfeld" class="nav-link" data-scroll-target="#plot-dos-resíduos-de-schoenfeld"><span class="header-section-number">7.5</span> Plot dos resíduos de Schoenfeld</a></li>
  <li><a href="#plots-do-modelo" id="toc-plots-do-modelo" class="nav-link" data-scroll-target="#plots-do-modelo"><span class="header-section-number">7.6</span> Plots do modelo</a>
  <ul class="collapse">
  <li><a href="#forest-plot" id="toc-forest-plot" class="nav-link" data-scroll-target="#forest-plot">Forest plot</a></li>
  <li><a href="#gráfico-de-sobrevida" id="toc-gráfico-de-sobrevida" class="nav-link" data-scroll-target="#gráfico-de-sobrevida">Gráfico de sobrevida</a></li>
  </ul></li>
  <li><a href="#cox-tempo-dependente" id="toc-cox-tempo-dependente" class="nav-link" data-scroll-target="#cox-tempo-dependente"><span class="header-section-number">7.7</span> Cox tempo-dependente</a>
  <ul class="collapse">
  <li><a href="#covariáveis-tempo-dependente" id="toc-covariáveis-tempo-dependente" class="nav-link" data-scroll-target="#covariáveis-tempo-dependente">Covariáveis tempo dependente</a></li>
  <li><a href="#sem-variável-tempo-dependente" id="toc-sem-variável-tempo-dependente" class="nav-link" data-scroll-target="#sem-variável-tempo-dependente">Sem variável tempo dependente</a></li>
  <li><a href="#mudança-linear" id="toc-mudança-linear" class="nav-link" data-scroll-target="#mudança-linear">Mudança linear</a></li>
  <li><a href="#modelo-log" id="toc-modelo-log" class="nav-link" data-scroll-target="#modelo-log">Modelo log</a></li>
  <li><a href="#modelo-temporal" id="toc-modelo-temporal" class="nav-link" data-scroll-target="#modelo-temporal">Modelo temporal</a></li>
  <li><a href="#índices-de-aderência-aic-e-bic" id="toc-índices-de-aderência-aic-e-bic" class="nav-link" data-scroll-target="#índices-de-aderência-aic-e-bic">Índices de aderência (AIC e BIC)</a></li>
  <li><a href="#resíduos-de-schoenfeld" id="toc-resíduos-de-schoenfeld" class="nav-link" data-scroll-target="#resíduos-de-schoenfeld">Resíduos de Schoenfeld</a></li>
  <li><a href="#interpretando-os-resultados." id="toc-interpretando-os-resultados." class="nav-link" data-scroll-target="#interpretando-os-resultados.">Interpretando os resultados.</a></li>
  <li><a href="#observações-spss-e-r" id="toc-observações-spss-e-r" class="nav-link" data-scroll-target="#observações-spss-e-r">Observações SPSS e R</a></li>
  </ul></li>
  <li><a href="#covariando-para-idade-e-raça" id="toc-covariando-para-idade-e-raça" class="nav-link" data-scroll-target="#covariando-para-idade-e-raça"><span class="header-section-number">7.8</span> Covariando para idade e raça</a>
  <ul class="collapse">
  <li><a href="#modelo-completo-cox-tempo-dependente" id="toc-modelo-completo-cox-tempo-dependente" class="nav-link" data-scroll-target="#modelo-completo-cox-tempo-dependente">Modelo completo Cox tempo dependente</a></li>
  <li><a href="#segmentando-o-banco-de-dados-por-raça" id="toc-segmentando-o-banco-de-dados-por-raça" class="nav-link" data-scroll-target="#segmentando-o-banco-de-dados-por-raça">Segmentando o banco de dados por raça</a></li>
  <li><a href="#km-por-raça-branco" id="toc-km-por-raça-branco" class="nav-link" data-scroll-target="#km-por-raça-branco">KM por raça = Branco</a></li>
  <li><a href="#modelo-completo-para-brancos" id="toc-modelo-completo-para-brancos" class="nav-link" data-scroll-target="#modelo-completo-para-brancos">Modelo completo para brancos</a></li>
  <li><a href="#km-por-raça-negropardo" id="toc-km-por-raça-negropardo" class="nav-link" data-scroll-target="#km-por-raça-negropardo">KM por raça = negro/pardo</a></li>
  <li><a href="#modelo-completo-para-pardonegro" id="toc-modelo-completo-para-pardonegro" class="nav-link" data-scroll-target="#modelo-completo-para-pardonegro">Modelo completo para pardo/negro</a></li>
  </ul></li>
  <li><a href="#lista-6.1-resolvida-no-spss" id="toc-lista-6.1-resolvida-no-spss" class="nav-link" data-scroll-target="#lista-6.1-resolvida-no-spss"><span class="header-section-number">7.9</span> Lista 6.1 resolvida no SPSS</a></li>
  <li><a href="#extras" id="toc-extras" class="nav-link" data-scroll-target="#extras"><span class="header-section-number">7.10</span> Extras</a>
  <ul class="collapse">
  <li><a href="#mais-gráficos" id="toc-mais-gráficos" class="nav-link" data-scroll-target="#mais-gráficos">Mais gráficos</a></li>
  <li><a href="#cox-tempo-dependente-log" id="toc-cox-tempo-dependente-log" class="nav-link" data-scroll-target="#cox-tempo-dependente-log">Cox tempo dependente log</a></li>
  </ul></li>
  <li><a href="#referencias" id="toc-referencias" class="nav-link" data-scroll-target="#referencias"><span class="header-section-number">7.11</span> Referencias</a></li>
  <li><a href="#códigos-não-utilizados" id="toc-códigos-não-utilizados" class="nav-link" data-scroll-target="#códigos-não-utilizados"><span class="header-section-number">7.12</span> Códigos não utilizados</a>
  <ul class="collapse">
  <li><a href="#tempo-em-diálise-como-covariante-tempo-dependente" id="toc-tempo-em-diálise-como-covariante-tempo-dependente" class="nav-link" data-scroll-target="#tempo-em-diálise-como-covariante-tempo-dependente">Tempo em diálise como covariante tempo-dependente</a></li>
  </ul></li>
  <li><a href="#versões-dos-pacotes" id="toc-versões-dos-pacotes" class="nav-link" data-scroll-target="#versões-dos-pacotes"><span class="header-section-number">7.13</span> Versões dos pacotes</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Lista 6.1 - Cox tempo dependente</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>O banco de dados Cox_tempo_dependente1.sav apresenta os dados de 628 pacientes de um serviço de nefrologia. Os pacientes foram acompanhados por pouco mais de 1000 dias e durante este período alguns pacientes fizeram transplante renal (treat=1). Gostariamos de saber se a realização de transplante aumenta significativamente a sobrevida destes pacientes em relação àqueles que não fizeram. Com base nestas informações, responda as questões abaixo</p>
<section id="carregando-pacotes" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="carregando-pacotes"><span class="header-section-number">7.1</span> Carregando pacotes</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flexplot)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(foreign)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rempsyc)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(easystats)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Específicos para survival</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsurvfit)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survminer)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survMisc)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PHInfiniteEstimates)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(coin)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(condSURV)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="carregando-os-dados-e-modificando-o-tipo-de-variável" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="carregando-os-dados-e-modificando-o-tipo-de-variável"><span class="header-section-number">7.2</span> Carregando os dados e modificando o tipo de variável</h2>
<p>Mantendo as boas práticas das análises, logo após carregar os dados em uma variável, vamos verificar os tipos de variávels que temos em nosso banco.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>original <span class="ot">=</span> <span class="fu">read.spss</span>(<span class="st">"Cox tempo dependente 2_1.sav"</span>, <span class="at">to.data.frame=</span><span class="cn">TRUE</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(original)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 628
Columns: 7
$ ID            &lt;dbl&gt; 112, 91, 113, 150, 22, 139, 104, 590, 189, 171, 338, 492…
$ age           &lt;dbl&gt; 35, 33, 35, 31, 33, 43, 25, 35, 29, 27, 35, 23, 24, 23, …
$ race          &lt;fct&gt; branco, branco, branco, branco, branco, branco, branco, …
$ treat         &lt;dbl&gt; 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1,…
$ Tempo_dialise &lt;dbl&gt; 51, 67, 88, 156, 12, 139, 90, 25, 187, 34, 29, 78, 63, 8…
$ time          &lt;dbl&gt; 1172, 762, 734, 720, 659, 658, 655, 654, 634, 630, 621, …
$ morte         &lt;fct&gt; Não, Não, Não, Não, Não, Não, Não, Não, Não, Não, Não, N…</code></pre>
</div>
</div>
<p>Novamente podemos observar que o evento de interesse (morte) está como um fator. Vamos modificar como já fizemos a lista 6 e também já vamos ajustar a variável “treat” para que ela seja um fator e não um número.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>db <span class="ot">&lt;-</span> original <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">morte =</span> <span class="fu">as.integer</span>(morte <span class="sc">==</span> <span class="st">"Sim"</span>), <span class="co"># para transformar sim e não em 1 e 0, respectivamente</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">treat =</span> <span class="fu">as.factor</span>(treat)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(db)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 628
Columns: 7
$ ID            &lt;dbl&gt; 112, 91, 113, 150, 22, 139, 104, 590, 189, 171, 338, 492…
$ age           &lt;dbl&gt; 35, 33, 35, 31, 33, 43, 25, 35, 29, 27, 35, 23, 24, 23, …
$ race          &lt;fct&gt; branco, branco, branco, branco, branco, branco, branco, …
$ treat         &lt;fct&gt; 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1,…
$ Tempo_dialise &lt;dbl&gt; 51, 67, 88, 156, 12, 139, 90, 25, 187, 34, 29, 78, 63, 8…
$ time          &lt;dbl&gt; 1172, 762, 734, 720, 659, 658, 655, 654, 634, 630, 621, …
$ morte         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</code></pre>
</div>
</div>
<p>Feito! Vamos também verificar se há presença de dados faltantes e em quais variáveis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificando NAs</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>resumo_nas <span class="ot">&lt;-</span> db <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">nas_age =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(age)),</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">nas_race =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(race)),</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">nas_treat =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(treat)),</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">nas_t_dialise =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Tempo_dialise)),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">nas_time =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(time)),</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">nas_morte =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(morte)),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(resumo_nas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">nas_age</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nas_race</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nas_treat</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nas_t_dialise</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nas_time</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nas_morte</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Até chegar na Cox tempo dependente, vamos repetir basicamente o que já fizemos no <a href="lista_6.html">Capítulo&nbsp;<span>6</span></a></p>
</section>
<section id="criando-a-estrutura-de-dados" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="criando-a-estrutura-de-dados"><span class="header-section-number">7.3</span> Criando a estrutura de dados</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a survival object</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>surv_obj <span class="ot">&lt;-</span> <span class="fu">Surv</span>(<span class="at">time =</span> db<span class="sc">$</span>time, <span class="at">event =</span> db<span class="sc">$</span>morte)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="tábua-de-vida" class="level3">
<h3 class="anchored" data-anchor-id="tábua-de-vida">Tábua de vida</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create survival curve</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>fit1 <span class="ot">&lt;-</span> <span class="fu">survfit</span>(surv_obj <span class="sc">~</span> treat, <span class="at">data =</span> db)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(<span class="fu">head</span>(<span class="fu">tidy</span>(fit1)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">time</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n.risk</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n.event</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n.censor</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std.error</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">conf.high</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">conf.low</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">strata</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">320</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.993750</td>
<td style="text-align: right;">0.0044333</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: right;">0.9851526</td>
<td style="text-align: left;">treat=0</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">318</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.987500</td>
<td style="text-align: right;">0.0062894</td>
<td style="text-align: right;">0.9997483</td>
<td style="text-align: right;">0.9754017</td>
<td style="text-align: left;">treat=0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">316</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.984375</td>
<td style="text-align: right;">0.0070430</td>
<td style="text-align: right;">0.9980575</td>
<td style="text-align: right;">0.9708801</td>
<td style="text-align: left;">treat=0</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">315</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.978125</td>
<td style="text-align: right;">0.0083599</td>
<td style="text-align: right;">0.9942837</td>
<td style="text-align: right;">0.9622289</td>
<td style="text-align: left;">treat=0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: right;">313</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.971875</td>
<td style="text-align: right;">0.0095097</td>
<td style="text-align: right;">0.9901593</td>
<td style="text-align: right;">0.9539283</td>
<td style="text-align: left;">treat=0</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: right;">311</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.968750</td>
<td style="text-align: right;">0.0100402</td>
<td style="text-align: right;">0.9880024</td>
<td style="text-align: right;">0.9498728</td>
<td style="text-align: left;">treat=0</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="gráfico-kaplan-meir" class="level3">
<h3 class="anchored" data-anchor-id="gráfico-kaplan-meir">Gráfico Kaplan-Meir</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>km_plot <span class="ot">=</span> <span class="fu">survfit2</span>(surv_obj <span class="sc">~</span> treat, <span class="at">data =</span> db) <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy_survfit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> estimate,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">min =</span> conf.low, <span class="at">ymax =</span> conf.low,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> strata, <span class="at">fill =</span> strata)) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_step</span>()</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>km_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Podemos ajustar as configurações do eixo X para exibir uma escala temporal com intervalos de 50 unidades.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># km_plot2 = fit1 %&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   tidy_survfit() %&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   ggplot(aes(x = time, y = estimate,</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co">#              min = conf.low, ymax = conf.low,</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co">#              color = strata, fill = strata)) +</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_step()</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>km_plot2 <span class="ot">=</span> fit1 <span class="sc">%&gt;%</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tidy_survfit</span>() <span class="sc">%&gt;%</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> estimate,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">min =</span> conf.low, <span class="at">ymax =</span> conf.low,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> strata, <span class="at">fill =</span> strata)) <span class="sc">+</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_step</span>() <span class="sc">+</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fu">max</span>(fit1<span class="sc">$</span>time), <span class="at">by =</span> <span class="dv">50</span>))</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>km_plot2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="tabela-com-sobrevida-em-tempos-espcíficos." class="level3">
<h3 class="anchored" data-anchor-id="tabela-com-sobrevida-em-tempos-espcíficos.">Tabela com Sobrevida em tempos espcíficos.</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>tbl_survfit_ex3 <span class="ot">&lt;-</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">survfit</span>(surv_obj <span class="sc">~</span> <span class="dv">1</span>, db),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">survfit</span>(surv_obj <span class="sc">~</span> treat, db)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tbl_survfit</span>(<span class="at">times =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">600</span>))</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>tbl_survfit_ex3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="qeayjdrzqo" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qeayjdrzqo table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qeayjdrzqo thead, #qeayjdrzqo tbody, #qeayjdrzqo tfoot, #qeayjdrzqo tr, #qeayjdrzqo td, #qeayjdrzqo th {
  border-style: none;
}

#qeayjdrzqo p {
  margin: 0;
  padding: 0;
}

#qeayjdrzqo .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qeayjdrzqo .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qeayjdrzqo .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qeayjdrzqo .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qeayjdrzqo .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qeayjdrzqo .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qeayjdrzqo .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qeayjdrzqo .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qeayjdrzqo .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qeayjdrzqo .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qeayjdrzqo .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qeayjdrzqo .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qeayjdrzqo .gt_spanner_row {
  border-bottom-style: hidden;
}

#qeayjdrzqo .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qeayjdrzqo .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qeayjdrzqo .gt_from_md > :first-child {
  margin-top: 0;
}

#qeayjdrzqo .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qeayjdrzqo .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qeayjdrzqo .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qeayjdrzqo .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qeayjdrzqo .gt_row_group_first td {
  border-top-width: 2px;
}

#qeayjdrzqo .gt_row_group_first th {
  border-top-width: 2px;
}

#qeayjdrzqo .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qeayjdrzqo .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qeayjdrzqo .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qeayjdrzqo .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qeayjdrzqo .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qeayjdrzqo .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qeayjdrzqo .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qeayjdrzqo .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qeayjdrzqo .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qeayjdrzqo .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qeayjdrzqo .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qeayjdrzqo .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qeayjdrzqo .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qeayjdrzqo .gt_left {
  text-align: left;
}

#qeayjdrzqo .gt_center {
  text-align: center;
}

#qeayjdrzqo .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qeayjdrzqo .gt_font_normal {
  font-weight: normal;
}

#qeayjdrzqo .gt_font_bold {
  font-weight: bold;
}

#qeayjdrzqo .gt_font_italic {
  font-style: italic;
}

#qeayjdrzqo .gt_super {
  font-size: 65%;
}

#qeayjdrzqo .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qeayjdrzqo .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qeayjdrzqo .gt_indent_1 {
  text-indent: 5px;
}

#qeayjdrzqo .gt_indent_2 {
  text-indent: 10px;
}

#qeayjdrzqo .gt_indent_3 {
  text-indent: 15px;
}

#qeayjdrzqo .gt_indent_4 {
  text-indent: 20px;
}

#qeayjdrzqo .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>Time 100</strong>"><strong>Time 100</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>Time 600</strong>"><strong>Time 600</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">Overall</td>
<td headers="stat_1" class="gt_row gt_center">66% (63%, 70%)</td>
<td headers="stat_2" class="gt_row gt_center">19% (16%, 22%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">treat</td>
<td headers="stat_1" class="gt_row gt_center"><br></td>
<td headers="stat_2" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;0</td>
<td headers="stat_1" class="gt_row gt_center">61% (56%, 66%)</td>
<td headers="stat_2" class="gt_row gt_center">16% (13%, 21%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;1</td>
<td headers="stat_1" class="gt_row gt_center">72% (67%, 77%)</td>
<td headers="stat_2" class="gt_row gt_center">21% (17%, 26%)</td></tr>
  </tbody>
  
  
</table>
</div>
</div>
</div>
</section>
<section id="log-rank" class="level3">
<h3 class="anchored" data-anchor-id="log-rank">Log-rank</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">::</span><span class="fu">logrank_test</span>(surv_obj <span class="sc">~</span> treat, <span class="at">data =</span> db, <span class="at">type =</span> <span class="st">"logrank"</span> ) <span class="co"># padrão é o log-rank</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Asymptotic Two-Sample Logrank Test

data:  surv_obj by treat (0, 1)
Z = -2.5984, p-value = 0.009365
alternative hypothesis: true theta is not equal to 1</code></pre>
</div>
</div>
</section>
<section id="gehan-breslow" class="level3">
<h3 class="anchored" data-anchor-id="gehan-breslow">Gehan-Breslow</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">::</span><span class="fu">logrank_test</span>(surv_obj <span class="sc">~</span> treat ,<span class="at">data =</span> db, <span class="at">type =</span> <span class="st">"Gehan-Breslow"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Asymptotic Two-Sample Gehan-Breslow Test

data:  surv_obj by treat (0, 1)
Z = -3.0713, p-value = 0.002132
alternative hypothesis: true theta is not equal to 1</code></pre>
</div>
</div>
</section>
<section id="tarone-ware" class="level3">
<h3 class="anchored" data-anchor-id="tarone-ware">Tarone-Ware</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">::</span><span class="fu">logrank_test</span>(surv_obj <span class="sc">~</span> treat ,<span class="at">data =</span> db, <span class="at">type =</span> <span class="st">"Tarone-Ware"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Asymptotic Two-Sample Tarone-Ware Test

data:  surv_obj by treat (0, 1)
Z = -2.9622, p-value = 0.003055
alternative hypothesis: true theta is not equal to 1</code></pre>
</div>
</div>
</section>
<section id="peto-peto" class="level3">
<h3 class="anchored" data-anchor-id="peto-peto">Peto-Peto</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">::</span><span class="fu">logrank_test</span>(surv_obj <span class="sc">~</span> treat ,<span class="at">data =</span> db, <span class="at">type =</span> <span class="st">"Peto-Peto"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Asymptotic Two-Sample Peto-Peto Test

data:  surv_obj by treat (0, 1)
Z = -3.0608, p-value = 0.002207
alternative hypothesis: true theta is not equal to 1</code></pre>
</div>
</div>
</section>
</section>
<section id="cox-regression" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="cox-regression"><span class="header-section-number">7.4</span> Cox regression</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cox regression ======================================================</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit the model</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>cox_res <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> db<span class="sc">$</span>time, <span class="at">event =</span> db<span class="sc">$</span>morte) <span class="sc">~</span> treat, <span class="at">data =</span> db)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="do">### Para testar todas as variáveis</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#cox_res &lt;- coxph(Surv(time = db$time, event = db$morte2) ~ treat + age + Tempo_dialise, data = db)</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="fu">tbl_regression</span>(cox_res, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="kovzhddvrm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#kovzhddvrm table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#kovzhddvrm thead, #kovzhddvrm tbody, #kovzhddvrm tfoot, #kovzhddvrm tr, #kovzhddvrm td, #kovzhddvrm th {
  border-style: none;
}

#kovzhddvrm p {
  margin: 0;
  padding: 0;
}

#kovzhddvrm .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#kovzhddvrm .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#kovzhddvrm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#kovzhddvrm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#kovzhddvrm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kovzhddvrm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kovzhddvrm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#kovzhddvrm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#kovzhddvrm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#kovzhddvrm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#kovzhddvrm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#kovzhddvrm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#kovzhddvrm .gt_spanner_row {
  border-bottom-style: hidden;
}

#kovzhddvrm .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#kovzhddvrm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#kovzhddvrm .gt_from_md > :first-child {
  margin-top: 0;
}

#kovzhddvrm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#kovzhddvrm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#kovzhddvrm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#kovzhddvrm .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#kovzhddvrm .gt_row_group_first td {
  border-top-width: 2px;
}

#kovzhddvrm .gt_row_group_first th {
  border-top-width: 2px;
}

#kovzhddvrm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kovzhddvrm .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#kovzhddvrm .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#kovzhddvrm .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kovzhddvrm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#kovzhddvrm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#kovzhddvrm .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#kovzhddvrm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#kovzhddvrm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#kovzhddvrm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kovzhddvrm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kovzhddvrm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#kovzhddvrm .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#kovzhddvrm .gt_left {
  text-align: left;
}

#kovzhddvrm .gt_center {
  text-align: center;
}

#kovzhddvrm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#kovzhddvrm .gt_font_normal {
  font-weight: normal;
}

#kovzhddvrm .gt_font_bold {
  font-weight: bold;
}

#kovzhddvrm .gt_font_italic {
  font-style: italic;
}

#kovzhddvrm .gt_super {
  font-size: 65%;
}

#kovzhddvrm .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#kovzhddvrm .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#kovzhddvrm .gt_indent_1 {
  text-indent: 5px;
}

#kovzhddvrm .gt_indent_2 {
  text-indent: 10px;
}

#kovzhddvrm .gt_indent_3 {
  text-indent: 15px;
}

#kovzhddvrm .gt_indent_4 {
  text-indent: 20px;
}

#kovzhddvrm .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>HR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>HR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-value</strong>"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">treat</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;0</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;1</td>
<td headers="estimate" class="gt_row gt_center">0.79</td>
<td headers="ci" class="gt_row gt_center">0.67, 0.94</td>
<td headers="p.value" class="gt_row gt_center">0.009</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> HR = Hazard Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<section id="verificando-os-pressupostos-da-cox-regression" class="level3">
<h3 class="anchored" data-anchor-id="verificando-os-pressupostos-da-cox-regression">Verificando os pressupostos da Cox regression</h3>
<p>Relembrando a análise dos riscos proporcionais com base nos resíduos de Schoenfeld:</p>
<ul>
<li><p>p-val &lt; 0,05: há evidências <strong>contra</strong> a pressuposto de riscos proporcionais, os HRs <strong>não</strong> são constantes ao longo do tempo</p></li>
<li><p>chisq: quanto maior o valor, mais forte a violação dos pressupostos</p></li>
</ul>
</section>
</section>
<section id="plot-dos-resíduos-de-schoenfeld" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="plot-dos-resíduos-de-schoenfeld"><span class="header-section-number">7.5</span> Plot dos resíduos de Schoenfeld</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the Schoenfeld residuals over time for each covariate</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>survminer<span class="sc">::</span><span class="fu">ggcoxzph</span>(<span class="fu">cox.zph</span>(cox_res), <span class="at">point.size =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Se os resíduos mostrarem um padrão claro ao longo do tempo, isso pode indicar uma violação da suposição de riscos proporcionais.</p>
<p>Algumas dicas para ajudar na interpretação:</p>
<ul>
<li><p>Sem Padrão (Resíduos Constantes): Se os resíduos aparecerem aleatoriamente espalhados em torno de zero, sem nenhuma tendência ou padrão claro, isso sugere que a suposição de riscos proporcionais é razoável.</p></li>
<li><p>Tendência Linear: Uma tendência linear (aumentando ou diminuindo) nos resíduos ao longo do tempo pode sugerir uma violação da suposição de riscos proporcionais. Por exemplo, se os resíduos forem consistentemente positivos ou negativos ao longo do tempo, isso indica um efeito dependente do tempo.</p></li>
<li><p>Padrão Não Linear: Se os resíduos exibirem um padrão não linear ou formatos específicos (por exemplo, formato de U, formato de V), isso pode indicar desvios dos riscos proporcionais.</p></li>
<li><p>Paralelismo: Paralelismo significa que a propagação e distribuição dos resíduos são relativamente constantes ao longo do tempo. Se os resíduos aumentarem ou diminuirem ao longo do tempo, isso pode sugerir uma violação da suposição.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcoxdiagnostics</span>(cox_res, <span class="at">type =</span> <span class="st">"dfbeta"</span>, <span class="at">linear.predictions =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `gather_()` was deprecated in tidyr 1.2.0.
ℹ Please use `gather()` instead.
ℹ The deprecated feature was likely used in the survminer package.
  Please report the issue at &lt;https://github.com/kassambara/survminer/issues&gt;.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Não é importante para variáveis categóricas, mas fica o código para eventual consulta.</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcoxdiagnostics</span>(cox_res, <span class="at">type =</span> <span class="st">"deviance"</span>, <span class="at">linear.predictions =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="plots-do-modelo" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="plots-do-modelo"><span class="header-section-number">7.6</span> Plots do modelo</h2>
<section id="forest-plot" class="level3">
<h3 class="anchored" data-anchor-id="forest-plot">Forest plot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Forest plots ================================================================</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualise your Cox model results</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggforest</span>(cox_res, <span class="at">data =</span> db)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="gráfico-de-sobrevida" class="level3">
<h3 class="anchored" data-anchor-id="gráfico-de-sobrevida">Gráfico de sobrevida</h3>
<p>Assim como fizemos no exercício anterior, precisamos criar um novo banco de dados para visualizar o gráfico da Regressão de Cox:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Precisa ser feito apenas com uma variável</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>cox_res2 <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> db<span class="sc">$</span>time, <span class="at">event =</span> db<span class="sc">$</span>morte) <span class="sc">~</span> treat, <span class="at">data =</span> db)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando o novo banco de dados</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>new_df <span class="ot">&lt;-</span> <span class="fu">with</span>(db,</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>               <span class="fu">data.frame</span>(<span class="at">treat =</span> <span class="fu">c</span>(<span class="st">"0"</span>, <span class="st">"1"</span>))</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>E precisamos transformar a variável <code>treat</code> em um fator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>new_df<span class="sc">$</span>treat <span class="ot">=</span> <span class="fu">as.factor</span>(new_df<span class="sc">$</span>treat)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(new_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">treat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">1</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Criando os dados com base no modelo e plotando o gráfico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>fit_cox <span class="ot">&lt;-</span> <span class="fu">survfit</span>(cox_res2, <span class="at">newdata =</span> new_df)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>J <span class="ot">=</span> <span class="fu">ggsurvplot</span>(fit_cox, <span class="at">conf.int =</span> <span class="cn">TRUE</span>, <span class="at">legend.labs=</span><span class="fu">c</span>(<span class="st">"tx=sim"</span>, <span class="st">"tx=não"</span>),</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">data =</span> db)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>J<span class="sc">$</span>plot <span class="ot">=</span> J<span class="sc">$</span>plot <span class="sc">+</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">900</span>, <span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Scale for x is already present.
Adding another scale for x, which will replace the existing scale.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>J</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Reparem na distorção do gráfico em relação à Kaplan-Meir</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>km_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="cox-tempo-dependente" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="cox-tempo-dependente"><span class="header-section-number">7.7</span> Cox tempo-dependente</h2>
<p>Já vimos que os riscos não são proporcionais neste caso. Porém, nem tudo está perdido. Podemos finalmente agora falar da Cox Tempo-dependente.</p>
<p>O primeiro passo é identificar um possível fator que esteja afetando a proporcionalidade dos riscos no estudo. Pela literatura tempos que o tempo em diálise afeta os riscos entre pessoas que fizeram ou não o transplante de rim. Daí a importância de entender bem o fenômeno que estamos estudando. Como bons pesquisadores, também coletamos o tempo em diálise e esses dados estão no banco de dados</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(db<span class="sc">$</span>Tempo_dialise)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> num [1:628] 51 67 88 156 12 139 90 25 187 34 ...</code></pre>
</div>
</div>
<p>A variável é numérica e contínua, logo ela já está formatada para continuarmos com a análise.</p>
<p>Não existe regras escritas na pedra para contornar o problema de não proporcionalidade. Vamos mostrar uma abordagem aqui. Não deixe de ver as referências para outros casos.</p>
<section id="covariáveis-tempo-dependente" class="level3">
<h3 class="anchored" data-anchor-id="covariáveis-tempo-dependente">Covariáveis tempo dependente</h3>
<p>No R, há diversas formas de indicar uma variável como tempo-dependente. A escolha do método dependerá da natureza da variável independente e da sua relação teórica com o evento em estudo. A função <code>coxph()</code> oferece a opção de utilizar o argumento <code>tt()</code>, o qual especifica qual variável independente será considerada uma covariável tempo-dependente e como o coeficiente associado a ela deve ser modificado ao longo do tempo.</p>
<p>O modelo deve seguir a seguinte estrutura</p>
<p><code>coxph(Surv(time, event) ~ covariavel1 + covariavel2 + tt(covariavel2), data, tt=function(x,t,…) x*t)</code></p>
<p>Podemos substituir o <code>Surv(time, event)</code> pela variável que salvamos com o objeto survival, <code>surv_obj</code>.</p>
<p>A função tt (<code>function(x,t,…)___)</code> pode assumir alguns modelos. A seguir trazemos três exemplos mais utilizados em diversas análises:</p>
<ul>
<li><p>x*t permitirá que o coeficiente mude linearmente com o tempo</p></li>
<li><p>x*log(t) permite que o coeficiente mude com o log do tempo</p></li>
<li><p>x*(t&gt;tempo) permite que o coeficiente assuma 2 valores diferentes, um valor quando t&lt;=tempo e outro valor t&gt;tempo</p></li>
</ul>
<p>Vamos gerar vários modelos e avaliá-los comparando os índices de ajuste e os resultados obtidos.</p>
</section>
<section id="sem-variável-tempo-dependente" class="level3">
<h3 class="anchored" data-anchor-id="sem-variável-tempo-dependente">Sem variável tempo dependente</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>dialise <span class="ot">&lt;-</span> <span class="fu">coxph</span>(surv_obj <span class="sc">~</span> treat <span class="sc">+</span> Tempo_dialise, </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">data=</span>db) <span class="co"># corte no 660</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dialise)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = surv_obj ~ treat + Tempo_dialise, data = db)

  n= 628, number of events= 508 

                    coef  exp(coef)   se(coef)       z            Pr(&gt;|z|)    
treat1         0.0618983  1.0638541  0.0899990   0.688               0.492    
Tempo_dialise -0.0084493  0.9915863  0.0007709 -10.960 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

              exp(coef) exp(-coef) lower .95 upper .95
treat1           1.0639      0.940    0.8918    1.2691
Tempo_dialise    0.9916      1.008    0.9901    0.9931

Concordance= 0.75  (se = 0.012 )
Likelihood ratio test= 151.4  on 2 df,   p=&lt;0.0000000000000002
Wald test            = 121.2  on 2 df,   p=&lt;0.0000000000000002
Score (logrank) test = 120.6  on 2 df,   p=&lt;0.0000000000000002</code></pre>
</div>
</div>
</section>
<section id="mudança-linear" class="level3">
<h3 class="anchored" data-anchor-id="mudança-linear">Mudança linear</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>dialise_linear <span class="ot">&lt;-</span> <span class="fu">coxph</span>(surv_obj <span class="sc">~</span> treat <span class="sc">+</span> Tempo_dialise <span class="sc">+</span> <span class="fu">tt</span>(Tempo_dialise),</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data=</span>db,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt=</span><span class="cf">function</span>(x,t,...) x<span class="sc">*</span>t) </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dialise_linear)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), 
    data = db, tt = function(x, t, ...) x * t)

  n= 628, number of events= 508 

                          coef    exp(coef)     se(coef)       z
treat1            -0.016001236  0.984126103  0.091676088  -0.175
Tempo_dialise     -0.023777102  0.976503346  0.001506128 -15.787
tt(Tempo_dialise)  0.000070699  1.000070701  0.000005184  13.637
                             Pr(&gt;|z|)    
treat1                          0.861    
Tempo_dialise     &lt;0.0000000000000002 ***
tt(Tempo_dialise) &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                  exp(coef) exp(-coef) lower .95 upper .95
treat1               0.9841     1.0161    0.8223    1.1778
Tempo_dialise        0.9765     1.0241    0.9736    0.9794
tt(Tempo_dialise)    1.0001     0.9999    1.0001    1.0001

Concordance= 0.761  (se = 0.009 )
Likelihood ratio test= 337.6  on 3 df,   p=&lt;0.0000000000000002
Wald test            = 249.3  on 3 df,   p=&lt;0.0000000000000002
Score (logrank) test = 229.1  on 3 df,   p=&lt;0.0000000000000002</code></pre>
</div>
</div>
</section>
<section id="modelo-log" class="level3">
<h3 class="anchored" data-anchor-id="modelo-log">Modelo log</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>dialise_log <span class="ot">&lt;-</span> <span class="fu">coxph</span>(surv_obj <span class="sc">~</span> treat <span class="sc">+</span> Tempo_dialise <span class="sc">+</span> <span class="fu">tt</span>(Tempo_dialise),</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">data=</span>db,</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt=</span><span class="cf">function</span>(x,t,...) x<span class="sc">*</span><span class="fu">log</span>(t)) </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dialise_log)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), 
    data = db, tt = function(x, t, ...) x * log(t))

  n= 628, number of events= 508 

                       coef exp(coef)  se(coef)      z            Pr(&gt;|z|)    
treat1            -0.071106  0.931363  0.092369  -0.77               0.441    
Tempo_dialise     -0.097417  0.907178  0.005942 -16.40 &lt;0.0000000000000002 ***
tt(Tempo_dialise)  0.017178  1.017326  0.001087  15.80 &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                  exp(coef) exp(-coef) lower .95 upper .95
treat1               0.9314      1.074    0.7771    1.1162
Tempo_dialise        0.9072      1.102    0.8967    0.9178
tt(Tempo_dialise)    1.0173      0.983    1.0152    1.0195

Concordance= 0.759  (se = 0.01 )
Likelihood ratio test= 461.5  on 3 df,   p=&lt;0.0000000000000002
Wald test            = 284.6  on 3 df,   p=&lt;0.0000000000000002
Score (logrank) test = 223.9  on 3 df,   p=&lt;0.0000000000000002</code></pre>
</div>
</div>
</section>
<section id="modelo-temporal" class="level3">
<h3 class="anchored" data-anchor-id="modelo-temporal">Modelo temporal</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>dialise_tempo_650 <span class="ot">&lt;-</span> <span class="fu">coxph</span>(surv_obj <span class="sc">~</span> treat <span class="sc">+</span> Tempo_dialise <span class="sc">+</span> <span class="fu">tt</span>(Tempo_dialise),</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">data=</span>db,</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt=</span><span class="cf">function</span>(x,t,...) x<span class="sc">*</span>(t<span class="sc">&gt;</span><span class="dv">650</span>))</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dialise_tempo_650)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), 
    data = db, tt = function(x, t, ...) x * (t &gt; 650))

  n= 628, number of events= 508 

                        coef  exp(coef)   se(coef)       z            Pr(&gt;|z|)
treat1             0.0617615  1.0637086  0.0900051   0.686               0.493
Tempo_dialise     -0.0084524  0.9915832  0.0007713 -10.958 &lt;0.0000000000000002
tt(Tempo_dialise)  0.0028519  1.0028560  0.0221016   0.129               0.897
                     
treat1               
Tempo_dialise     ***
tt(Tempo_dialise)    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                  exp(coef) exp(-coef) lower .95 upper .95
treat1               1.0637     0.9401    0.8917    1.2689
Tempo_dialise        0.9916     1.0085    0.9901    0.9931
tt(Tempo_dialise)    1.0029     0.9972    0.9603    1.0473

Concordance= 0.75  (se = 0.01 )
Likelihood ratio test= 151.5  on 3 df,   p=&lt;0.0000000000000002
Wald test            = 121.2  on 3 df,   p=&lt;0.0000000000000002
Score (logrank) test = 120.6  on 3 df,   p=&lt;0.0000000000000002</code></pre>
</div>
</div>
</section>
<section id="índices-de-aderência-aic-e-bic" class="level3">
<h3 class="anchored" data-anchor-id="índices-de-aderência-aic-e-bic">Índices de aderência (AIC e BIC)</h3>
<p>Podemos comparar os modelos computando os valores de AIC e BIC</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>combined_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"dialise"</span>, <span class="st">"dialise_linear"</span>, <span class="st">"dialise_log"</span>, <span class="st">"dialise_tempo_650"</span>),</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">AIC =</span> <span class="fu">c</span>(<span class="fu">AIC</span>(dialise), <span class="fu">AIC</span>(dialise_linear), <span class="fu">AIC</span>(dialise_log), <span class="fu">AIC</span>(dialise_tempo_650)),</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">BIC =</span> <span class="fu">c</span>(<span class="fu">BIC</span>(dialise), <span class="fu">BIC</span>(dialise_linear), <span class="fu">BIC</span>(dialise_log), <span class="fu">BIC</span>(dialise_tempo_650))</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(combined_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">AIC</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">BIC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">dialise</td>
<td style="text-align: right;">5771.688</td>
<td style="text-align: right;">5780.149</td>
</tr>
<tr class="even">
<td style="text-align: left;">dialise_linear</td>
<td style="text-align: right;">5587.564</td>
<td style="text-align: right;">5600.256</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dialise_log</td>
<td style="text-align: right;">5463.651</td>
<td style="text-align: right;">5476.343</td>
</tr>
<tr class="even">
<td style="text-align: left;">dialise_tempo_650</td>
<td style="text-align: right;">5773.672</td>
<td style="text-align: right;">5786.363</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Por esse critério, temos que o melhor modelo é o log em seguida o linear.</p>
</section>
<section id="resíduos-de-schoenfeld" class="level3">
<h3 class="anchored" data-anchor-id="resíduos-de-schoenfeld">Resíduos de Schoenfeld</h3>
<p>Agora vamos analisar mais uma vez os resíduos de Schoenfeld, mas agora variando pelo “Tempo em Diálise”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>cox_res_T_Cov <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> db<span class="sc">$</span>time, <span class="at">event =</span> db<span class="sc">$</span>morte) <span class="sc">~</span> treat <span class="sc">+</span> Tempo_dialise, <span class="at">data =</span> db)  </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggcoxzph</span>(<span class="fu">cox.zph</span>(cox_res_T_Cov), <span class="at">var =</span><span class="st">"Tempo_dialise"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Podemos observar que o Beta do tempo em diálise tem um aumento linear conforme maior o tempo. O resultado pode indicar que o efeito do tempo sobre a o tempo em diálise pode ser linear.</p>
</section>
<section id="interpretando-os-resultados." class="level3">
<h3 class="anchored" data-anchor-id="interpretando-os-resultados.">Interpretando os resultados.</h3>
<p>A interpretação dos coeficientes da Cox Tempo-dependente é diferente das outras regressõs.</p>
<p>Vamos interpretar o valor do modelo com mudança linear.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(dialise_linear)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = surv_obj ~ treat + Tempo_dialise + tt(Tempo_dialise), 
    data = db, tt = function(x, t, ...) x * t)

  n= 628, number of events= 508 

                          coef    exp(coef)     se(coef)       z
treat1            -0.016001236  0.984126103  0.091676088  -0.175
Tempo_dialise     -0.023777102  0.976503346  0.001506128 -15.787
tt(Tempo_dialise)  0.000070699  1.000070701  0.000005184  13.637
                             Pr(&gt;|z|)    
treat1                          0.861    
Tempo_dialise     &lt;0.0000000000000002 ***
tt(Tempo_dialise) &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                  exp(coef) exp(-coef) lower .95 upper .95
treat1               0.9841     1.0161    0.8223    1.1778
Tempo_dialise        0.9765     1.0241    0.9736    0.9794
tt(Tempo_dialise)    1.0001     0.9999    1.0001    1.0001

Concordance= 0.761  (se = 0.009 )
Likelihood ratio test= 337.6  on 3 df,   p=&lt;0.0000000000000002
Wald test            = 249.3  on 3 df,   p=&lt;0.0000000000000002
Score (logrank) test = 229.1  on 3 df,   p=&lt;0.0000000000000002</code></pre>
</div>
</div>
<p>O coeficiente Tempo_dialise = -0.023, deve ser interpretado como o efeito do tempo de diálise no tempo zero. Já o coeficiente tt(Tempo_dialise) = deve ser interpretado como o a mudança do efeito do tempo em diálise a cada unidade de tempo a mais.</p>
</section>
<section id="observações-spss-e-r" class="level3">
<h3 class="anchored" data-anchor-id="observações-spss-e-r">Observações SPSS e R</h3>
<p>Na aula prática o modelo não é feito com o Tempo em Diálise fora da variável tempo dependente. Já na aula teórica do curso II de 2023, o modelo é escrito como foi feito aqui no R, levando em conta o Tempo em Diálise como uma variável tempo dependente e também como covariável no modelo.</p>
</section>
</section>
<section id="covariando-para-idade-e-raça" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="covariando-para-idade-e-raça"><span class="header-section-number">7.8</span> Covariando para idade e raça</h2>
<p>O conjunto de dados ainda possui duas variáveis que não foram incluídas no modelo: idade e raça. Conforme o procedimento padrão, vamos examinar a natureza dessas variáveis. Começando com a idade.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(db)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 628
Columns: 7
$ ID            &lt;dbl&gt; 112, 91, 113, 150, 22, 139, 104, 590, 189, 171, 338, 492…
$ age           &lt;dbl&gt; 35, 33, 35, 31, 33, 43, 25, 35, 29, 27, 35, 23, 24, 23, …
$ race          &lt;fct&gt; branco, branco, branco, branco, branco, branco, branco, …
$ treat         &lt;fct&gt; 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1,…
$ Tempo_dialise &lt;dbl&gt; 51, 67, 88, 156, 12, 139, 90, 25, 187, 34, 29, 78, 63, 8…
$ time          &lt;dbl&gt; 1172, 762, 734, 720, 659, 658, 655, 654, 634, 630, 621, …
$ morte         &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…</code></pre>
</div>
</div>
<p>Ótimo, idade já está como uma variável numérica e contínua e raça está como um fator. Por fim, vamos verificar qual o nível de referência da variável “race”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(db<span class="sc">$</span>race)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "branco"      "negro/pardo"</code></pre>
</div>
</div>
<p>O nível “branco” está como referência, logo, os resultados do modelo mostrarão os valores dos coeficientes do nível “negro/pardo” em relação ao nível “branco”.</p>
<p>Vamos ao modelo completo.</p>
<section id="modelo-completo-cox-tempo-dependente" class="level3">
<h3 class="anchored" data-anchor-id="modelo-completo-cox-tempo-dependente">Modelo completo Cox tempo dependente</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>cox_full_model <span class="ot">&lt;-</span> <span class="fu">coxph</span>(surv_obj <span class="sc">~</span> age <span class="sc">+</span> race <span class="sc">+</span> treat <span class="sc">+</span> Tempo_dialise <span class="sc">+</span> <span class="fu">tt</span>(Tempo_dialise),</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data=</span>db,</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt=</span><span class="cf">function</span>(x,t,...) x<span class="sc">*</span>t) </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cox_full_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = surv_obj ~ age + race + treat + Tempo_dialise + 
    tt(Tempo_dialise), data = db, tt = function(x, t, ...) x * 
    t)

  n= 617, number of events= 500 
   (11 observations deleted due to missingness)

                          coef    exp(coef)     se(coef)       z
age               -0.005531327  0.994483942  0.007272881  -0.761
racenegro/pardo   -0.342009991  0.710341107  0.108147939  -3.162
treat1             0.042207387  1.043110784  0.093368582   0.452
Tempo_dialise     -0.023671737  0.976606241  0.001511519 -15.661
tt(Tempo_dialise)  0.000068807  1.000068809  0.000005196  13.242
                              Pr(&gt;|z|)    
age                            0.44693    
racenegro/pardo                0.00156 ** 
treat1                         0.65123    
Tempo_dialise     &lt; 0.0000000000000002 ***
tt(Tempo_dialise) &lt; 0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                  exp(coef) exp(-coef) lower .95 upper .95
age                  0.9945     1.0055    0.9804    1.0088
racenegro/pardo      0.7103     1.4078    0.5747    0.8781
treat1               1.0431     0.9587    0.8687    1.2526
Tempo_dialise        0.9766     1.0240    0.9737    0.9795
tt(Tempo_dialise)    1.0001     0.9999    1.0001    1.0001

Concordance= 0.765  (se = 0.009 )
Likelihood ratio test= 343.2  on 5 df,   p=&lt;0.0000000000000002
Wald test            = 259.4  on 5 df,   p=&lt;0.0000000000000002
Score (logrank) test = 243.3  on 5 df,   p=&lt;0.0000000000000002</code></pre>
</div>
</div>
<p>Agora temos que a raça tem um efeito significativo no modelo. Seguindo o vídeo da aula prática, podemos segmentar o banco de dados para as duas raças que temos no banco de dados.</p>
</section>
<section id="segmentando-o-banco-de-dados-por-raça" class="level3">
<h3 class="anchored" data-anchor-id="segmentando-o-banco-de-dados-por-raça">Segmentando o banco de dados por raça</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>db_branco <span class="ot">=</span> db <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(race <span class="sc">==</span> <span class="st">"branco"</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>db_pardo_negro <span class="ot">=</span> db <span class="sc">%&gt;%</span> </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(race <span class="sc">==</span> <span class="st">"negro/pardo"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="km-por-raça-branco" class="level3">
<h3 class="anchored" data-anchor-id="km-por-raça-branco">KM por raça = Branco</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando um novo objeto Surv</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>surv_obj_branco <span class="ot">&lt;-</span> <span class="fu">Surv</span>(<span class="at">time =</span> db_branco<span class="sc">$</span>time, <span class="at">event =</span> db_branco<span class="sc">$</span>morte)</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>fit_br <span class="ot">=</span> <span class="fu">survfit</span>(surv_obj_branco <span class="sc">~</span> treat, <span class="at">data =</span> db_branco)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvfit</span>(fit_br)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvfit</span>(fit_br, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Dias'</span>, <span class="at">y =</span> <span class="st">'Overall survival'</span>) <span class="sc">+</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_confidence_interval</span>() <span class="sc">+</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a> <span class="co"># add_risktable() +</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_ggsurvfit</span>() <span class="sc">+</span> </span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  biostatsquid_theme <span class="co">#+  coord_cartesian(xlim = c(0, 8))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-36-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="modelo-completo-para-brancos" class="level3">
<h3 class="anchored" data-anchor-id="modelo-completo-para-brancos">Modelo completo para brancos</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Escrevendo o modelo</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>cox_full_model_branco <span class="ot">&lt;-</span> <span class="fu">coxph</span>(surv_obj_branco <span class="sc">~</span> age <span class="sc">+</span> treat <span class="sc">+</span> Tempo_dialise <span class="sc">+</span> <span class="fu">tt</span>(Tempo_dialise),</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data=</span>db_branco,</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt=</span><span class="cf">function</span>(x,t,...) x<span class="sc">*</span>t) </span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cox_full_model_branco)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = surv_obj_branco ~ age + treat + Tempo_dialise + 
    tt(Tempo_dialise), data = db_branco, tt = function(x, t, 
    ...) x * t)

  n= 464, number of events= 385 
   (3 observations deleted due to missingness)

                          coef    exp(coef)     se(coef)      z
age               -0.000811624  0.999188705  0.008137628  -0.10
treat1             0.028995294  1.029419750  0.107276897   0.27
Tempo_dialise     -0.024166842  0.976122838  0.001707544 -14.15
tt(Tempo_dialise)  0.000070240  1.000070242  0.000005841  12.03
                             Pr(&gt;|z|)    
age                             0.921    
treat1                          0.787    
Tempo_dialise     &lt;0.0000000000000002 ***
tt(Tempo_dialise) &lt;0.0000000000000002 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                  exp(coef) exp(-coef) lower .95 upper .95
age                  0.9992     1.0008    0.9834    1.0153
treat1               1.0294     0.9714    0.8342    1.2703
Tempo_dialise        0.9761     1.0245    0.9729    0.9794
tt(Tempo_dialise)    1.0001     0.9999    1.0001    1.0001

Concordance= 0.78  (se = 0.01 )
Likelihood ratio test= 286.5  on 4 df,   p=&lt;0.0000000000000002
Wald test            = 201.8  on 4 df,   p=&lt;0.0000000000000002
Score (logrank) test = 185.6  on 4 df,   p=&lt;0.0000000000000002</code></pre>
</div>
</div>
</section>
<section id="km-por-raça-negropardo" class="level3">
<h3 class="anchored" data-anchor-id="km-por-raça-negropardo">KM por raça = negro/pardo</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Criando um novo objeto Surv</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>surv_obj_pardo_negro<span class="ot">&lt;-</span> <span class="fu">Surv</span>(<span class="at">time =</span> db_pardo_negro<span class="sc">$</span>time, <span class="at">event =</span> db_pardo_negro<span class="sc">$</span>morte)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>fit_pn <span class="ot">=</span> <span class="fu">survfit</span>(surv_obj_pardo_negro <span class="sc">~</span> treat, <span class="at">data =</span> db_pardo_negro)</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvfit</span>(fit_pn, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Dias'</span>, <span class="at">y =</span> <span class="st">'Overall survival'</span>) <span class="sc">+</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_confidence_interval</span>() <span class="sc">+</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a> <span class="co"># add_risktable() +</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_ggsurvfit</span>() <span class="sc">+</span> </span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>  biostatsquid_theme <span class="co">#+  coord_cartesian(xlim = c(0, 8))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="modelo-completo-para-pardonegro" class="level3">
<h3 class="anchored" data-anchor-id="modelo-completo-para-pardonegro">Modelo completo para pardo/negro</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Escrevendo o modelo</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>cox_full_model_pardo_negro <span class="ot">&lt;-</span> <span class="fu">coxph</span>(surv_obj_pardo_negro <span class="sc">~</span> age <span class="sc">+</span> treat <span class="sc">+</span> Tempo_dialise <span class="sc">+</span> <span class="fu">tt</span>(Tempo_dialise),</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data=</span>db_pardo_negro,</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt=</span><span class="cf">function</span>(x,t,...) x<span class="sc">*</span>t) </span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cox_full_model_pardo_negro)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = surv_obj_pardo_negro ~ age + treat + Tempo_dialise + 
    tt(Tempo_dialise), data = db_pardo_negro, tt = function(x, 
    t, ...) x * t)

  n= 153, number of events= 115 
   (2 observations deleted due to missingness)

                         coef   exp(coef)    se(coef)      z      Pr(&gt;|z|)    
age               -0.02336224  0.97690855  0.01673857 -1.396         0.163    
treat1             0.07806397  1.08119182  0.19431411  0.402         0.688    
Tempo_dialise     -0.02367178  0.97660620  0.00397339 -5.958 0.00000000256 ***
tt(Tempo_dialise)  0.00007639  1.00007639  0.00001784  4.282 0.00001853157 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                  exp(coef) exp(-coef) lower .95 upper .95
age                  0.9769     1.0236    0.9454    1.0095
treat1               1.0812     0.9249    0.7388    1.5824
Tempo_dialise        0.9766     1.0240    0.9690    0.9842
tt(Tempo_dialise)    1.0001     0.9999    1.0000    1.0001

Concordance= 0.696  (se = 0.025 )
Likelihood ratio test= 48.53  on 4 df,   p=0.0000000007
Wald test            = 39.77  on 4 df,   p=0.00000005
Score (logrank) test = 42.56  on 4 df,   p=0.00000001</code></pre>
</div>
</div>
</section>
</section>
<section id="lista-6.1-resolvida-no-spss" class="level2" data-number="7.9">
<h2 data-number="7.9" class="anchored" data-anchor-id="lista-6.1-resolvida-no-spss"><span class="header-section-number">7.9</span> Lista 6.1 resolvida no SPSS</h2>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/6FvdrOpz0XU" title="Análise Sobrevida II - Cox tempo dependente - Aula Prática #6.1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section>
<section id="extras" class="level2" data-number="7.10">
<h2 data-number="7.10" class="anchored" data-anchor-id="extras"><span class="header-section-number">7.10</span> Extras</h2>
<section id="mais-gráficos" class="level3">
<h3 class="anchored" data-anchor-id="mais-gráficos">Mais gráficos</h3>
<p>E utilizar nosso tema para personalizar e padronizar.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>fit2_km <span class="ot">&lt;-</span> <span class="fu">ggsurvfit</span>(fit1, <span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Dias'</span>, <span class="at">y =</span> <span class="st">'Porcentagem de sobrevida'</span>) <span class="sc">+</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_confidence_interval</span>() <span class="sc">+</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a> <span class="co"># add_risktable() +</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_ggsurvfit</span>() <span class="sc">+</span> </span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  biostatsquid_theme <span class="co">#+  coord_cartesian(xlim = c(0, 8))</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>fit2_km</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Cuidado</strong> com o p-value do gráfico a seguir, ele se refere apenas ao Log-rank</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(fit1, <span class="at">data =</span> db,</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="dv">1</span>,</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">'#E7B800'</span>, <span class="st">'#2e9fdf'</span>),</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">censor.shape =</span> <span class="st">'|'</span>, <span class="at">censor.size =</span> <span class="dv">4</span>,</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">TRUE</span>,</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>, <span class="co"># CUIDADO, apenas log-rank</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>          <span class="co"># risk.table = TRUE,</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>         <span class="co">#  risk.table.col = 'strata',</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">legend.labs =</span> <span class="fu">list</span>(<span class="st">'0'</span> <span class="ot">=</span> <span class="st">'Transplante = sim'</span>, <span class="st">'1'</span> <span class="ot">=</span> <span class="st">'Transplante = não'</span>),</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">risk.table.height =</span> <span class="fl">0.25</span>,</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_bw</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="lista_6_1_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="cox-tempo-dependente-log" class="level3">
<h3 class="anchored" data-anchor-id="cox-tempo-dependente-log">Cox tempo dependente log</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>cox_full_model_2 <span class="ot">&lt;-</span> <span class="fu">coxph</span>(surv_obj <span class="sc">~</span> age <span class="sc">+</span> race <span class="sc">+</span> treat <span class="sc">+</span> Tempo_dialise <span class="sc">+</span> <span class="fu">tt</span>(Tempo_dialise),</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">data=</span>db,</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">tt=</span><span class="cf">function</span>(x,t,...) x<span class="sc">*</span><span class="fu">log</span>(t)) </span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cox_full_model_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = surv_obj ~ age + race + treat + Tempo_dialise + 
    tt(Tempo_dialise), data = db, tt = function(x, t, ...) x * 
    log(t))

  n= 617, number of events= 500 
   (11 observations deleted due to missingness)

                       coef exp(coef)  se(coef)       z             Pr(&gt;|z|)
age               -0.005656  0.994360  0.007318  -0.773              0.43960
racenegro/pardo   -0.296846  0.743159  0.108704  -2.731              0.00632
treat1            -0.007682  0.992348  0.094183  -0.082              0.93499
Tempo_dialise     -0.096272  0.908217  0.005996 -16.056 &lt; 0.0000000000000002
tt(Tempo_dialise)  0.016885  1.017028  0.001098  15.383 &lt; 0.0000000000000002
                     
age                  
racenegro/pardo   ** 
treat1               
Tempo_dialise     ***
tt(Tempo_dialise) ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                  exp(coef) exp(-coef) lower .95 upper .95
age                  0.9944     1.0057    0.9802    1.0087
racenegro/pardo      0.7432     1.3456    0.6006    0.9196
treat1               0.9923     1.0077    0.8251    1.1935
Tempo_dialise        0.9082     1.1011    0.8976    0.9190
tt(Tempo_dialise)    1.0170     0.9833    1.0148    1.0192

Concordance= 0.764  (se = 0.009 )
Likelihood ratio test= 459.7  on 5 df,   p=&lt;0.0000000000000002
Wald test            = 290.9  on 5 df,   p=&lt;0.0000000000000002
Score (logrank) test = 237.8  on 5 df,   p=&lt;0.0000000000000002</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AIC</span>(cox_full_model_2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5356.724</code></pre>
</div>
</div>
</section>
</section>
<section id="referencias" class="level2" data-number="7.11">
<h2 data-number="7.11" class="anchored" data-anchor-id="referencias"><span class="header-section-number">7.11</span> Referencias</h2>
<p><a href="https://stats.oarc.ucla.edu/wp-content/uploads/2022/05/survival_r.html#(48)" class="uri">https://stats.oarc.ucla.edu/wp-content/uploads/2022/05/survival_r.html#(48)</a></p>
<p><a href="https://www.youtube.com/watch?v=Y_83HXuHMdc" class="uri">https://www.youtube.com/watch?v=Y_83HXuHMdc</a></p>
<p><a href="https://youtu.be/Y_83HXuHMdc?t=9151" class="uri">https://youtu.be/Y_83HXuHMdc?t=9151</a></p>
</section>
<section id="códigos-não-utilizados" class="level2" data-number="7.12">
<h2 data-number="7.12" class="anchored" data-anchor-id="códigos-não-utilizados"><span class="header-section-number">7.12</span> Códigos não utilizados</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustando o banco de dados</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>db3 <span class="ot">=</span> db</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="co"># db3$time = pmax(0.5, db3$time - 0) caso eu tenha zeros no tempo de morte</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="co"># db3$time660 = as.integer(db3$time660)</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="co"># head(db3)</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="co"># db3$time660 = as.integer(db3$time660)</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>db3 <span class="ot">&lt;-</span> <span class="fu">tmerge</span>(</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">data1 =</span> db3,</span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">data2 =</span> db3,</span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> ID,</span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a> <span class="co"># death = event(T1, delta1), caso tenha dois eventos de morte independentes. Duas doenças diferentes, por exemplo</span></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">death =</span> <span class="fu">event</span>(time, morte),</span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">T_Cov =</span> <span class="fu">tdc</span>(Tempo_dialise) <span class="co"># indicando a covariavel tempo-dependente</span></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(db3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID age   race treat Tempo_dialise time morte tstart tstop death T_Cov
1 112  35 branco     1            51 1172     0      0    51     0     0
2 112  35 branco     1            51 1172     0     51  1172     0     1
3  91  33 branco     0            67  762     0      0    67     0     0
4  91  33 branco     0            67  762     0     67   762     0     1
5 113  35 branco     0            88  734     0      0    88     0     0
6 113  35 branco     0            88  734     0     88   734     0     1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Duvida para Altay - colocar o evento como morte2 ou death</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>cox_model_T_Cov <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> tstart, <span class="at">time2 =</span> tstop, <span class="at">event =</span> morte) <span class="sc">~</span> treat <span class="sc">+</span> T_Cov, <span class="at">data =</span> db3)</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cox_model_T_Cov)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = Surv(time = tstart, time2 = tstop, event = morte) ~ 
    treat + T_Cov, data = db3)

  n= 1174, number of events= 934 

           coef exp(coef) se(coef)      z Pr(&gt;|z|)   
treat1 -0.17205   0.84194  0.06668 -2.580  0.00987 **
T_Cov   0.03829   1.03903  0.08493  0.451  0.65210   
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

       exp(coef) exp(-coef) lower .95 upper .95
treat1    0.8419     1.1877    0.7388    0.9595
T_Cov     1.0390     0.9624    0.8797    1.2272

Concordance= 0.539  (se = 0.01 )
Likelihood ratio test= 7.53  on 2 df,   p=0.02
Wald test            = 7.53  on 2 df,   p=0.02
Score (logrank) test = 7.54  on 2 df,   p=0.02</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>db3 <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> tstart, <span class="at">time2 =</span> tstop, <span class="at">event =</span> death) <span class="sc">~</span> treat <span class="sc">+</span> age <span class="sc">+</span> race <span class="sc">+</span> T_Cov, <span class="at">data =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  gtsummary<span class="sc">::</span><span class="fu">tbl_regression</span>(<span class="at">exp =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="epqvqrbfvf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#epqvqrbfvf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#epqvqrbfvf thead, #epqvqrbfvf tbody, #epqvqrbfvf tfoot, #epqvqrbfvf tr, #epqvqrbfvf td, #epqvqrbfvf th {
  border-style: none;
}

#epqvqrbfvf p {
  margin: 0;
  padding: 0;
}

#epqvqrbfvf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#epqvqrbfvf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#epqvqrbfvf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#epqvqrbfvf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#epqvqrbfvf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#epqvqrbfvf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#epqvqrbfvf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#epqvqrbfvf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#epqvqrbfvf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#epqvqrbfvf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#epqvqrbfvf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#epqvqrbfvf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#epqvqrbfvf .gt_spanner_row {
  border-bottom-style: hidden;
}

#epqvqrbfvf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#epqvqrbfvf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#epqvqrbfvf .gt_from_md > :first-child {
  margin-top: 0;
}

#epqvqrbfvf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#epqvqrbfvf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#epqvqrbfvf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#epqvqrbfvf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#epqvqrbfvf .gt_row_group_first td {
  border-top-width: 2px;
}

#epqvqrbfvf .gt_row_group_first th {
  border-top-width: 2px;
}

#epqvqrbfvf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#epqvqrbfvf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#epqvqrbfvf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#epqvqrbfvf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#epqvqrbfvf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#epqvqrbfvf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#epqvqrbfvf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#epqvqrbfvf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#epqvqrbfvf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#epqvqrbfvf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#epqvqrbfvf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#epqvqrbfvf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#epqvqrbfvf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#epqvqrbfvf .gt_left {
  text-align: left;
}

#epqvqrbfvf .gt_center {
  text-align: center;
}

#epqvqrbfvf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#epqvqrbfvf .gt_font_normal {
  font-weight: normal;
}

#epqvqrbfvf .gt_font_bold {
  font-weight: bold;
}

#epqvqrbfvf .gt_font_italic {
  font-style: italic;
}

#epqvqrbfvf .gt_super {
  font-size: 65%;
}

#epqvqrbfvf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#epqvqrbfvf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#epqvqrbfvf .gt_indent_1 {
  text-indent: 5px;
}

#epqvqrbfvf .gt_indent_2 {
  text-indent: 10px;
}

#epqvqrbfvf .gt_indent_3 {
  text-indent: 15px;
}

#epqvqrbfvf .gt_indent_4 {
  text-indent: 20px;
}

#epqvqrbfvf .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>HR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>HR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-value</strong>"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">treat</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;0</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;1</td>
<td headers="estimate" class="gt_row gt_center">1.05</td>
<td headers="ci" class="gt_row gt_center">0.88, 1.25</td>
<td headers="p.value" class="gt_row gt_center">0.6</td></tr>
    <tr><td headers="label" class="gt_row gt_left">age</td>
<td headers="estimate" class="gt_row gt_center">1.00</td>
<td headers="ci" class="gt_row gt_center">0.98, 1.01</td>
<td headers="p.value" class="gt_row gt_center">0.5</td></tr>
    <tr><td headers="label" class="gt_row gt_left">race</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;branco</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;negro/pardo</td>
<td headers="estimate" class="gt_row gt_center">0.68</td>
<td headers="ci" class="gt_row gt_center">0.55, 0.84</td>
<td headers="p.value" class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">T_Cov</td>
<td headers="estimate" class="gt_row gt_center">13.6</td>
<td headers="ci" class="gt_row gt_center">10.1, 18.4</td>
<td headers="p.value" class="gt_row gt_center">&lt;0.001</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> HR = Hazard Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
<section id="tempo-em-diálise-como-covariante-tempo-dependente" class="level3">
<h3 class="anchored" data-anchor-id="tempo-em-diálise-como-covariante-tempo-dependente">Tempo em diálise como covariante tempo-dependente</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustando o banco de dados</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>db2 <span class="ot">=</span> db</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="co">#db2$time = pmax(0.5, db2$time - 0)</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>db2 <span class="ot">&lt;-</span> <span class="fu">tmerge</span>(</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">data1 =</span> db,</span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">data2 =</span> db,</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> ID,</span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a> <span class="co"># death = event(T1, delta1), caso tenha dois eventos de morte independentes. Duas doenças diferentes, por exemplo</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">death =</span> <span class="fu">event</span>(time, morte),</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">T_Tempo_dialise =</span> <span class="fu">tdc</span>(Tempo_dialise) <span class="co"># indicando a covariavel tempo-dependente</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(db2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   ID age   race treat Tempo_dialise time morte tstart tstop death
1 112  35 branco     1            51 1172     0      0    51     0
2 112  35 branco     1            51 1172     0     51  1172     0
3  91  33 branco     0            67  762     0      0    67     0
4  91  33 branco     0            67  762     0     67   762     0
5 113  35 branco     0            88  734     0      0    88     0
6 113  35 branco     0            88  734     0     88   734     0
  T_Tempo_dialise
1               0
2               1
3               0
4               1
5               0
6               1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>cox_model_time_dependent <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> tstart, <span class="at">time2 =</span> tstop, <span class="at">event =</span> death) <span class="sc">~</span> T_Tempo_dialise <span class="sc">+</span> treat, <span class="at">data =</span> db2)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cox_model_time_dependent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = Surv(time = tstart, time2 = tstop, event = death) ~ 
    T_Tempo_dialise + treat, data = db2)

  n= 1174, number of events= 508 

                     coef exp(coef)  se(coef)      z            Pr(&gt;|z|)    
T_Tempo_dialise  2.585761 13.273384  0.150925 17.133 &lt;0.0000000000000002 ***
treat1          -0.003201  0.996804  0.089471 -0.036               0.971    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                exp(coef) exp(-coef) lower .95 upper .95
T_Tempo_dialise   13.2734    0.07534    9.8745    17.842
treat1             0.9968    1.00321    0.8365     1.188

Concordance= 0.699  (se = 0.014 )
Likelihood ratio test= 382.7  on 2 df,   p=&lt;0.0000000000000002
Wald test            = 294.6  on 2 df,   p=&lt;0.0000000000000002
Score (logrank) test = 354.7  on 2 df,   p=&lt;0.0000000000000002</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>db2 <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coxph</span>(<span class="fu">Surv</span>(<span class="at">time =</span> tstart, <span class="at">time2 =</span> tstop, <span class="at">event =</span> death) <span class="sc">~</span> T_Tempo_dialise <span class="sc">*</span> treat, <span class="at">data =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  gtsummary<span class="sc">::</span><span class="fu">tbl_regression</span>(<span class="at">exp =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div id="oxfwpjgiiy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#oxfwpjgiiy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#oxfwpjgiiy thead, #oxfwpjgiiy tbody, #oxfwpjgiiy tfoot, #oxfwpjgiiy tr, #oxfwpjgiiy td, #oxfwpjgiiy th {
  border-style: none;
}

#oxfwpjgiiy p {
  margin: 0;
  padding: 0;
}

#oxfwpjgiiy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#oxfwpjgiiy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#oxfwpjgiiy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#oxfwpjgiiy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#oxfwpjgiiy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oxfwpjgiiy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oxfwpjgiiy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#oxfwpjgiiy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#oxfwpjgiiy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#oxfwpjgiiy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#oxfwpjgiiy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#oxfwpjgiiy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#oxfwpjgiiy .gt_spanner_row {
  border-bottom-style: hidden;
}

#oxfwpjgiiy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#oxfwpjgiiy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#oxfwpjgiiy .gt_from_md > :first-child {
  margin-top: 0;
}

#oxfwpjgiiy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#oxfwpjgiiy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#oxfwpjgiiy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#oxfwpjgiiy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#oxfwpjgiiy .gt_row_group_first td {
  border-top-width: 2px;
}

#oxfwpjgiiy .gt_row_group_first th {
  border-top-width: 2px;
}

#oxfwpjgiiy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oxfwpjgiiy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#oxfwpjgiiy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#oxfwpjgiiy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oxfwpjgiiy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#oxfwpjgiiy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#oxfwpjgiiy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#oxfwpjgiiy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#oxfwpjgiiy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#oxfwpjgiiy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oxfwpjgiiy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#oxfwpjgiiy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#oxfwpjgiiy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#oxfwpjgiiy .gt_left {
  text-align: left;
}

#oxfwpjgiiy .gt_center {
  text-align: center;
}

#oxfwpjgiiy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#oxfwpjgiiy .gt_font_normal {
  font-weight: normal;
}

#oxfwpjgiiy .gt_font_bold {
  font-weight: bold;
}

#oxfwpjgiiy .gt_font_italic {
  font-style: italic;
}

#oxfwpjgiiy .gt_super {
  font-size: 65%;
}

#oxfwpjgiiy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#oxfwpjgiiy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#oxfwpjgiiy .gt_indent_1 {
  text-indent: 5px;
}

#oxfwpjgiiy .gt_indent_2 {
  text-indent: 10px;
}

#oxfwpjgiiy .gt_indent_3 {
  text-indent: 15px;
}

#oxfwpjgiiy .gt_indent_4 {
  text-indent: 20px;
}

#oxfwpjgiiy .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="<strong>Characteristic</strong>"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>HR</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>HR</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>95% CI</strong><span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>"><strong>95% CI</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="<strong>p-value</strong>"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">T_Tempo_dialise</td>
<td headers="estimate" class="gt_row gt_center">9.78</td>
<td headers="ci" class="gt_row gt_center">6.78, 14.1</td>
<td headers="p.value" class="gt_row gt_center">&lt;0.001</td></tr>
    <tr><td headers="label" class="gt_row gt_left">treat</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;0</td>
<td headers="estimate" class="gt_row gt_center">—</td>
<td headers="ci" class="gt_row gt_center">—</td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;1</td>
<td headers="estimate" class="gt_row gt_center">0.59</td>
<td headers="ci" class="gt_row gt_center">0.38, 0.92</td>
<td headers="p.value" class="gt_row gt_center">0.020</td></tr>
    <tr><td headers="label" class="gt_row gt_left">T_Tempo_dialise * treat</td>
<td headers="estimate" class="gt_row gt_center"><br></td>
<td headers="ci" class="gt_row gt_center"><br></td>
<td headers="p.value" class="gt_row gt_center"><br></td></tr>
    <tr><td headers="label" class="gt_row gt_left">&nbsp;&nbsp;&nbsp;&nbsp;T_Tempo_dialise * 1</td>
<td headers="estimate" class="gt_row gt_center">1.86</td>
<td headers="ci" class="gt_row gt_center">1.15, 3.02</td>
<td headers="p.value" class="gt_row gt_center">0.012</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="4"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> HR = Hazard Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
</div>
</div>
</section>
</section>
<section id="versões-dos-pacotes" class="level2" data-number="7.13">
<h2 data-number="7.13" class="anchored" data-anchor-id="versões-dos-pacotes"><span class="header-section-number">7.13</span> Versões dos pacotes</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">report</span>(<span class="fu">sessionInfo</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analyses were conducted using the R Statistical language (version 4.3.1; R Core
Team, 2023) on Windows 11 x64 (build 22621), using the packages effectsize
(version 0.8.6; Ben-Shachar MS et al., 2020), lpSolve (version 5.6.19;
Berkelaar M, others, 2023), survMisc (version 0.5.6; Dardis C, 2022), tm
(version 0.7.11; Feinerer I, Hornik K, 2023), flexplot (version 0.20.5; Fife D,
2024), lubridate (version 1.9.3; Grolemund G, Wickham H, 2011), coxphf (version
1.13.4; Heinze G et al., 2023), NLP (version 0.2.1; Hornik K, 2020), coin
(version 1.4.3; Hothorn T et al., 2006), ggpubr (version 0.6.0; Kassambara A,
2023), survminer (version 0.4.9; Kassambara A et al., 2021),
PHInfiniteEstimates (version 2.9.5; Kolassa JE, Zhang J, 2023), parameters
(version 0.21.3; Lüdecke D et al., 2020), performance (version 0.10.8; Lüdecke
D et al., 2021), easystats (version 0.6.0; Lüdecke D et al., 2022), see
(version 0.8.1; Lüdecke D et al., 2021), insight (version 0.19.6; Lüdecke D et
al., 2019), bayestestR (version 0.13.1; Makowski D et al., 2019), modelbased
(version 0.8.6; Makowski D et al., 2020), report (version 0.5.7; Makowski D et
al., 2023), correlation (version 0.8.4; Makowski D et al., 2022), condSURV
(version 2.0.4; Meira-Machado L, Sestelo M, 2023), tibble (version 3.2.1;
Müller K, Wickham H, 2023), datawizard (version 0.9.0; Patil I et al., 2022),
foreign (version 0.8.85; R Core Team, 2023), nph (version 2.1; Ristl R et al.,
2021), broom (version 1.0.5; Robinson D et al., 2023), ggsurvfit (version
1.0.0; Sjoberg D et al., 2023), gtsummary (version 1.7.2; Sjoberg D et al.,
2021), rempsyc (version 0.1.6; Thériault R, 2023), survival (version 3.5.7;
Therneau T, 2023), ggplot2 (version 3.4.4; Wickham H, 2016), forcats (version
1.0.0; Wickham H, 2023), stringr (version 1.5.1; Wickham H, 2023), tidyverse
(version 2.0.0; Wickham H et al., 2019), dplyr (version 1.1.3; Wickham H et
al., 2023), purrr (version 1.0.2; Wickham H, Henry L, 2023), readr (version
2.1.4; Wickham H et al., 2023), tidyr (version 1.3.0; Wickham H et al., 2023)
and kableExtra (version 1.3.4; Zhu H, 2021).

References
----------
  - Ben-Shachar MS, Lüdecke D, Makowski D (2020). "effectsize: Estimation of
Effect Size Indices and Standardized Parameters." _Journal of Open Source
Software_, *5*(56), 2815. doi:10.21105/joss.02815
&lt;https://doi.org/10.21105/joss.02815&gt;, &lt;https://doi.org/10.21105/joss.02815&gt;.
  - Berkelaar M, others (2023). _lpSolve: Interface to 'Lp_solve' v. 5.5 to Solve
Linear/Integer Programs_. R package version 5.6.19,
&lt;https://CRAN.R-project.org/package=lpSolve&gt;.
  - Dardis C (2022). _survMisc: Miscellaneous Functions for Survival Data_. R
package version 0.5.6, &lt;https://CRAN.R-project.org/package=survMisc&gt;.
  - Feinerer I, Hornik K (2023). _tm: Text Mining Package_. R package version
0.7-11, &lt;https://CRAN.R-project.org/package=tm&gt;. Feinerer I, Hornik K, Meyer D
(2008). "Text Mining Infrastructure in R." _Journal of Statistical Software_,
*25*(5), 1-54. doi:10.18637/jss.v025.i05
&lt;https://doi.org/10.18637/jss.v025.i05&gt;.
  - Fife D (2024). _flexplot: Graphically Based Data Analysis Using 'flexplot'_.
R package version 0.20.5.
  - Grolemund G, Wickham H (2011). "Dates and Times Made Easy with lubridate."
_Journal of Statistical Software_, *40*(3), 1-25.
&lt;https://www.jstatsoft.org/v40/i03/&gt;.
  - Heinze G, Ploner M, Jiricka L, Steiner G (2023). _coxphf: Cox Regression with
Firth's Penalized Likelihood_. R package version 1.13.4,
&lt;https://CRAN.R-project.org/package=coxphf&gt;.
  - Hornik K (2020). _NLP: Natural Language Processing Infrastructure_. R package
version 0.2-1, &lt;https://CRAN.R-project.org/package=NLP&gt;.
  - Hothorn T, Hornik K, van de Wiel MA, Zeileis A (2006). "A Lego system for
conditional inference." _The American Statistician_, *60*(3), 257-263.
doi:10.1198/000313006X118430 &lt;https://doi.org/10.1198/000313006X118430&gt;.
Hothorn T, Hornik K, van de Wiel MA, Zeileis A (2008). "Implementing a class of
permutation tests: The coin package." _Journal of Statistical Software_,
*28*(8), 1-23. doi:10.18637/jss.v028.i08
&lt;https://doi.org/10.18637/jss.v028.i08&gt;.
  - Kassambara A (2023). _ggpubr: 'ggplot2' Based Publication Ready Plots_. R
package version 0.6.0, &lt;https://CRAN.R-project.org/package=ggpubr&gt;.
  - Kassambara A, Kosinski M, Biecek P (2021). _survminer: Drawing Survival
Curves using 'ggplot2'_. R package version 0.4.9,
&lt;https://CRAN.R-project.org/package=survminer&gt;.
  - Kolassa JE, Zhang J (2023). _PHInfiniteEstimates: Tools for Inference in the
Presence of a Monotone Likelihood_. R package version 2.9.5,
&lt;https://CRAN.R-project.org/package=PHInfiniteEstimates&gt;.
  - Lüdecke D, Ben-Shachar M, Patil I, Makowski D (2020). "Extracting, Computing
and Exploring the Parameters of Statistical Models using R." _Journal of Open
Source Software_, *5*(53), 2445. doi:10.21105/joss.02445
&lt;https://doi.org/10.21105/joss.02445&gt;.
  - Lüdecke D, Ben-Shachar M, Patil I, Waggoner P, Makowski D (2021).
"performance: An R Package for Assessment, Comparison and Testing of
Statistical Models." _Journal of Open Source Software_, *6*(60), 3139.
doi:10.21105/joss.03139 &lt;https://doi.org/10.21105/joss.03139&gt;.
  - Lüdecke D, Ben-Shachar M, Patil I, Wiernik B, Makowski D (2022). "easystats:
Framework for Easy Statistical Modeling, Visualization, and Reporting." _CRAN_.
R package, &lt;https://easystats.github.io/easystats/&gt;.
  - Lüdecke D, Patil I, Ben-Shachar M, Wiernik B, Waggoner P, Makowski D (2021).
"see: An R Package for Visualizing Statistical Models." _Journal of Open Source
Software_, *6*(64), 3393. doi:10.21105/joss.03393
&lt;https://doi.org/10.21105/joss.03393&gt;.
  - Lüdecke D, Waggoner P, Makowski D (2019). "insight: A Unified Interface to
Access Information from Model Objects in R." _Journal of Open Source Software_,
*4*(38), 1412. doi:10.21105/joss.01412 &lt;https://doi.org/10.21105/joss.01412&gt;.
  - Makowski D, Ben-Shachar M, Lüdecke D (2019). "bayestestR: Describing Effects
and their Uncertainty, Existence and Significance within the Bayesian
Framework." _Journal of Open Source Software_, *4*(40), 1541.
doi:10.21105/joss.01541 &lt;https://doi.org/10.21105/joss.01541&gt;,
&lt;https://joss.theoj.org/papers/10.21105/joss.01541&gt;.
  - Makowski D, Ben-Shachar M, Patil I, Lüdecke D (2020). "Estimation of
Model-Based Predictions, Contrasts and Means." _CRAN_.
&lt;https://github.com/easystats/modelbased&gt;.
  - Makowski D, Lüdecke D, Patil I, Thériault R, Ben-Shachar M, Wiernik B (2023).
"Automated Results Reporting as a Practical Tool to Improve Reproducibility and
Methodological Best Practices Adoption." _CRAN_.
&lt;https://easystats.github.io/report/&gt;.
  - Makowski D, Wiernik B, Patil I, Lüdecke D, Ben-Shachar M (2022).
"correlation: Methods for Correlation Analysis." Version 0.8.3,
&lt;https://CRAN.R-project.org/package=correlation&gt;. Makowski D, Ben-Shachar M,
Patil I, Lüdecke D (2020). "Methods and Algorithms for Correlation Analysis in
R." _Journal of Open Source Software_, *5*(51), 2306. doi:10.21105/joss.02306
&lt;https://doi.org/10.21105/joss.02306&gt;,
&lt;https://joss.theoj.org/papers/10.21105/joss.02306&gt;.
  - Meira-Machado L, Sestelo M (2023). _condSURV: Estimation of the Conditional
Survival Function for Ordered Multivariate Failure Time Data_. R package
version 2.0.4, &lt;https://CRAN.R-project.org/package=condSURV&gt;.
  - Müller K, Wickham H (2023). _tibble: Simple Data Frames_. R package version
3.2.1, &lt;https://CRAN.R-project.org/package=tibble&gt;.
  - Patil I, Makowski D, Ben-Shachar M, Wiernik B, Bacher E, Lüdecke D (2022).
"datawizard: An R Package for Easy Data Preparation and Statistical
Transformations." _Journal of Open Source Software_, *7*(78), 4684.
doi:10.21105/joss.04684 &lt;https://doi.org/10.21105/joss.04684&gt;.
  - R Core Team (2023). _foreign: Read Data Stored by 'Minitab', 'S', 'SAS',
'SPSS', 'Stata', 'Systat', 'Weka', 'dBase', ..._. R package version 0.8-85,
&lt;https://CRAN.R-project.org/package=foreign&gt;.
  - R Core Team (2023). _R: A Language and Environment for Statistical
Computing_. R Foundation for Statistical Computing, Vienna, Austria.
&lt;https://www.R-project.org/&gt;.
  - Ristl R, Ballarini N, Götte H, Schüler A, Posch M, König F (2021). "Delayed
treatment effects, treatment switching and heterogeneous patient populations:
How to design and analyze RCTs in oncology." _Pharmaceutical statistics_,
*20*(1), 129-145.
  - Robinson D, Hayes A, Couch S (2023). _broom: Convert Statistical Objects into
Tidy Tibbles_. R package version 1.0.5,
&lt;https://CRAN.R-project.org/package=broom&gt;.
  - Sjoberg D, Baillie M, Fruechtenicht C, Haesendonckx S, Treis T (2023).
_ggsurvfit: Flexible Time-to-Event Figures_. R package version 1.0.0,
&lt;https://CRAN.R-project.org/package=ggsurvfit&gt;.
  - Sjoberg D, Whiting K, Curry M, Lavery J, Larmarange J (2021). "Reproducible
Summary Tables with the gtsummary Package." _The R Journal_, *13*, 570-580.
doi:10.32614/RJ-2021-053 &lt;https://doi.org/10.32614/RJ-2021-053&gt;,
&lt;https://doi.org/10.32614/RJ-2021-053&gt;.
  - Thériault R (2023). "rempsyc: Convenience functions for psychology." _Journal
of Open Source Software_, *8*(87), 5466. doi:10.21105/joss.05466
&lt;https://doi.org/10.21105/joss.05466&gt;, &lt;https://doi.org/10.21105/joss.05466&gt;.
  - Therneau T (2023). _A Package for Survival Analysis in R_. R package version
3.5-7, &lt;https://CRAN.R-project.org/package=survival&gt;. Terry M. Therneau,
Patricia M. Grambsch (2000). _Modeling Survival Data: Extending the Cox Model_.
Springer, New York. ISBN 0-387-98784-3.
  - Wickham H (2016). _ggplot2: Elegant Graphics for Data Analysis_.
Springer-Verlag New York. ISBN 978-3-319-24277-4,
&lt;https://ggplot2.tidyverse.org&gt;.
  - Wickham H (2023). _forcats: Tools for Working with Categorical Variables
(Factors)_. R package version 1.0.0,
&lt;https://CRAN.R-project.org/package=forcats&gt;.
  - Wickham H (2023). _stringr: Simple, Consistent Wrappers for Common String
Operations_. R package version 1.5.1,
&lt;https://CRAN.R-project.org/package=stringr&gt;.
  - Wickham H, Averick M, Bryan J, Chang W, McGowan LD, François R, Grolemund G,
Hayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E, Bache SM, Müller K,
Ooms J, Robinson D, Seidel DP, Spinu V, Takahashi K, Vaughan D, Wilke C, Woo K,
Yutani H (2019). "Welcome to the tidyverse." _Journal of Open Source Software_,
*4*(43), 1686. doi:10.21105/joss.01686 &lt;https://doi.org/10.21105/joss.01686&gt;.
  - Wickham H, François R, Henry L, Müller K, Vaughan D (2023). _dplyr: A Grammar
of Data Manipulation_. R package version 1.1.3,
&lt;https://CRAN.R-project.org/package=dplyr&gt;.
  - Wickham H, Henry L (2023). _purrr: Functional Programming Tools_. R package
version 1.0.2, &lt;https://CRAN.R-project.org/package=purrr&gt;.
  - Wickham H, Hester J, Bryan J (2023). _readr: Read Rectangular Text Data_. R
package version 2.1.4, &lt;https://CRAN.R-project.org/package=readr&gt;.
  - Wickham H, Vaughan D, Girlich M (2023). _tidyr: Tidy Messy Data_. R package
version 1.3.0, &lt;https://CRAN.R-project.org/package=tidyr&gt;.
  - Zhu H (2021). _kableExtra: Construct Complex Table with 'kable' and Pipe
Syntax_. R package version 1.3.4,
&lt;https://CRAN.R-project.org/package=kableExtra&gt;.</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./lista_6.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lista 6 - Kaplan-Meier e Cox Regression</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./ARIMA.html" class="pagination-link">
        <span class="nav-page-text">ARIMA</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>